(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tm={exports:{}},kl={},Om={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qs=Symbol.for("react.element"),v_=Symbol.for("react.portal"),y_=Symbol.for("react.fragment"),__=Symbol.for("react.strict_mode"),x_=Symbol.for("react.profiler"),w_=Symbol.for("react.provider"),S_=Symbol.for("react.context"),C_=Symbol.for("react.forward_ref"),b_=Symbol.for("react.suspense"),T_=Symbol.for("react.memo"),O_=Symbol.for("react.lazy"),wf=Symbol.iterator;function k_(t){return t===null||typeof t!="object"?null:(t=wf&&t[wf]||t["@@iterator"],typeof t=="function"?t:null)}var km={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Em=Object.assign,Mm={};function Ai(t,e,r){this.props=t,this.context=e,this.refs=Mm,this.updater=r||km}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pm(){}Pm.prototype=Ai.prototype;function Ph(t,e,r){this.props=t,this.context=e,this.refs=Mm,this.updater=r||km}var Dh=Ph.prototype=new Pm;Dh.constructor=Ph;Em(Dh,Ai.prototype);Dh.isPureReactComponent=!0;var Sf=Array.isArray,Dm=Object.prototype.hasOwnProperty,Ah={current:null},Am={key:!0,ref:!0,__self:!0,__source:!0};function jm(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Dm.call(e,n)&&!Am.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Qs,type:t,key:s,ref:o,props:i,_owner:Ah.current}}function E_(t,e){return{$$typeof:Qs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qs}function M_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Cf=/\/+/g;function _c(t,e){return typeof t=="object"&&t!==null&&t.key!=null?M_(""+t.key):e.toString(36)}function xa(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qs:case v_:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+_c(o,0):n,Sf(i)?(r="",t!=null&&(r=t.replace(Cf,"$&/")+"/"),xa(i,e,r,"",function(c){return c})):i!=null&&(jh(i)&&(i=E_(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Cf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Sf(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+_c(s,a);o+=xa(s,e,r,l,i)}else if(l=k_(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+_c(s,a++),o+=xa(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ko(t,e,r){if(t==null)return t;var n=[],i=0;return xa(t,n,"","",function(s){return e.call(r,s,i++)}),n}function P_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var it={current:null},wa={transition:null},D_={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:wa,ReactCurrentOwner:Ah};function $m(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:ko,forEach:function(t,e,r){ko(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ko(t,function(){e++}),e},toArray:function(t){return ko(t,function(e){return e})||[]},only:function(t){if(!jh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};X.Component=Ai;X.Fragment=y_;X.Profiler=x_;X.PureComponent=Ph;X.StrictMode=__;X.Suspense=b_;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D_;X.act=$m;X.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Em({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ah.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Dm.call(e,l)&&!Am.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Qs,type:t.type,key:i,ref:s,props:n,_owner:o}};X.createContext=function(t){return t={$$typeof:S_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:w_,_context:t},t.Consumer=t};X.createElement=jm;X.createFactory=function(t){var e=jm.bind(null,t);return e.type=t,e};X.createRef=function(){return{current:null}};X.forwardRef=function(t){return{$$typeof:C_,render:t}};X.isValidElement=jh;X.lazy=function(t){return{$$typeof:O_,_payload:{_status:-1,_result:t},_init:P_}};X.memo=function(t,e){return{$$typeof:T_,type:t,compare:e===void 0?null:e}};X.startTransition=function(t){var e=wa.transition;wa.transition={};try{t()}finally{wa.transition=e}};X.unstable_act=$m;X.useCallback=function(t,e){return it.current.useCallback(t,e)};X.useContext=function(t){return it.current.useContext(t)};X.useDebugValue=function(){};X.useDeferredValue=function(t){return it.current.useDeferredValue(t)};X.useEffect=function(t,e){return it.current.useEffect(t,e)};X.useId=function(){return it.current.useId()};X.useImperativeHandle=function(t,e,r){return it.current.useImperativeHandle(t,e,r)};X.useInsertionEffect=function(t,e){return it.current.useInsertionEffect(t,e)};X.useLayoutEffect=function(t,e){return it.current.useLayoutEffect(t,e)};X.useMemo=function(t,e){return it.current.useMemo(t,e)};X.useReducer=function(t,e,r){return it.current.useReducer(t,e,r)};X.useRef=function(t){return it.current.useRef(t)};X.useState=function(t){return it.current.useState(t)};X.useSyncExternalStore=function(t,e,r){return it.current.useSyncExternalStore(t,e,r)};X.useTransition=function(){return it.current.useTransition()};X.version="18.3.1";Om.exports=X;var G=Om.exports;const Tn=m_(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_=G,j_=Symbol.for("react.element"),$_=Symbol.for("react.fragment"),L_=Object.prototype.hasOwnProperty,F_=A_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R_={key:!0,ref:!0,__self:!0,__source:!0};function Lm(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)L_.call(e,n)&&!R_.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:j_,type:t,key:s,ref:o,props:i,_owner:F_.current}}kl.Fragment=$_;kl.jsx=Lm;kl.jsxs=Lm;Tm.exports=kl;var F=Tm.exports,Fm={exports:{}},bt={},Rm={exports:{}},Im={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,H){var N=j.length;j.push(H);e:for(;0<N;){var Q=N-1>>>1,he=j[Q];if(0<i(he,H))j[Q]=H,j[N]=he,N=Q;else break e}}function r(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var H=j[0],N=j.pop();if(N!==H){j[0]=N;e:for(var Q=0,he=j.length,mt=he>>>1;Q<mt;){var se=2*(Q+1)-1,Re=j[se],ze=se+1,kt=j[ze];if(0>i(Re,N))ze<he&&0>i(kt,Re)?(j[Q]=kt,j[ze]=N,Q=ze):(j[Q]=Re,j[se]=N,Q=se);else if(ze<he&&0>i(kt,N))j[Q]=kt,j[ze]=N,Q=ze;else break e}}return H}function i(j,H){var N=j.sortIndex-H.sortIndex;return N!==0?N:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,m=!1,v=!1,C=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var H=r(c);H!==null;){if(H.callback===null)n(c);else if(H.startTime<=j)n(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=r(c)}}function T(j){if(v=!1,y(j),!m)if(r(l)!==null)m=!0,ye(k);else{var H=r(c);H!==null&&re(T,H.startTime-j)}}function k(j,H){m=!1,v&&(v=!1,g(M),M=-1),f=!0;var N=d;try{for(y(H),h=r(l);h!==null&&(!(h.expirationTime>H)||j&&!Y());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,d=h.priorityLevel;var he=Q(h.expirationTime<=H);H=t.unstable_now(),typeof he=="function"?h.callback=he:h===r(l)&&n(l),y(H)}else n(l);h=r(l)}if(h!==null)var mt=!0;else{var se=r(c);se!==null&&re(T,se.startTime-H),mt=!1}return mt}finally{h=null,d=N,f=!1}}var E=!1,P=null,M=-1,z=5,B=-1;function Y(){return!(t.unstable_now()-B<z)}function te(){if(P!==null){var j=t.unstable_now();B=j;var H=!0;try{H=P(!0,j)}finally{H?U():(E=!1,P=null)}}else E=!1}var U;if(typeof p=="function")U=function(){p(te)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,V=ie.port2;ie.port1.onmessage=te,U=function(){V.postMessage(null)}}else U=function(){C(te,0)};function ye(j){P=j,E||(E=!0,U())}function re(j,H){M=C(function(){j(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,ye(k))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(j){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var N=d;d=H;try{return j()}finally{d=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var N=d;d=j;try{return H()}finally{d=N}},t.unstable_scheduleCallback=function(j,H,N){var Q=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?Q+N:Q):N=Q,j){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=N+he,j={id:u++,callback:H,priorityLevel:j,startTime:N,expirationTime:he,sortIndex:-1},N>Q?(j.sortIndex=N,e(c,j),r(l)===null&&j===r(c)&&(v?(g(M),M=-1):v=!0,re(T,N-Q))):(j.sortIndex=he,e(l,j),m||f||(m=!0,ye(k))),j},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(j){var H=d;return function(){var N=d;d=H;try{return j.apply(this,arguments)}finally{d=N}}}})(Im);Rm.exports=Im;var I_=Rm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_=G,St=I_;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bm=new Set,Ms={};function Rn(t,e){wi(t,e),wi(t+"Capture",e)}function wi(t,e){for(Ms[t]=e,t=0;t<e.length;t++)Bm.add(e[t])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mu=Object.prototype.hasOwnProperty,N_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bf={},Tf={};function z_(t){return mu.call(Tf,t)?!0:mu.call(bf,t)?!1:N_.test(t)?Tf[t]=!0:(bf[t]=!0,!1)}function H_(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function W_(t,e,r,n){if(e===null||typeof e>"u"||H_(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function st(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ve[t]=new st(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ve[e]=new st(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ve[t]=new st(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ve[t]=new st(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ve[t]=new st(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ve[t]=new st(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ve[t]=new st(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ve[t]=new st(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ve[t]=new st(t,5,!1,t.toLowerCase(),null,!1,!1)});var $h=/[\-:]([a-z])/g;function Lh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($h,Lh);Ve[e]=new st(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($h,Lh);Ve[e]=new st(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($h,Lh);Ve[e]=new st(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ve[t]=new st(t,1,!1,t.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ve[t]=new st(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fh(t,e,r,n){var i=Ve.hasOwnProperty(e)?Ve[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(W_(e,r,i,n)&&(r=null),n||i===null?z_(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Dr=B_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eo=Symbol.for("react.element"),Jn=Symbol.for("react.portal"),Zn=Symbol.for("react.fragment"),Rh=Symbol.for("react.strict_mode"),vu=Symbol.for("react.profiler"),Nm=Symbol.for("react.provider"),zm=Symbol.for("react.context"),Ih=Symbol.for("react.forward_ref"),yu=Symbol.for("react.suspense"),_u=Symbol.for("react.suspense_list"),Bh=Symbol.for("react.memo"),Ir=Symbol.for("react.lazy"),Hm=Symbol.for("react.offscreen"),Of=Symbol.iterator;function Qi(t){return t===null||typeof t!="object"?null:(t=Of&&t[Of]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,xc;function cs(t){if(xc===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);xc=e&&e[1]||""}return`
`+xc+t}var wc=!1;function Sc(t,e){if(!t||wc)return"";wc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{wc=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?cs(t):""}function V_(t){switch(t.tag){case 5:return cs(t.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return t=Sc(t.type,!1),t;case 11:return t=Sc(t.type.render,!1),t;case 1:return t=Sc(t.type,!0),t;default:return""}}function xu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zn:return"Fragment";case Jn:return"Portal";case vu:return"Profiler";case Rh:return"StrictMode";case yu:return"Suspense";case _u:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zm:return(t.displayName||"Context")+".Consumer";case Nm:return(t._context.displayName||"Context")+".Provider";case Ih:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bh:return e=t.displayName||null,e!==null?e:xu(t.type)||"Memo";case Ir:e=t._payload,t=t._init;try{return xu(t(e))}catch{}}return null}function U_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xu(e);case 8:return e===Rh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function X_(t){var e=Wm(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mo(t){t._valueTracker||(t._valueTracker=X_(t))}function Vm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Wm(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function La(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wu(t,e){var r=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function kf(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=tn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Um(t,e){e=e.checked,e!=null&&Fh(t,"checked",e,!1)}function Su(t,e){Um(t,e);var r=tn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cu(t,e.type,r):e.hasOwnProperty("defaultValue")&&Cu(t,e.type,tn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ef(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Cu(t,e,r){(e!=="number"||La(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var us=Array.isArray;function fi(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+tn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mf(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(A(92));if(us(r)){if(1<r.length)throw Error(A(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:tn(r)}}function Xm(t,e){var r=tn(e.value),n=tn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Pf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ym(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ym(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Po,Gm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Po=Po||document.createElement("div"),Po.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Po.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ps(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y_=["Webkit","ms","Moz","O"];Object.keys(ps).forEach(function(t){Y_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ps[e]=ps[t]})});function Km(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ps.hasOwnProperty(t)&&ps[t]?(""+e).trim():e+"px"}function qm(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Km(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var G_=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ou(t,e){if(e){if(G_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function ku(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eu=null;function Nh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mu=null,gi=null,pi=null;function Df(t){if(t=eo(t)){if(typeof Mu!="function")throw Error(A(280));var e=t.stateNode;e&&(e=Al(e),Mu(t.stateNode,t.type,e))}}function Qm(t){gi?pi?pi.push(t):pi=[t]:gi=t}function Jm(){if(gi){var t=gi,e=pi;if(pi=gi=null,Df(t),e)for(t=0;t<e.length;t++)Df(e[t])}}function Zm(t,e){return t(e)}function e0(){}var Cc=!1;function t0(t,e,r){if(Cc)return t(e,r);Cc=!0;try{return Zm(t,e,r)}finally{Cc=!1,(gi!==null||pi!==null)&&(e0(),Jm())}}function Ds(t,e){var r=t.stateNode;if(r===null)return null;var n=Al(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(A(231,e,typeof r));return r}var Pu=!1;if(Or)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){Pu=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{Pu=!1}function K_(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var ms=!1,Fa=null,Ra=!1,Du=null,q_={onError:function(t){ms=!0,Fa=t}};function Q_(t,e,r,n,i,s,o,a,l){ms=!1,Fa=null,K_.apply(q_,arguments)}function J_(t,e,r,n,i,s,o,a,l){if(Q_.apply(this,arguments),ms){if(ms){var c=Fa;ms=!1,Fa=null}else throw Error(A(198));Ra||(Ra=!0,Du=c)}}function In(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function r0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Af(t){if(In(t)!==t)throw Error(A(188))}function Z_(t){var e=t.alternate;if(!e){if(e=In(t),e===null)throw Error(A(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Af(i),t;if(s===n)return Af(i),e;s=s.sibling}throw Error(A(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(A(189))}}if(r.alternate!==n)throw Error(A(190))}if(r.tag!==3)throw Error(A(188));return r.stateNode.current===r?t:e}function n0(t){return t=Z_(t),t!==null?i0(t):null}function i0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=i0(t);if(e!==null)return e;t=t.sibling}return null}var s0=St.unstable_scheduleCallback,jf=St.unstable_cancelCallback,ex=St.unstable_shouldYield,tx=St.unstable_requestPaint,Ee=St.unstable_now,rx=St.unstable_getCurrentPriorityLevel,zh=St.unstable_ImmediatePriority,o0=St.unstable_UserBlockingPriority,Ia=St.unstable_NormalPriority,nx=St.unstable_LowPriority,a0=St.unstable_IdlePriority,El=null,cr=null;function ix(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(El,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:ax,sx=Math.log,ox=Math.LN2;function ax(t){return t>>>=0,t===0?32:31-(sx(t)/ox|0)|0}var Do=64,Ao=4194304;function hs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ba(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=hs(a):(s&=o,s!==0&&(n=hs(s)))}else o=r&~i,o!==0?n=hs(o):s!==0&&(n=hs(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Kt(e),i=1<<r,n|=t[r],e&=~i;return n}function lx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cx(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Kt(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=lx(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Au(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function l0(){var t=Do;return Do<<=1,!(Do&4194240)&&(Do=64),t}function bc(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Js(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kt(e),t[e]=r}function ux(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Kt(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Hh(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Kt(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ne=0;function c0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var u0,Wh,h0,d0,f0,ju=!1,jo=[],Yr=null,Gr=null,Kr=null,As=new Map,js=new Map,Nr=[],hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $f(t,e){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":As.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":js.delete(e.pointerId)}}function Zi(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=eo(e),e!==null&&Wh(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function dx(t,e,r,n,i){switch(e){case"focusin":return Yr=Zi(Yr,t,e,r,n,i),!0;case"dragenter":return Gr=Zi(Gr,t,e,r,n,i),!0;case"mouseover":return Kr=Zi(Kr,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return As.set(s,Zi(As.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,js.set(s,Zi(js.get(s)||null,t,e,r,n,i)),!0}return!1}function g0(t){var e=wn(t.target);if(e!==null){var r=In(e);if(r!==null){if(e=r.tag,e===13){if(e=r0(r),e!==null){t.blockedOn=e,f0(t.priority,function(){h0(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=$u(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Eu=n,r.target.dispatchEvent(n),Eu=null}else return e=eo(r),e!==null&&Wh(e),t.blockedOn=r,!1;e.shift()}return!0}function Lf(t,e,r){Sa(t)&&r.delete(e)}function fx(){ju=!1,Yr!==null&&Sa(Yr)&&(Yr=null),Gr!==null&&Sa(Gr)&&(Gr=null),Kr!==null&&Sa(Kr)&&(Kr=null),As.forEach(Lf),js.forEach(Lf)}function es(t,e){t.blockedOn===e&&(t.blockedOn=null,ju||(ju=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,fx)))}function $s(t){function e(i){return es(i,t)}if(0<jo.length){es(jo[0],t);for(var r=1;r<jo.length;r++){var n=jo[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Yr!==null&&es(Yr,t),Gr!==null&&es(Gr,t),Kr!==null&&es(Kr,t),As.forEach(e),js.forEach(e),r=0;r<Nr.length;r++)n=Nr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Nr.length&&(r=Nr[0],r.blockedOn===null);)g0(r),r.blockedOn===null&&Nr.shift()}var mi=Dr.ReactCurrentBatchConfig,Na=!0;function gx(t,e,r,n){var i=ne,s=mi.transition;mi.transition=null;try{ne=1,Vh(t,e,r,n)}finally{ne=i,mi.transition=s}}function px(t,e,r,n){var i=ne,s=mi.transition;mi.transition=null;try{ne=4,Vh(t,e,r,n)}finally{ne=i,mi.transition=s}}function Vh(t,e,r,n){if(Na){var i=$u(t,e,r,n);if(i===null)$c(t,e,n,za,r),$f(t,n);else if(dx(i,t,e,r,n))n.stopPropagation();else if($f(t,n),e&4&&-1<hx.indexOf(t)){for(;i!==null;){var s=eo(i);if(s!==null&&u0(s),s=$u(t,e,r,n),s===null&&$c(t,e,n,za,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else $c(t,e,n,null,r)}}var za=null;function $u(t,e,r,n){if(za=null,t=Nh(n),t=wn(t),t!==null)if(e=In(t),e===null)t=null;else if(r=e.tag,r===13){if(t=r0(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return za=t,null}function p0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rx()){case zh:return 1;case o0:return 4;case Ia:case nx:return 16;case a0:return 536870912;default:return 16}default:return 16}}var Wr=null,Uh=null,Ca=null;function m0(){if(Ca)return Ca;var t,e=Uh,r=e.length,n,i="value"in Wr?Wr.value:Wr.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Ca=i.slice(t,1<n?1-n:void 0)}function ba(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $o(){return!0}function Ff(){return!1}function Tt(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$o:Ff,this.isPropagationStopped=Ff,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$o)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$o)},persist:function(){},isPersistent:$o}),e}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xh=Tt(ji),Zs=Ce({},ji,{view:0,detail:0}),mx=Tt(Zs),Tc,Oc,ts,Ml=Ce({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ts&&(ts&&t.type==="mousemove"?(Tc=t.screenX-ts.screenX,Oc=t.screenY-ts.screenY):Oc=Tc=0,ts=t),Tc)},movementY:function(t){return"movementY"in t?t.movementY:Oc}}),Rf=Tt(Ml),vx=Ce({},Ml,{dataTransfer:0}),yx=Tt(vx),_x=Ce({},Zs,{relatedTarget:0}),kc=Tt(_x),xx=Ce({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),wx=Tt(xx),Sx=Ce({},ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cx=Tt(Sx),bx=Ce({},ji,{data:0}),If=Tt(bx),Tx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ox={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ex(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kx[t])?!!e[t]:!1}function Yh(){return Ex}var Mx=Ce({},Zs,{key:function(t){if(t.key){var e=Tx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ba(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ox[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yh,charCode:function(t){return t.type==="keypress"?ba(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ba(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Px=Tt(Mx),Dx=Ce({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bf=Tt(Dx),Ax=Ce({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yh}),jx=Tt(Ax),$x=Ce({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lx=Tt($x),Fx=Ce({},Ml,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rx=Tt(Fx),Ix=[9,13,27,32],Gh=Or&&"CompositionEvent"in window,vs=null;Or&&"documentMode"in document&&(vs=document.documentMode);var Bx=Or&&"TextEvent"in window&&!vs,v0=Or&&(!Gh||vs&&8<vs&&11>=vs),Nf=" ",zf=!1;function y0(t,e){switch(t){case"keyup":return Ix.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ei=!1;function Nx(t,e){switch(t){case"compositionend":return _0(e);case"keypress":return e.which!==32?null:(zf=!0,Nf);case"textInput":return t=e.data,t===Nf&&zf?null:t;default:return null}}function zx(t,e){if(ei)return t==="compositionend"||!Gh&&y0(t,e)?(t=m0(),Ca=Uh=Wr=null,ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return v0&&e.locale!=="ko"?null:e.data;default:return null}}var Hx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Hx[t.type]:e==="textarea"}function x0(t,e,r,n){Qm(n),e=Ha(e,"onChange"),0<e.length&&(r=new Xh("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ys=null,Ls=null;function Wx(t){D0(t,0)}function Pl(t){var e=ni(t);if(Vm(e))return t}function Vx(t,e){if(t==="change")return e}var w0=!1;if(Or){var Ec;if(Or){var Mc="oninput"in document;if(!Mc){var Wf=document.createElement("div");Wf.setAttribute("oninput","return;"),Mc=typeof Wf.oninput=="function"}Ec=Mc}else Ec=!1;w0=Ec&&(!document.documentMode||9<document.documentMode)}function Vf(){ys&&(ys.detachEvent("onpropertychange",S0),Ls=ys=null)}function S0(t){if(t.propertyName==="value"&&Pl(Ls)){var e=[];x0(e,Ls,t,Nh(t)),t0(Wx,e)}}function Ux(t,e,r){t==="focusin"?(Vf(),ys=e,Ls=r,ys.attachEvent("onpropertychange",S0)):t==="focusout"&&Vf()}function Xx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pl(Ls)}function Yx(t,e){if(t==="click")return Pl(e)}function Gx(t,e){if(t==="input"||t==="change")return Pl(e)}function Kx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jt=typeof Object.is=="function"?Object.is:Kx;function Fs(t,e){if(Jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!mu.call(e,i)||!Jt(t[i],e[i]))return!1}return!0}function Uf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xf(t,e){var r=Uf(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Uf(r)}}function C0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?C0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function b0(){for(var t=window,e=La();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=La(t.document)}return e}function Kh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qx(t){var e=b0(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&C0(r.ownerDocument.documentElement,r)){if(n!==null&&Kh(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Xf(r,s);var o=Xf(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Qx=Or&&"documentMode"in document&&11>=document.documentMode,ti=null,Lu=null,_s=null,Fu=!1;function Yf(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Fu||ti==null||ti!==La(n)||(n=ti,"selectionStart"in n&&Kh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_s&&Fs(_s,n)||(_s=n,n=Ha(Lu,"onSelect"),0<n.length&&(e=new Xh("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ti)))}function Lo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ri={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},Pc={},T0={};Or&&(T0=document.createElement("div").style,"AnimationEvent"in window||(delete ri.animationend.animation,delete ri.animationiteration.animation,delete ri.animationstart.animation),"TransitionEvent"in window||delete ri.transitionend.transition);function Dl(t){if(Pc[t])return Pc[t];if(!ri[t])return t;var e=ri[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in T0)return Pc[t]=e[r];return t}var O0=Dl("animationend"),k0=Dl("animationiteration"),E0=Dl("animationstart"),M0=Dl("transitionend"),P0=new Map,Gf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(t,e){P0.set(t,e),Rn(e,[t])}for(var Dc=0;Dc<Gf.length;Dc++){var Ac=Gf[Dc],Jx=Ac.toLowerCase(),Zx=Ac[0].toUpperCase()+Ac.slice(1);ln(Jx,"on"+Zx)}ln(O0,"onAnimationEnd");ln(k0,"onAnimationIteration");ln(E0,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(M0,"onTransitionEnd");wi("onMouseEnter",["mouseout","mouseover"]);wi("onMouseLeave",["mouseout","mouseover"]);wi("onPointerEnter",["pointerout","pointerover"]);wi("onPointerLeave",["pointerout","pointerover"]);Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ew=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function Kf(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,J_(n,e,void 0,t),t.currentTarget=null}function D0(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Kf(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Kf(i,a,c),s=l}}}if(Ra)throw t=Du,Ra=!1,Du=null,t}function de(t,e){var r=e[zu];r===void 0&&(r=e[zu]=new Set);var n=t+"__bubble";r.has(n)||(A0(e,t,2,!1),r.add(n))}function jc(t,e,r){var n=0;e&&(n|=4),A0(r,t,n,e)}var Fo="_reactListening"+Math.random().toString(36).slice(2);function Rs(t){if(!t[Fo]){t[Fo]=!0,Bm.forEach(function(r){r!=="selectionchange"&&(ew.has(r)||jc(r,!1,t),jc(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fo]||(e[Fo]=!0,jc("selectionchange",!1,e))}}function A0(t,e,r,n){switch(p0(e)){case 1:var i=gx;break;case 4:i=px;break;default:i=Vh}r=i.bind(null,e,r,t),i=void 0,!Pu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function $c(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=wn(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}t0(function(){var c=s,u=Nh(r),h=[];e:{var d=P0.get(t);if(d!==void 0){var f=Xh,m=t;switch(t){case"keypress":if(ba(r)===0)break e;case"keydown":case"keyup":f=Px;break;case"focusin":m="focus",f=kc;break;case"focusout":m="blur",f=kc;break;case"beforeblur":case"afterblur":f=kc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Rf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=yx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=jx;break;case O0:case k0:case E0:f=wx;break;case M0:f=Lx;break;case"scroll":f=mx;break;case"wheel":f=Rx;break;case"copy":case"cut":case"paste":f=Cx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Bf}var v=(e&4)!==0,C=!v&&t==="scroll",g=v?d!==null?d+"Capture":null:d;v=[];for(var p=c,y;p!==null;){y=p;var T=y.stateNode;if(y.tag===5&&T!==null&&(y=T,g!==null&&(T=Ds(p,g),T!=null&&v.push(Is(p,T,y)))),C)break;p=p.return}0<v.length&&(d=new f(d,m,null,r,u),h.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&r!==Eu&&(m=r.relatedTarget||r.fromElement)&&(wn(m)||m[kr]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(m=r.relatedTarget||r.toElement,f=c,m=m?wn(m):null,m!==null&&(C=In(m),m!==C||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(v=Rf,T="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(v=Bf,T="onPointerLeave",g="onPointerEnter",p="pointer"),C=f==null?d:ni(f),y=m==null?d:ni(m),d=new v(T,p+"leave",f,r,u),d.target=C,d.relatedTarget=y,T=null,wn(u)===c&&(v=new v(g,p+"enter",m,r,u),v.target=y,v.relatedTarget=C,T=v),C=T,f&&m)t:{for(v=f,g=m,p=0,y=v;y;y=Xn(y))p++;for(y=0,T=g;T;T=Xn(T))y++;for(;0<p-y;)v=Xn(v),p--;for(;0<y-p;)g=Xn(g),y--;for(;p--;){if(v===g||g!==null&&v===g.alternate)break t;v=Xn(v),g=Xn(g)}v=null}else v=null;f!==null&&qf(h,d,f,v,!1),m!==null&&C!==null&&qf(h,C,m,v,!0)}}e:{if(d=c?ni(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var k=Vx;else if(Hf(d))if(w0)k=Gx;else{k=Xx;var E=Ux}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(k=Yx);if(k&&(k=k(t,c))){x0(h,k,r,u);break e}E&&E(t,d,c),t==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&Cu(d,"number",d.value)}switch(E=c?ni(c):window,t){case"focusin":(Hf(E)||E.contentEditable==="true")&&(ti=E,Lu=c,_s=null);break;case"focusout":_s=Lu=ti=null;break;case"mousedown":Fu=!0;break;case"contextmenu":case"mouseup":case"dragend":Fu=!1,Yf(h,r,u);break;case"selectionchange":if(Qx)break;case"keydown":case"keyup":Yf(h,r,u)}var P;if(Gh)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ei?y0(t,r)&&(M="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(v0&&r.locale!=="ko"&&(ei||M!=="onCompositionStart"?M==="onCompositionEnd"&&ei&&(P=m0()):(Wr=u,Uh="value"in Wr?Wr.value:Wr.textContent,ei=!0)),E=Ha(c,M),0<E.length&&(M=new If(M,t,null,r,u),h.push({event:M,listeners:E}),P?M.data=P:(P=_0(r),P!==null&&(M.data=P)))),(P=Bx?Nx(t,r):zx(t,r))&&(c=Ha(c,"onBeforeInput"),0<c.length&&(u=new If("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=P))}D0(h,e)})}function Is(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Ha(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ds(t,r),s!=null&&n.unshift(Is(t,s,i)),s=Ds(t,e),s!=null&&n.push(Is(t,s,i))),t=t.return}return n}function Xn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qf(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Ds(r,s),l!=null&&o.unshift(Is(r,l,a))):i||(l=Ds(r,s),l!=null&&o.push(Is(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var tw=/\r\n?/g,rw=/\u0000|\uFFFD/g;function Qf(t){return(typeof t=="string"?t:""+t).replace(tw,`
`).replace(rw,"")}function Ro(t,e,r){if(e=Qf(e),Qf(t)!==e&&r)throw Error(A(425))}function Wa(){}var Ru=null,Iu=null;function Bu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nu=typeof setTimeout=="function"?setTimeout:void 0,nw=typeof clearTimeout=="function"?clearTimeout:void 0,Jf=typeof Promise=="function"?Promise:void 0,iw=typeof queueMicrotask=="function"?queueMicrotask:typeof Jf<"u"?function(t){return Jf.resolve(null).then(t).catch(sw)}:Nu;function sw(t){setTimeout(function(){throw t})}function Lc(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),$s(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);$s(e)}function qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var $i=Math.random().toString(36).slice(2),sr="__reactFiber$"+$i,Bs="__reactProps$"+$i,kr="__reactContainer$"+$i,zu="__reactEvents$"+$i,ow="__reactListeners$"+$i,aw="__reactHandles$"+$i;function wn(t){var e=t[sr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[kr]||r[sr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Zf(t);t!==null;){if(r=t[sr])return r;t=Zf(t)}return e}t=r,r=t.parentNode}return null}function eo(t){return t=t[sr]||t[kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function Al(t){return t[Bs]||null}var Hu=[],ii=-1;function cn(t){return{current:t}}function ge(t){0>ii||(t.current=Hu[ii],Hu[ii]=null,ii--)}function ue(t,e){ii++,Hu[ii]=t.current,t.current=e}var rn={},Ke=cn(rn),ut=cn(!1),Dn=rn;function Si(t,e){var r=t.type.contextTypes;if(!r)return rn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ht(t){return t=t.childContextTypes,t!=null}function Va(){ge(ut),ge(Ke)}function eg(t,e,r){if(Ke.current!==rn)throw Error(A(168));ue(Ke,e),ue(ut,r)}function j0(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(A(108,U_(t)||"Unknown",i));return Ce({},r,n)}function Ua(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rn,Dn=Ke.current,ue(Ke,t),ue(ut,ut.current),!0}function tg(t,e,r){var n=t.stateNode;if(!n)throw Error(A(169));r?(t=j0(t,e,Dn),n.__reactInternalMemoizedMergedChildContext=t,ge(ut),ge(Ke),ue(Ke,t)):ge(ut),ue(ut,r)}var _r=null,jl=!1,Fc=!1;function $0(t){_r===null?_r=[t]:_r.push(t)}function lw(t){jl=!0,$0(t)}function un(){if(!Fc&&_r!==null){Fc=!0;var t=0,e=ne;try{var r=_r;for(ne=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}_r=null,jl=!1}catch(i){throw _r!==null&&(_r=_r.slice(t+1)),s0(zh,un),i}finally{ne=e,Fc=!1}}return null}var si=[],oi=0,Xa=null,Ya=0,Pt=[],Dt=0,An=null,wr=1,Sr="";function gn(t,e){si[oi++]=Ya,si[oi++]=Xa,Xa=t,Ya=e}function L0(t,e,r){Pt[Dt++]=wr,Pt[Dt++]=Sr,Pt[Dt++]=An,An=t;var n=wr;t=Sr;var i=32-Kt(n)-1;n&=~(1<<i),r+=1;var s=32-Kt(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,wr=1<<32-Kt(e)+i|r<<i|n,Sr=s+t}else wr=1<<s|r<<i|n,Sr=t}function qh(t){t.return!==null&&(gn(t,1),L0(t,1,0))}function Qh(t){for(;t===Xa;)Xa=si[--oi],si[oi]=null,Ya=si[--oi],si[oi]=null;for(;t===An;)An=Pt[--Dt],Pt[Dt]=null,Sr=Pt[--Dt],Pt[Dt]=null,wr=Pt[--Dt],Pt[Dt]=null}var wt=null,_t=null,pe=!1,Yt=null;function F0(t,e){var r=$t(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function rg(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wt=t,_t=qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wt=t,_t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=An!==null?{id:wr,overflow:Sr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=$t(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,wt=t,_t=null,!0):!1;default:return!1}}function Wu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vu(t){if(pe){var e=_t;if(e){var r=e;if(!rg(t,e)){if(Wu(t))throw Error(A(418));e=qr(r.nextSibling);var n=wt;e&&rg(t,e)?F0(n,r):(t.flags=t.flags&-4097|2,pe=!1,wt=t)}}else{if(Wu(t))throw Error(A(418));t.flags=t.flags&-4097|2,pe=!1,wt=t}}}function ng(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wt=t}function Io(t){if(t!==wt)return!1;if(!pe)return ng(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bu(t.type,t.memoizedProps)),e&&(e=_t)){if(Wu(t))throw R0(),Error(A(418));for(;e;)F0(t,e),e=qr(e.nextSibling)}if(ng(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){_t=qr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}_t=null}}else _t=wt?qr(t.stateNode.nextSibling):null;return!0}function R0(){for(var t=_t;t;)t=qr(t.nextSibling)}function Ci(){_t=wt=null,pe=!1}function Jh(t){Yt===null?Yt=[t]:Yt.push(t)}var cw=Dr.ReactCurrentBatchConfig;function rs(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(A(309));var n=r.stateNode}if(!n)throw Error(A(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(A(284));if(!r._owner)throw Error(A(290,t))}return t}function Bo(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ig(t){var e=t._init;return e(t._payload)}function I0(t){function e(g,p){if(t){var y=g.deletions;y===null?(g.deletions=[p],g.flags|=16):y.push(p)}}function r(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=en(g,p),g.index=0,g.sibling=null,g}function s(g,p,y){return g.index=y,t?(y=g.alternate,y!==null?(y=y.index,y<p?(g.flags|=2,p):y):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,y,T){return p===null||p.tag!==6?(p=Wc(y,g.mode,T),p.return=g,p):(p=i(p,y),p.return=g,p)}function l(g,p,y,T){var k=y.type;return k===Zn?u(g,p,y.props.children,T,y.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ir&&ig(k)===p.type)?(T=i(p,y.props),T.ref=rs(g,p,y),T.return=g,T):(T=Da(y.type,y.key,y.props,null,g.mode,T),T.ref=rs(g,p,y),T.return=g,T)}function c(g,p,y,T){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Vc(y,g.mode,T),p.return=g,p):(p=i(p,y.children||[]),p.return=g,p)}function u(g,p,y,T,k){return p===null||p.tag!==7?(p=kn(y,g.mode,T,k),p.return=g,p):(p=i(p,y),p.return=g,p)}function h(g,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Wc(""+p,g.mode,y),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Eo:return y=Da(p.type,p.key,p.props,null,g.mode,y),y.ref=rs(g,null,p),y.return=g,y;case Jn:return p=Vc(p,g.mode,y),p.return=g,p;case Ir:var T=p._init;return h(g,T(p._payload),y)}if(us(p)||Qi(p))return p=kn(p,g.mode,y,null),p.return=g,p;Bo(g,p)}return null}function d(g,p,y,T){var k=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:a(g,p,""+y,T);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Eo:return y.key===k?l(g,p,y,T):null;case Jn:return y.key===k?c(g,p,y,T):null;case Ir:return k=y._init,d(g,p,k(y._payload),T)}if(us(y)||Qi(y))return k!==null?null:u(g,p,y,T,null);Bo(g,y)}return null}function f(g,p,y,T,k){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(y)||null,a(p,g,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Eo:return g=g.get(T.key===null?y:T.key)||null,l(p,g,T,k);case Jn:return g=g.get(T.key===null?y:T.key)||null,c(p,g,T,k);case Ir:var E=T._init;return f(g,p,y,E(T._payload),k)}if(us(T)||Qi(T))return g=g.get(y)||null,u(p,g,T,k,null);Bo(p,T)}return null}function m(g,p,y,T){for(var k=null,E=null,P=p,M=p=0,z=null;P!==null&&M<y.length;M++){P.index>M?(z=P,P=null):z=P.sibling;var B=d(g,P,y[M],T);if(B===null){P===null&&(P=z);break}t&&P&&B.alternate===null&&e(g,P),p=s(B,p,M),E===null?k=B:E.sibling=B,E=B,P=z}if(M===y.length)return r(g,P),pe&&gn(g,M),k;if(P===null){for(;M<y.length;M++)P=h(g,y[M],T),P!==null&&(p=s(P,p,M),E===null?k=P:E.sibling=P,E=P);return pe&&gn(g,M),k}for(P=n(g,P);M<y.length;M++)z=f(P,g,M,y[M],T),z!==null&&(t&&z.alternate!==null&&P.delete(z.key===null?M:z.key),p=s(z,p,M),E===null?k=z:E.sibling=z,E=z);return t&&P.forEach(function(Y){return e(g,Y)}),pe&&gn(g,M),k}function v(g,p,y,T){var k=Qi(y);if(typeof k!="function")throw Error(A(150));if(y=k.call(y),y==null)throw Error(A(151));for(var E=k=null,P=p,M=p=0,z=null,B=y.next();P!==null&&!B.done;M++,B=y.next()){P.index>M?(z=P,P=null):z=P.sibling;var Y=d(g,P,B.value,T);if(Y===null){P===null&&(P=z);break}t&&P&&Y.alternate===null&&e(g,P),p=s(Y,p,M),E===null?k=Y:E.sibling=Y,E=Y,P=z}if(B.done)return r(g,P),pe&&gn(g,M),k;if(P===null){for(;!B.done;M++,B=y.next())B=h(g,B.value,T),B!==null&&(p=s(B,p,M),E===null?k=B:E.sibling=B,E=B);return pe&&gn(g,M),k}for(P=n(g,P);!B.done;M++,B=y.next())B=f(P,g,M,B.value,T),B!==null&&(t&&B.alternate!==null&&P.delete(B.key===null?M:B.key),p=s(B,p,M),E===null?k=B:E.sibling=B,E=B);return t&&P.forEach(function(te){return e(g,te)}),pe&&gn(g,M),k}function C(g,p,y,T){if(typeof y=="object"&&y!==null&&y.type===Zn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Eo:e:{for(var k=y.key,E=p;E!==null;){if(E.key===k){if(k=y.type,k===Zn){if(E.tag===7){r(g,E.sibling),p=i(E,y.props.children),p.return=g,g=p;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ir&&ig(k)===E.type){r(g,E.sibling),p=i(E,y.props),p.ref=rs(g,E,y),p.return=g,g=p;break e}r(g,E);break}else e(g,E);E=E.sibling}y.type===Zn?(p=kn(y.props.children,g.mode,T,y.key),p.return=g,g=p):(T=Da(y.type,y.key,y.props,null,g.mode,T),T.ref=rs(g,p,y),T.return=g,g=T)}return o(g);case Jn:e:{for(E=y.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){r(g,p.sibling),p=i(p,y.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else e(g,p);p=p.sibling}p=Vc(y,g.mode,T),p.return=g,g=p}return o(g);case Ir:return E=y._init,C(g,p,E(y._payload),T)}if(us(y))return m(g,p,y,T);if(Qi(y))return v(g,p,y,T);Bo(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(r(g,p.sibling),p=i(p,y),p.return=g,g=p):(r(g,p),p=Wc(y,g.mode,T),p.return=g,g=p),o(g)):r(g,p)}return C}var bi=I0(!0),B0=I0(!1),Ga=cn(null),Ka=null,ai=null,Zh=null;function ed(){Zh=ai=Ka=null}function td(t){var e=Ga.current;ge(Ga),t._currentValue=e}function Uu(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function vi(t,e){Ka=t,Zh=ai=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ct=!0),t.firstContext=null)}function Rt(t){var e=t._currentValue;if(Zh!==t)if(t={context:t,memoizedValue:e,next:null},ai===null){if(Ka===null)throw Error(A(308));ai=t,Ka.dependencies={lanes:0,firstContext:t}}else ai=ai.next=t;return e}var Sn=null;function rd(t){Sn===null?Sn=[t]:Sn.push(t)}function N0(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,rd(e)):(r.next=i.next,i.next=r),e.interleaved=r,Er(t,n)}function Er(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Br=!1;function nd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,q&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Er(t,r)}return i=n.interleaved,i===null?(e.next=e,rd(n)):(e.next=i.next,i.next=e),n.interleaved=e,Er(t,r)}function Ta(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Hh(t,r)}}function sg(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function qa(t,e,r,n){var i=t.updateQueue;Br=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((n&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(d=e,f=r,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(f,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,d=typeof m=="function"?m.call(f,h,d):m,d==null)break e;h=Ce({},h,d);break e;case 2:Br=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$n|=o,t.lanes=o,t.memoizedState=h}}function og(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(A(191,i));i.call(n)}}}var to={},ur=cn(to),Ns=cn(to),zs=cn(to);function Cn(t){if(t===to)throw Error(A(174));return t}function id(t,e){switch(ue(zs,e),ue(Ns,t),ue(ur,to),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tu(e,t)}ge(ur),ue(ur,e)}function Ti(){ge(ur),ge(Ns),ge(zs)}function H0(t){Cn(zs.current);var e=Cn(ur.current),r=Tu(e,t.type);e!==r&&(ue(Ns,t),ue(ur,r))}function sd(t){Ns.current===t&&(ge(ur),ge(Ns))}var xe=cn(0);function Qa(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rc=[];function od(){for(var t=0;t<Rc.length;t++)Rc[t]._workInProgressVersionPrimary=null;Rc.length=0}var Oa=Dr.ReactCurrentDispatcher,Ic=Dr.ReactCurrentBatchConfig,jn=0,Se=null,$e=null,Ie=null,Ja=!1,xs=!1,Hs=0,uw=0;function Ue(){throw Error(A(321))}function ad(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Jt(t[r],e[r]))return!1;return!0}function ld(t,e,r,n,i,s){if(jn=s,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oa.current=t===null||t.memoizedState===null?gw:pw,t=r(n,i),xs){s=0;do{if(xs=!1,Hs=0,25<=s)throw Error(A(301));s+=1,Ie=$e=null,e.updateQueue=null,Oa.current=mw,t=r(n,i)}while(xs)}if(Oa.current=Za,e=$e!==null&&$e.next!==null,jn=0,Ie=$e=Se=null,Ja=!1,e)throw Error(A(300));return t}function cd(){var t=Hs!==0;return Hs=0,t}function nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?Se.memoizedState=Ie=t:Ie=Ie.next=t,Ie}function It(){if($e===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ie===null?Se.memoizedState:Ie.next;if(e!==null)Ie=e,$e=t;else{if(t===null)throw Error(A(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ie===null?Se.memoizedState=Ie=t:Ie=Ie.next=t}return Ie}function Ws(t,e){return typeof e=="function"?e(t):e}function Bc(t){var e=It(),r=e.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=t;var n=$e,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((jn&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Se.lanes|=u,$n|=u}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,Jt(n,e.memoizedState)||(ct=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Se.lanes|=s,$n|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Nc(t){var e=It(),r=e.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Jt(s,e.memoizedState)||(ct=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function W0(){}function V0(t,e){var r=Se,n=It(),i=e(),s=!Jt(n.memoizedState,i);if(s&&(n.memoizedState=i,ct=!0),n=n.queue,ud(Y0.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Ie!==null&&Ie.memoizedState.tag&1){if(r.flags|=2048,Vs(9,X0.bind(null,r,n,i,e),void 0,null),Be===null)throw Error(A(349));jn&30||U0(r,e,i)}return i}function U0(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function X0(t,e,r,n){e.value=r,e.getSnapshot=n,G0(e)&&K0(t)}function Y0(t,e,r){return r(function(){G0(e)&&K0(t)})}function G0(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Jt(t,r)}catch{return!0}}function K0(t){var e=Er(t,1);e!==null&&qt(e,t,1,-1)}function ag(t){var e=nr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:t},e.queue=t,t=t.dispatch=fw.bind(null,Se,t),[e.memoizedState,t]}function Vs(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function q0(){return It().memoizedState}function ka(t,e,r,n){var i=nr();Se.flags|=t,i.memoizedState=Vs(1|e,r,void 0,n===void 0?null:n)}function $l(t,e,r,n){var i=It();n=n===void 0?null:n;var s=void 0;if($e!==null){var o=$e.memoizedState;if(s=o.destroy,n!==null&&ad(n,o.deps)){i.memoizedState=Vs(e,r,s,n);return}}Se.flags|=t,i.memoizedState=Vs(1|e,r,s,n)}function lg(t,e){return ka(8390656,8,t,e)}function ud(t,e){return $l(2048,8,t,e)}function Q0(t,e){return $l(4,2,t,e)}function J0(t,e){return $l(4,4,t,e)}function Z0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ev(t,e,r){return r=r!=null?r.concat([t]):null,$l(4,4,Z0.bind(null,e,t),r)}function hd(){}function tv(t,e){var r=It();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ad(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function rv(t,e){var r=It();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ad(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function nv(t,e,r){return jn&21?(Jt(r,e)||(r=l0(),Se.lanes|=r,$n|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ct=!0),t.memoizedState=r)}function hw(t,e){var r=ne;ne=r!==0&&4>r?r:4,t(!0);var n=Ic.transition;Ic.transition={};try{t(!1),e()}finally{ne=r,Ic.transition=n}}function iv(){return It().memoizedState}function dw(t,e,r){var n=Zr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},sv(t))ov(e,r);else if(r=N0(t,e,r,n),r!==null){var i=tt();qt(r,t,n,i),av(r,e,n)}}function fw(t,e,r){var n=Zr(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(sv(t))ov(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Jt(a,o)){var l=e.interleaved;l===null?(i.next=i,rd(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=N0(t,e,i,n),r!==null&&(i=tt(),qt(r,t,n,i),av(r,e,n))}}function sv(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function ov(t,e){xs=Ja=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function av(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Hh(t,r)}}var Za={readContext:Rt,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},gw={readContext:Rt,useCallback:function(t,e){return nr().memoizedState=[t,e===void 0?null:e],t},useContext:Rt,useEffect:lg,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ka(4194308,4,Z0.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ka(4194308,4,t,e)},useInsertionEffect:function(t,e){return ka(4,2,t,e)},useMemo:function(t,e){var r=nr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=nr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=dw.bind(null,Se,t),[n.memoizedState,t]},useRef:function(t){var e=nr();return t={current:t},e.memoizedState=t},useState:ag,useDebugValue:hd,useDeferredValue:function(t){return nr().memoizedState=t},useTransition:function(){var t=ag(!1),e=t[0];return t=hw.bind(null,t[1]),nr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Se,i=nr();if(pe){if(r===void 0)throw Error(A(407));r=r()}else{if(r=e(),Be===null)throw Error(A(349));jn&30||U0(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,lg(Y0.bind(null,n,s,t),[t]),n.flags|=2048,Vs(9,X0.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=nr(),e=Be.identifierPrefix;if(pe){var r=Sr,n=wr;r=(n&~(1<<32-Kt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Hs++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=uw++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pw={readContext:Rt,useCallback:tv,useContext:Rt,useEffect:ud,useImperativeHandle:ev,useInsertionEffect:Q0,useLayoutEffect:J0,useMemo:rv,useReducer:Bc,useRef:q0,useState:function(){return Bc(Ws)},useDebugValue:hd,useDeferredValue:function(t){var e=It();return nv(e,$e.memoizedState,t)},useTransition:function(){var t=Bc(Ws)[0],e=It().memoizedState;return[t,e]},useMutableSource:W0,useSyncExternalStore:V0,useId:iv,unstable_isNewReconciler:!1},mw={readContext:Rt,useCallback:tv,useContext:Rt,useEffect:ud,useImperativeHandle:ev,useInsertionEffect:Q0,useLayoutEffect:J0,useMemo:rv,useReducer:Nc,useRef:q0,useState:function(){return Nc(Ws)},useDebugValue:hd,useDeferredValue:function(t){var e=It();return $e===null?e.memoizedState=t:nv(e,$e.memoizedState,t)},useTransition:function(){var t=Nc(Ws)[0],e=It().memoizedState;return[t,e]},useMutableSource:W0,useSyncExternalStore:V0,useId:iv,unstable_isNewReconciler:!1};function Vt(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Xu(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ce({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ll={isMounted:function(t){return(t=t._reactInternals)?In(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=tt(),i=Zr(t),s=br(n,i);s.payload=e,r!=null&&(s.callback=r),e=Qr(t,s,i),e!==null&&(qt(e,t,i,n),Ta(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=tt(),i=Zr(t),s=br(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Qr(t,s,i),e!==null&&(qt(e,t,i,n),Ta(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=tt(),n=Zr(t),i=br(r,n);i.tag=2,e!=null&&(i.callback=e),e=Qr(t,i,n),e!==null&&(qt(e,t,n,r),Ta(e,t,n))}};function cg(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Fs(r,n)||!Fs(i,s):!0}function lv(t,e,r){var n=!1,i=rn,s=e.contextType;return typeof s=="object"&&s!==null?s=Rt(s):(i=ht(e)?Dn:Ke.current,n=e.contextTypes,s=(n=n!=null)?Si(t,i):rn),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ll,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ug(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ll.enqueueReplaceState(e,e.state,null)}function Yu(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},nd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rt(s):(s=ht(e)?Dn:Ke.current,i.context=Si(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Xu(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ll.enqueueReplaceState(i,i.state,null),qa(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Oi(t,e){try{var r="",n=e;do r+=V_(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function zc(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Gu(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var vw=typeof WeakMap=="function"?WeakMap:Map;function cv(t,e,r){r=br(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){tl||(tl=!0,ih=n),Gu(t,e)},r}function uv(t,e,r){r=br(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Gu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Gu(t,e),typeof n!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function hg(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new vw;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Dw.bind(null,t,e,r),e.then(t,t))}function dg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fg(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=br(-1,1),e.tag=2,Qr(r,e,1))),r.lanes|=1),t)}var yw=Dr.ReactCurrentOwner,ct=!1;function Qe(t,e,r,n){e.child=t===null?B0(e,null,r,n):bi(e,t.child,r,n)}function gg(t,e,r,n,i){r=r.render;var s=e.ref;return vi(e,i),n=ld(t,e,r,n,s,i),r=cd(),t!==null&&!ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(pe&&r&&qh(e),e.flags|=1,Qe(t,e,n,i),e.child)}function pg(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!_d(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,hv(t,e,s,n,i)):(t=Da(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Fs,r(o,n)&&t.ref===e.ref)return Mr(t,e,i)}return e.flags|=1,t=en(s,n),t.ref=e.ref,t.return=e,e.child=t}function hv(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Fs(s,n)&&t.ref===e.ref)if(ct=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(ct=!0);else return e.lanes=t.lanes,Mr(t,e,i)}return Ku(t,e,r,n,i)}function dv(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(ci,yt),yt|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(ci,yt),yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ue(ci,yt),yt|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,ue(ci,yt),yt|=n;return Qe(t,e,i,r),e.child}function fv(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ku(t,e,r,n,i){var s=ht(r)?Dn:Ke.current;return s=Si(e,s),vi(e,i),r=ld(t,e,r,n,s,i),n=cd(),t!==null&&!ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(pe&&n&&qh(e),e.flags|=1,Qe(t,e,r,i),e.child)}function mg(t,e,r,n,i){if(ht(r)){var s=!0;Ua(e)}else s=!1;if(vi(e,i),e.stateNode===null)Ea(t,e),lv(e,r,n),Yu(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Rt(c):(c=ht(r)?Dn:Ke.current,c=Si(e,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&ug(e,o,n,c),Br=!1;var d=e.memoizedState;o.state=d,qa(e,n,o,i),l=e.memoizedState,a!==n||d!==l||ut.current||Br?(typeof u=="function"&&(Xu(e,r,u,n),l=e.memoizedState),(a=Br||cg(e,r,a,n,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,z0(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Vt(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Rt(l):(l=ht(r)?Dn:Ke.current,l=Si(e,l));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&ug(e,o,n,l),Br=!1,d=e.memoizedState,o.state=d,qa(e,n,o,i);var m=e.memoizedState;a!==h||d!==m||ut.current||Br?(typeof f=="function"&&(Xu(e,r,f,n),m=e.memoizedState),(c=Br||cg(e,r,c,n,d,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return qu(t,e,r,n,s,i)}function qu(t,e,r,n,i,s){fv(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&tg(e,r,!1),Mr(t,e,s);n=e.stateNode,yw.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=bi(e,t.child,null,s),e.child=bi(e,null,a,s)):Qe(t,e,a,s),e.memoizedState=n.state,i&&tg(e,r,!0),e.child}function gv(t){var e=t.stateNode;e.pendingContext?eg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&eg(t,e.context,!1),id(t,e.containerInfo)}function vg(t,e,r,n,i){return Ci(),Jh(i),e.flags|=256,Qe(t,e,r,n),e.child}var Qu={dehydrated:null,treeContext:null,retryLane:0};function Ju(t){return{baseLanes:t,cachePool:null,transitions:null}}function pv(t,e,r){var n=e.pendingProps,i=xe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ue(xe,i&1),t===null)return Vu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Il(o,n,0,null),t=kn(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ju(r),e.memoizedState=Qu,t):dd(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return _w(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=en(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=en(a,s):(s=kn(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?Ju(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=Qu,n}return s=t.child,t=s.sibling,n=en(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function dd(t,e){return e=Il({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function No(t,e,r,n){return n!==null&&Jh(n),bi(e,t.child,null,r),t=dd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _w(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=zc(Error(A(422))),No(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Il({mode:"visible",children:n.children},i,0,null),s=kn(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&bi(e,t.child,null,o),e.child.memoizedState=Ju(o),e.memoizedState=Qu,s);if(!(e.mode&1))return No(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(A(419)),n=zc(s,n,void 0),No(t,e,o,n)}if(a=(o&t.childLanes)!==0,ct||a){if(n=Be,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Er(t,i),qt(n,t,i,-1))}return yd(),n=zc(Error(A(421))),No(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Aw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,_t=qr(i.nextSibling),wt=e,pe=!0,Yt=null,t!==null&&(Pt[Dt++]=wr,Pt[Dt++]=Sr,Pt[Dt++]=An,wr=t.id,Sr=t.overflow,An=e),e=dd(e,n.children),e.flags|=4096,e)}function yg(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Uu(t.return,e,r)}function Hc(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function mv(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Qe(t,e,n.children,r),n=xe.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yg(t,r,e);else if(t.tag===19)yg(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ue(xe,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Qa(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Hc(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Qa(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Hc(e,!0,r,null,s);break;case"together":Hc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),$n|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,r=en(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=en(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function xw(t,e,r){switch(e.tag){case 3:gv(e),Ci();break;case 5:H0(e);break;case 1:ht(e.type)&&Ua(e);break;case 4:id(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ue(Ga,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ue(xe,xe.current&1),e.flags|=128,null):r&e.child.childLanes?pv(t,e,r):(ue(xe,xe.current&1),t=Mr(t,e,r),t!==null?t.sibling:null);ue(xe,xe.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return mv(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(xe,xe.current),n)break;return null;case 22:case 23:return e.lanes=0,dv(t,e,r)}return Mr(t,e,r)}var vv,Zu,yv,_v;vv=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Zu=function(){};yv=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Cn(ur.current);var s=null;switch(r){case"input":i=wu(t,i),n=wu(t,n),s=[];break;case"select":i=Ce({},i,{value:void 0}),n=Ce({},n,{value:void 0}),s=[];break;case"textarea":i=bu(t,i),n=bu(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Wa)}Ou(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ms.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ms.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&de("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};_v=function(t,e,r,n){r!==n&&(e.flags|=4)};function ns(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function ww(t,e,r){var n=e.pendingProps;switch(Qh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return ht(e.type)&&Va(),Xe(e),null;case 3:return n=e.stateNode,Ti(),ge(ut),ge(Ke),od(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Io(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yt!==null&&(ah(Yt),Yt=null))),Zu(t,e),Xe(e),null;case 5:sd(e);var i=Cn(zs.current);if(r=e.type,t!==null&&e.stateNode!=null)yv(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(A(166));return Xe(e),null}if(t=Cn(ur.current),Io(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[sr]=e,n[Bs]=s,t=(e.mode&1)!==0,r){case"dialog":de("cancel",n),de("close",n);break;case"iframe":case"object":case"embed":de("load",n);break;case"video":case"audio":for(i=0;i<ds.length;i++)de(ds[i],n);break;case"source":de("error",n);break;case"img":case"image":case"link":de("error",n),de("load",n);break;case"details":de("toggle",n);break;case"input":kf(n,s),de("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},de("invalid",n);break;case"textarea":Mf(n,s),de("invalid",n)}Ou(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ro(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ro(n.textContent,a,t),i=["children",""+a]):Ms.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&de("scroll",n)}switch(r){case"input":Mo(n),Ef(n,s,!0);break;case"textarea":Mo(n),Pf(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Wa)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ym(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[sr]=e,t[Bs]=n,vv(t,e,!1,!1),e.stateNode=t;e:{switch(o=ku(r,n),r){case"dialog":de("cancel",t),de("close",t),i=n;break;case"iframe":case"object":case"embed":de("load",t),i=n;break;case"video":case"audio":for(i=0;i<ds.length;i++)de(ds[i],t);i=n;break;case"source":de("error",t),i=n;break;case"img":case"image":case"link":de("error",t),de("load",t),i=n;break;case"details":de("toggle",t),i=n;break;case"input":kf(t,n),i=wu(t,n),de("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Ce({},n,{value:void 0}),de("invalid",t);break;case"textarea":Mf(t,n),i=bu(t,n),de("invalid",t);break;default:i=n}Ou(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?qm(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Gm(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ps(t,l):typeof l=="number"&&Ps(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ms.hasOwnProperty(s)?l!=null&&s==="onScroll"&&de("scroll",t):l!=null&&Fh(t,s,l,o))}switch(r){case"input":Mo(t),Ef(t,n,!1);break;case"textarea":Mo(t),Pf(t);break;case"option":n.value!=null&&t.setAttribute("value",""+tn(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?fi(t,!!n.multiple,s,!1):n.defaultValue!=null&&fi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Wa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xe(e),null;case 6:if(t&&e.stateNode!=null)_v(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(A(166));if(r=Cn(zs.current),Cn(ur.current),Io(e)){if(n=e.stateNode,r=e.memoizedProps,n[sr]=e,(s=n.nodeValue!==r)&&(t=wt,t!==null))switch(t.tag){case 3:Ro(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ro(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[sr]=e,e.stateNode=n}return Xe(e),null;case 13:if(ge(xe),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&_t!==null&&e.mode&1&&!(e.flags&128))R0(),Ci(),e.flags|=98560,s=!1;else if(s=Io(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(A(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(A(317));s[sr]=e}else Ci(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),s=!1}else Yt!==null&&(ah(Yt),Yt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Le===0&&(Le=3):yd())),e.updateQueue!==null&&(e.flags|=4),Xe(e),null);case 4:return Ti(),Zu(t,e),t===null&&Rs(e.stateNode.containerInfo),Xe(e),null;case 10:return td(e.type._context),Xe(e),null;case 17:return ht(e.type)&&Va(),Xe(e),null;case 19:if(ge(xe),s=e.memoizedState,s===null)return Xe(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)ns(s,!1);else{if(Le!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Qa(t),o!==null){for(e.flags|=128,ns(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ue(xe,xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ee()>ki&&(e.flags|=128,n=!0,ns(s,!1),e.lanes=4194304)}else{if(!n)if(t=Qa(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ns(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!pe)return Xe(e),null}else 2*Ee()-s.renderingStartTime>ki&&r!==1073741824&&(e.flags|=128,n=!0,ns(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ee(),e.sibling=null,r=xe.current,ue(xe,n?r&1|2:r&1),e):(Xe(e),null);case 22:case 23:return vd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?yt&1073741824&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function Sw(t,e){switch(Qh(e),e.tag){case 1:return ht(e.type)&&Va(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ti(),ge(ut),ge(Ke),od(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sd(e),null;case 13:if(ge(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));Ci()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(xe),null;case 4:return Ti(),null;case 10:return td(e.type._context),null;case 22:case 23:return vd(),null;case 24:return null;default:return null}}var zo=!1,Ge=!1,Cw=typeof WeakSet=="function"?WeakSet:Set,I=null;function li(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){be(t,e,n)}else r.current=null}function eh(t,e,r){try{r()}catch(n){be(t,e,n)}}var _g=!1;function bw(t,e){if(Ru=Na,t=b0(),Kh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var f;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===r&&++c===i&&(a=o),d===s&&++u===n&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Iu={focusedElem:t,selectionRange:r},Na=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,C=m.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:Vt(e.type,v),C);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(T){be(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return m=_g,_g=!1,m}function ws(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&eh(e,r,s)}i=i.next}while(i!==n)}}function Fl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function th(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function xv(t){var e=t.alternate;e!==null&&(t.alternate=null,xv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sr],delete e[Bs],delete e[zu],delete e[ow],delete e[aw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wv(t){return t.tag===5||t.tag===3||t.tag===4}function xg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rh(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Wa));else if(n!==4&&(t=t.child,t!==null))for(rh(t,e,r),t=t.sibling;t!==null;)rh(t,e,r),t=t.sibling}function nh(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(nh(t,e,r),t=t.sibling;t!==null;)nh(t,e,r),t=t.sibling}var He=null,Ut=!1;function $r(t,e,r){for(r=r.child;r!==null;)Sv(t,e,r),r=r.sibling}function Sv(t,e,r){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(El,r)}catch{}switch(r.tag){case 5:Ge||li(r,e);case 6:var n=He,i=Ut;He=null,$r(t,e,r),He=n,Ut=i,He!==null&&(Ut?(t=He,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):He.removeChild(r.stateNode));break;case 18:He!==null&&(Ut?(t=He,r=r.stateNode,t.nodeType===8?Lc(t.parentNode,r):t.nodeType===1&&Lc(t,r),$s(t)):Lc(He,r.stateNode));break;case 4:n=He,i=Ut,He=r.stateNode.containerInfo,Ut=!0,$r(t,e,r),He=n,Ut=i;break;case 0:case 11:case 14:case 15:if(!Ge&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&eh(r,e,o),i=i.next}while(i!==n)}$r(t,e,r);break;case 1:if(!Ge&&(li(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){be(r,e,a)}$r(t,e,r);break;case 21:$r(t,e,r);break;case 22:r.mode&1?(Ge=(n=Ge)||r.memoizedState!==null,$r(t,e,r),Ge=n):$r(t,e,r);break;default:$r(t,e,r)}}function wg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Cw),e.forEach(function(n){var i=jw.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function zt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:He=a.stateNode,Ut=!1;break e;case 3:He=a.stateNode.containerInfo,Ut=!0;break e;case 4:He=a.stateNode.containerInfo,Ut=!0;break e}a=a.return}if(He===null)throw Error(A(160));Sv(s,o,i),He=null,Ut=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){be(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Cv(e,t),e=e.sibling}function Cv(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zt(e,t),rr(t),n&4){try{ws(3,t,t.return),Fl(3,t)}catch(v){be(t,t.return,v)}try{ws(5,t,t.return)}catch(v){be(t,t.return,v)}}break;case 1:zt(e,t),rr(t),n&512&&r!==null&&li(r,r.return);break;case 5:if(zt(e,t),rr(t),n&512&&r!==null&&li(r,r.return),t.flags&32){var i=t.stateNode;try{Ps(i,"")}catch(v){be(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Um(i,s),ku(a,o);var c=ku(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?qm(i,h):u==="dangerouslySetInnerHTML"?Gm(i,h):u==="children"?Ps(i,h):Fh(i,u,h,c)}switch(a){case"input":Su(i,s);break;case"textarea":Xm(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?fi(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?fi(i,!!s.multiple,s.defaultValue,!0):fi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Bs]=s}catch(v){be(t,t.return,v)}}break;case 6:if(zt(e,t),rr(t),n&4){if(t.stateNode===null)throw Error(A(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){be(t,t.return,v)}}break;case 3:if(zt(e,t),rr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{$s(e.containerInfo)}catch(v){be(t,t.return,v)}break;case 4:zt(e,t),rr(t);break;case 13:zt(e,t),rr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(pd=Ee())),n&4&&wg(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Ge=(c=Ge)||u,zt(e,t),Ge=c):zt(e,t),rr(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(I=t,u=t.child;u!==null;){for(h=I=u;I!==null;){switch(d=I,f=d.child,d.tag){case 0:case 11:case 14:case 15:ws(4,d,d.return);break;case 1:li(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){be(n,r,v)}}break;case 5:li(d,d.return);break;case 22:if(d.memoizedState!==null){Cg(h);continue}}f!==null?(f.return=d,I=f):Cg(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Km("display",o))}catch(v){be(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){be(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:zt(e,t),rr(t),n&4&&wg(t);break;case 21:break;default:zt(e,t),rr(t)}}function rr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(wv(r)){var n=r;break e}r=r.return}throw Error(A(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ps(i,""),n.flags&=-33);var s=xg(t);nh(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=xg(t);rh(t,a,o);break;default:throw Error(A(161))}}catch(l){be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Tw(t,e,r){I=t,bv(t)}function bv(t,e,r){for(var n=(t.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||zo;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ge;a=zo;var c=Ge;if(zo=o,(Ge=l)&&!c)for(I=i;I!==null;)o=I,l=o.child,o.tag===22&&o.memoizedState!==null?bg(i):l!==null?(l.return=o,I=l):bg(i);for(;s!==null;)I=s,bv(s),s=s.sibling;I=i,zo=a,Ge=c}Sg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):Sg(t)}}function Sg(t){for(;I!==null;){var e=I;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ge||Fl(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ge)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Vt(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&og(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}og(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&$s(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Ge||e.flags&512&&th(e)}catch(d){be(e,e.return,d)}}if(e===t){I=null;break}if(r=e.sibling,r!==null){r.return=e.return,I=r;break}I=e.return}}function Cg(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var r=e.sibling;if(r!==null){r.return=e.return,I=r;break}I=e.return}}function bg(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Fl(4,e)}catch(l){be(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){be(e,i,l)}}var s=e.return;try{th(e)}catch(l){be(e,s,l)}break;case 5:var o=e.return;try{th(e)}catch(l){be(e,o,l)}}}catch(l){be(e,e.return,l)}if(e===t){I=null;break}var a=e.sibling;if(a!==null){a.return=e.return,I=a;break}I=e.return}}var Ow=Math.ceil,el=Dr.ReactCurrentDispatcher,fd=Dr.ReactCurrentOwner,Ft=Dr.ReactCurrentBatchConfig,q=0,Be=null,De=null,We=0,yt=0,ci=cn(0),Le=0,Us=null,$n=0,Rl=0,gd=0,Ss=null,lt=null,pd=0,ki=1/0,yr=null,tl=!1,ih=null,Jr=null,Ho=!1,Vr=null,rl=0,Cs=0,sh=null,Ma=-1,Pa=0;function tt(){return q&6?Ee():Ma!==-1?Ma:Ma=Ee()}function Zr(t){return t.mode&1?q&2&&We!==0?We&-We:cw.transition!==null?(Pa===0&&(Pa=l0()),Pa):(t=ne,t!==0||(t=window.event,t=t===void 0?16:p0(t.type)),t):1}function qt(t,e,r,n){if(50<Cs)throw Cs=0,sh=null,Error(A(185));Js(t,r,n),(!(q&2)||t!==Be)&&(t===Be&&(!(q&2)&&(Rl|=r),Le===4&&zr(t,We)),dt(t,n),r===1&&q===0&&!(e.mode&1)&&(ki=Ee()+500,jl&&un()))}function dt(t,e){var r=t.callbackNode;cx(t,e);var n=Ba(t,t===Be?We:0);if(n===0)r!==null&&jf(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&jf(r),e===1)t.tag===0?lw(Tg.bind(null,t)):$0(Tg.bind(null,t)),iw(function(){!(q&6)&&un()}),r=null;else{switch(c0(n)){case 1:r=zh;break;case 4:r=o0;break;case 16:r=Ia;break;case 536870912:r=a0;break;default:r=Ia}r=Av(r,Tv.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Tv(t,e){if(Ma=-1,Pa=0,q&6)throw Error(A(327));var r=t.callbackNode;if(yi()&&t.callbackNode!==r)return null;var n=Ba(t,t===Be?We:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=nl(t,n);else{e=n;var i=q;q|=2;var s=kv();(Be!==t||We!==e)&&(yr=null,ki=Ee()+500,On(t,e));do try{Mw();break}catch(a){Ov(t,a)}while(!0);ed(),el.current=s,q=i,De!==null?e=0:(Be=null,We=0,e=Le)}if(e!==0){if(e===2&&(i=Au(t),i!==0&&(n=i,e=oh(t,i))),e===1)throw r=Us,On(t,0),zr(t,n),dt(t,Ee()),r;if(e===6)zr(t,n);else{if(i=t.current.alternate,!(n&30)&&!kw(i)&&(e=nl(t,n),e===2&&(s=Au(t),s!==0&&(n=s,e=oh(t,s))),e===1))throw r=Us,On(t,0),zr(t,n),dt(t,Ee()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(A(345));case 2:pn(t,lt,yr);break;case 3:if(zr(t,n),(n&130023424)===n&&(e=pd+500-Ee(),10<e)){if(Ba(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Nu(pn.bind(null,t,lt,yr),e);break}pn(t,lt,yr);break;case 4:if(zr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Kt(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=Ee()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ow(n/1960))-n,10<n){t.timeoutHandle=Nu(pn.bind(null,t,lt,yr),n);break}pn(t,lt,yr);break;case 5:pn(t,lt,yr);break;default:throw Error(A(329))}}}return dt(t,Ee()),t.callbackNode===r?Tv.bind(null,t):null}function oh(t,e){var r=Ss;return t.current.memoizedState.isDehydrated&&(On(t,e).flags|=256),t=nl(t,e),t!==2&&(e=lt,lt=r,e!==null&&ah(e)),t}function ah(t){lt===null?lt=t:lt.push.apply(lt,t)}function kw(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Jt(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zr(t,e){for(e&=~gd,e&=~Rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Kt(e),n=1<<r;t[r]=-1,e&=~n}}function Tg(t){if(q&6)throw Error(A(327));yi();var e=Ba(t,0);if(!(e&1))return dt(t,Ee()),null;var r=nl(t,e);if(t.tag!==0&&r===2){var n=Au(t);n!==0&&(e=n,r=oh(t,n))}if(r===1)throw r=Us,On(t,0),zr(t,e),dt(t,Ee()),r;if(r===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pn(t,lt,yr),dt(t,Ee()),null}function md(t,e){var r=q;q|=1;try{return t(e)}finally{q=r,q===0&&(ki=Ee()+500,jl&&un())}}function Ln(t){Vr!==null&&Vr.tag===0&&!(q&6)&&yi();var e=q;q|=1;var r=Ft.transition,n=ne;try{if(Ft.transition=null,ne=1,t)return t()}finally{ne=n,Ft.transition=r,q=e,!(q&6)&&un()}}function vd(){yt=ci.current,ge(ci)}function On(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,nw(r)),De!==null)for(r=De.return;r!==null;){var n=r;switch(Qh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Va();break;case 3:Ti(),ge(ut),ge(Ke),od();break;case 5:sd(n);break;case 4:Ti();break;case 13:ge(xe);break;case 19:ge(xe);break;case 10:td(n.type._context);break;case 22:case 23:vd()}r=r.return}if(Be=t,De=t=en(t.current,null),We=yt=e,Le=0,Us=null,gd=Rl=$n=0,lt=Ss=null,Sn!==null){for(e=0;e<Sn.length;e++)if(r=Sn[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Sn=null}return t}function Ov(t,e){do{var r=De;try{if(ed(),Oa.current=Za,Ja){for(var n=Se.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ja=!1}if(jn=0,Ie=$e=Se=null,xs=!1,Hs=0,fd.current=null,r===null||r.return===null){Le=1,Us=e,De=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=We,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=dg(o);if(f!==null){f.flags&=-257,fg(f,o,a,s,e),f.mode&1&&hg(s,c,e),e=f,l=c;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){hg(s,c,e),yd();break e}l=Error(A(426))}}else if(pe&&a.mode&1){var C=dg(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),fg(C,o,a,s,e),Jh(Oi(l,a));break e}}s=l=Oi(l,a),Le!==4&&(Le=2),Ss===null?Ss=[s]:Ss.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=cv(s,l,e);sg(s,g);break e;case 1:a=l;var p=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Jr===null||!Jr.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=uv(s,a,e);sg(s,T);break e}}s=s.return}while(s!==null)}Mv(r)}catch(k){e=k,De===r&&r!==null&&(De=r=r.return);continue}break}while(!0)}function kv(){var t=el.current;return el.current=Za,t===null?Za:t}function yd(){(Le===0||Le===3||Le===2)&&(Le=4),Be===null||!($n&268435455)&&!(Rl&268435455)||zr(Be,We)}function nl(t,e){var r=q;q|=2;var n=kv();(Be!==t||We!==e)&&(yr=null,On(t,e));do try{Ew();break}catch(i){Ov(t,i)}while(!0);if(ed(),q=r,el.current=n,De!==null)throw Error(A(261));return Be=null,We=0,Le}function Ew(){for(;De!==null;)Ev(De)}function Mw(){for(;De!==null&&!ex();)Ev(De)}function Ev(t){var e=Dv(t.alternate,t,yt);t.memoizedProps=t.pendingProps,e===null?Mv(t):De=e,fd.current=null}function Mv(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Sw(r,e),r!==null){r.flags&=32767,De=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Le=6,De=null;return}}else if(r=ww(r,e,yt),r!==null){De=r;return}if(e=e.sibling,e!==null){De=e;return}De=e=t}while(e!==null);Le===0&&(Le=5)}function pn(t,e,r){var n=ne,i=Ft.transition;try{Ft.transition=null,ne=1,Pw(t,e,r,n)}finally{Ft.transition=i,ne=n}return null}function Pw(t,e,r,n){do yi();while(Vr!==null);if(q&6)throw Error(A(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(ux(t,s),t===Be&&(De=Be=null,We=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ho||(Ho=!0,Av(Ia,function(){return yi(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Ft.transition,Ft.transition=null;var o=ne;ne=1;var a=q;q|=4,fd.current=null,bw(t,r),Cv(r,t),qx(Iu),Na=!!Ru,Iu=Ru=null,t.current=r,Tw(r),tx(),q=a,ne=o,Ft.transition=s}else t.current=r;if(Ho&&(Ho=!1,Vr=t,rl=i),s=t.pendingLanes,s===0&&(Jr=null),ix(r.stateNode),dt(t,Ee()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(tl)throw tl=!1,t=ih,ih=null,t;return rl&1&&t.tag!==0&&yi(),s=t.pendingLanes,s&1?t===sh?Cs++:(Cs=0,sh=t):Cs=0,un(),null}function yi(){if(Vr!==null){var t=c0(rl),e=Ft.transition,r=ne;try{if(Ft.transition=null,ne=16>t?16:t,Vr===null)var n=!1;else{if(t=Vr,Vr=null,rl=0,q&6)throw Error(A(331));var i=q;for(q|=4,I=t.current;I!==null;){var s=I,o=s.child;if(I.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(I=c;I!==null;){var u=I;switch(u.tag){case 0:case 11:case 15:ws(8,u,s)}var h=u.child;if(h!==null)h.return=u,I=h;else for(;I!==null;){u=I;var d=u.sibling,f=u.return;if(xv(u),u===c){I=null;break}if(d!==null){d.return=f,I=d;break}I=f}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var C=v.sibling;v.sibling=null,v=C}while(v!==null)}}I=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,I=o;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ws(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,I=g;break e}I=s.return}}var p=t.current;for(I=p;I!==null;){o=I;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,I=y;else e:for(o=p;I!==null;){if(a=I,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fl(9,a)}}catch(k){be(a,a.return,k)}if(a===o){I=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,I=T;break e}I=a.return}}if(q=i,un(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(El,t)}catch{}n=!0}return n}finally{ne=r,Ft.transition=e}}return!1}function Og(t,e,r){e=Oi(r,e),e=cv(t,e,1),t=Qr(t,e,1),e=tt(),t!==null&&(Js(t,1,e),dt(t,e))}function be(t,e,r){if(t.tag===3)Og(t,t,r);else for(;e!==null;){if(e.tag===3){Og(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Jr===null||!Jr.has(n))){t=Oi(r,t),t=uv(e,t,1),e=Qr(e,t,1),t=tt(),e!==null&&(Js(e,1,t),dt(e,t));break}}e=e.return}}function Dw(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=tt(),t.pingedLanes|=t.suspendedLanes&r,Be===t&&(We&r)===r&&(Le===4||Le===3&&(We&130023424)===We&&500>Ee()-pd?On(t,0):gd|=r),dt(t,e)}function Pv(t,e){e===0&&(t.mode&1?(e=Ao,Ao<<=1,!(Ao&130023424)&&(Ao=4194304)):e=1);var r=tt();t=Er(t,e),t!==null&&(Js(t,e,r),dt(t,r))}function Aw(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Pv(t,r)}function jw(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(A(314))}n!==null&&n.delete(e),Pv(t,r)}var Dv;Dv=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ut.current)ct=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ct=!1,xw(t,e,r);ct=!!(t.flags&131072)}else ct=!1,pe&&e.flags&1048576&&L0(e,Ya,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ea(t,e),t=e.pendingProps;var i=Si(e,Ke.current);vi(e,r),i=ld(null,e,n,t,i,r);var s=cd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ht(n)?(s=!0,Ua(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,nd(e),i.updater=Ll,e.stateNode=i,i._reactInternals=e,Yu(e,n,t,r),e=qu(null,e,n,!0,s,r)):(e.tag=0,pe&&s&&qh(e),Qe(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ea(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Lw(n),t=Vt(n,t),i){case 0:e=Ku(null,e,n,t,r);break e;case 1:e=mg(null,e,n,t,r);break e;case 11:e=gg(null,e,n,t,r);break e;case 14:e=pg(null,e,n,Vt(n.type,t),r);break e}throw Error(A(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vt(n,i),Ku(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vt(n,i),mg(t,e,n,i,r);case 3:e:{if(gv(e),t===null)throw Error(A(387));n=e.pendingProps,s=e.memoizedState,i=s.element,z0(t,e),qa(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Oi(Error(A(423)),e),e=vg(t,e,n,r,i);break e}else if(n!==i){i=Oi(Error(A(424)),e),e=vg(t,e,n,r,i);break e}else for(_t=qr(e.stateNode.containerInfo.firstChild),wt=e,pe=!0,Yt=null,r=B0(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ci(),n===i){e=Mr(t,e,r);break e}Qe(t,e,n,r)}e=e.child}return e;case 5:return H0(e),t===null&&Vu(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Bu(n,i)?o=null:s!==null&&Bu(n,s)&&(e.flags|=32),fv(t,e),Qe(t,e,o,r),e.child;case 6:return t===null&&Vu(e),null;case 13:return pv(t,e,r);case 4:return id(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=bi(e,null,n,r):Qe(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vt(n,i),gg(t,e,n,i,r);case 7:return Qe(t,e,e.pendingProps,r),e.child;case 8:return Qe(t,e,e.pendingProps.children,r),e.child;case 12:return Qe(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ue(Ga,n._currentValue),n._currentValue=o,s!==null)if(Jt(s.value,o)){if(s.children===i.children&&!ut.current){e=Mr(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=br(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Uu(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(A(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Uu(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qe(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,vi(e,r),i=Rt(i),n=n(i),e.flags|=1,Qe(t,e,n,r),e.child;case 14:return n=e.type,i=Vt(n,e.pendingProps),i=Vt(n.type,i),pg(t,e,n,i,r);case 15:return hv(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vt(n,i),Ea(t,e),e.tag=1,ht(n)?(t=!0,Ua(e)):t=!1,vi(e,r),lv(e,n,i),Yu(e,n,i,r),qu(null,e,n,!0,t,r);case 19:return mv(t,e,r);case 22:return dv(t,e,r)}throw Error(A(156,e.tag))};function Av(t,e){return s0(t,e)}function $w(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(t,e,r,n){return new $w(t,e,r,n)}function _d(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Lw(t){if(typeof t=="function")return _d(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ih)return 11;if(t===Bh)return 14}return 2}function en(t,e){var r=t.alternate;return r===null?(r=$t(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Da(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")_d(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zn:return kn(r.children,i,s,e);case Rh:o=8,i|=8;break;case vu:return t=$t(12,r,e,i|2),t.elementType=vu,t.lanes=s,t;case yu:return t=$t(13,r,e,i),t.elementType=yu,t.lanes=s,t;case _u:return t=$t(19,r,e,i),t.elementType=_u,t.lanes=s,t;case Hm:return Il(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nm:o=10;break e;case zm:o=9;break e;case Ih:o=11;break e;case Bh:o=14;break e;case Ir:o=16,n=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=$t(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function kn(t,e,r,n){return t=$t(7,t,n,e),t.lanes=r,t}function Il(t,e,r,n){return t=$t(22,t,n,e),t.elementType=Hm,t.lanes=r,t.stateNode={isHidden:!1},t}function Wc(t,e,r){return t=$t(6,t,null,e),t.lanes=r,t}function Vc(t,e,r){return e=$t(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Fw(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bc(0),this.expirationTimes=bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bc(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xd(t,e,r,n,i,s,o,a,l){return t=new Fw(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$t(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nd(s),t}function Rw(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function jv(t){if(!t)return rn;t=t._reactInternals;e:{if(In(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var r=t.type;if(ht(r))return j0(t,r,e)}return e}function $v(t,e,r,n,i,s,o,a,l){return t=xd(r,n,!0,t,i,s,o,a,l),t.context=jv(null),r=t.current,n=tt(),i=Zr(r),s=br(n,i),s.callback=e??null,Qr(r,s,i),t.current.lanes=i,Js(t,i,n),dt(t,n),t}function Bl(t,e,r,n){var i=e.current,s=tt(),o=Zr(i);return r=jv(r),e.context===null?e.context=r:e.pendingContext=r,e=br(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Qr(i,e,o),t!==null&&(qt(t,i,o,s),Ta(t,i,o)),o}function il(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function wd(t,e){kg(t,e),(t=t.alternate)&&kg(t,e)}function Iw(){return null}var Lv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sd(t){this._internalRoot=t}Nl.prototype.render=Sd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));Bl(t,e,null,null)};Nl.prototype.unmount=Sd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ln(function(){Bl(null,t,null,null)}),e[kr]=null}};function Nl(t){this._internalRoot=t}Nl.prototype.unstable_scheduleHydration=function(t){if(t){var e=d0();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Nr.length&&e!==0&&e<Nr[r].priority;r++);Nr.splice(r,0,t),r===0&&g0(t)}};function Cd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Eg(){}function Bw(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=il(o);s.call(c)}}var o=$v(e,n,t,0,null,!1,!1,"",Eg);return t._reactRootContainer=o,t[kr]=o.current,Rs(t.nodeType===8?t.parentNode:t),Ln(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=il(l);a.call(c)}}var l=xd(t,0,!1,null,null,!1,!1,"",Eg);return t._reactRootContainer=l,t[kr]=l.current,Rs(t.nodeType===8?t.parentNode:t),Ln(function(){Bl(e,l,r,n)}),l}function Hl(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=il(o);a.call(l)}}Bl(e,o,t,i)}else o=Bw(r,e,t,i,n);return il(o)}u0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=hs(e.pendingLanes);r!==0&&(Hh(e,r|1),dt(e,Ee()),!(q&6)&&(ki=Ee()+500,un()))}break;case 13:Ln(function(){var n=Er(t,1);if(n!==null){var i=tt();qt(n,t,1,i)}}),wd(t,1)}};Wh=function(t){if(t.tag===13){var e=Er(t,134217728);if(e!==null){var r=tt();qt(e,t,134217728,r)}wd(t,134217728)}};h0=function(t){if(t.tag===13){var e=Zr(t),r=Er(t,e);if(r!==null){var n=tt();qt(r,t,e,n)}wd(t,e)}};d0=function(){return ne};f0=function(t,e){var r=ne;try{return ne=t,e()}finally{ne=r}};Mu=function(t,e,r){switch(e){case"input":if(Su(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Al(n);if(!i)throw Error(A(90));Vm(n),Su(n,i)}}}break;case"textarea":Xm(t,r);break;case"select":e=r.value,e!=null&&fi(t,!!r.multiple,e,!1)}};Zm=md;e0=Ln;var Nw={usingClientEntryPoint:!1,Events:[eo,ni,Al,Qm,Jm,md]},is={findFiberByHostInstance:wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zw={bundleType:is.bundleType,version:is.version,rendererPackageName:is.rendererPackageName,rendererConfig:is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=n0(t),t===null?null:t.stateNode},findFiberByHostInstance:is.findFiberByHostInstance||Iw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wo.isDisabled&&Wo.supportsFiber)try{El=Wo.inject(zw),cr=Wo}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nw;bt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cd(e))throw Error(A(200));return Rw(t,e,null,r)};bt.createRoot=function(t,e){if(!Cd(t))throw Error(A(299));var r=!1,n="",i=Lv;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=xd(t,1,!1,null,null,r,!1,n,i),t[kr]=e.current,Rs(t.nodeType===8?t.parentNode:t),new Sd(e)};bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=n0(e),t=t===null?null:t.stateNode,t};bt.flushSync=function(t){return Ln(t)};bt.hydrate=function(t,e,r){if(!zl(e))throw Error(A(200));return Hl(null,t,e,!0,r)};bt.hydrateRoot=function(t,e,r){if(!Cd(t))throw Error(A(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Lv;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=$v(e,null,t,1,r??null,i,!1,s,o),t[kr]=e.current,Rs(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Nl(e)};bt.render=function(t,e,r){if(!zl(e))throw Error(A(200));return Hl(null,t,e,!1,r)};bt.unmountComponentAtNode=function(t){if(!zl(t))throw Error(A(40));return t._reactRootContainer?(Ln(function(){Hl(null,null,t,!1,function(){t._reactRootContainer=null,t[kr]=null})}),!0):!1};bt.unstable_batchedUpdates=md;bt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!zl(r))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Hl(t,e,r,!1,n)};bt.version="18.3.1-next-f1338f8080-20240426";function Fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fv)}catch(t){console.error(t)}}Fv(),Fm.exports=bt;var Hw=Fm.exports,Rv,Mg=Hw;Rv=Mg.createRoot,Mg.hydrateRoot;function S(t,e,r){return(e=function(n){var i=function(s,o){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var l=a.call(s,o||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}(n,"string");return typeof i=="symbol"?i:i+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pg(Object(r),!0).forEach(function(n){S(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pg(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ve(t,e){if(t==null)return{};var r,n,i=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)>=0||{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function gr(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}class Dg{constructor(){S(this,"browserShadowBlurConstant",1),S(this,"DPI",96),S(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),S(this,"perfLimitSizeTotal",2097152),S(this,"maxCacheSideLimit",4096),S(this,"minCacheSideLimit",256),S(this,"disableStyleCopyPaste",!1),S(this,"enableGLFiltering",!0),S(this,"textureSize",4096),S(this,"forceGLPutImageData",!1),S(this,"cachesBoundsOfCurve",!0),S(this,"fontPaths",{}),S(this,"NUM_FRACTION_DIGITS",4)}}const K=new class extends Dg{constructor(t){super(),this.configure(t)}configure(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,t)}addFonts(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=b(b({},this.fontPaths),t)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(t=>{delete this.fontPaths[t]})}clearFonts(){this.fontPaths={}}restoreDefaults(t){const e=new Dg,r=(t==null?void 0:t.reduce((n,i)=>(n[i]=e[i],n),{}))||e;this.configure(r)}},nn=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return console[t]("fabric",...r)};class ar extends Error{constructor(e,r){super("fabric: ".concat(e),r)}}class Iv extends ar{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class Ww{}class Vw extends Ww{testPrecision(e,r){const n="precision ".concat(r,` float;
void main(){}`),i=e.createShader(e.FRAGMENT_SHADER);return!!i&&(e.shaderSource(i,n),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS))}queryWebGL(e){const r=e.getContext("webgl");r&&(this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(r,n)),r.getExtension("WEBGL_lose_context").loseContext(),nn("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const Uw={};let Ag;const fr=()=>Ag||(Ag={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new Vw,dispose(){},copyPasteData:Uw}),Li=()=>fr().document,Wl=()=>fr().window,Bv=()=>{var t;return Math.max((t=K.devicePixelRatio)!==null&&t!==void 0?t:Wl().devicePixelRatio,1)},bs=new class{constructor(){S(this,"charWidthsCache",{}),S(this,"boundsOfCurveCache",{})}getFontCache(t){let{fontFamily:e,fontStyle:r,fontWeight:n}=t;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const i=this.charWidthsCache[e],s="".concat(r.toLowerCase(),"_").concat((n+"").toLowerCase());return i[s]||(i[s]={}),i[s]}clearFontCache(t){(t=(t||"").toLowerCase())?this.charWidthsCache[t]&&delete this.charWidthsCache[t]:this.charWidthsCache={}}limitDimsByArea(t){const{perfLimitSizeTotal:e}=K,r=Math.sqrt(e*t);return[Math.floor(r),Math.floor(e/r)]}},lh="6.4.0";function En(){}const sn=Math.PI/2,Pr=2*Math.PI,bd=Math.PI/180,rt=Object.freeze([1,0,0,1,0,0]),Td=16,Lr=.4477152502,W="center",ee="left",ft="top",ch="bottom",ke="right",gt="none",Od=/\r?\n/,Nv="moving",Vl="scaling",zv="rotating",kd="rotate",Hv="skewing",Xs="resizing",Xw="modifyPoly",Yw="modifyPath",sl="changed",Ul="scale",nt="scaleX",Ct="scaleY",Fi="skewX",Ri="skewY",je="fill",pt="stroke",ol="modified",Yn="json",Uc="svg",R=new class{constructor(){this[Yn]=new Map,this[Uc]=new Map}has(t){return this[Yn].has(t)}getClass(t){const e=this[Yn].get(t);if(!e)throw new ar("No class registered for ".concat(t));return e}setClass(t,e){e?this[Yn].set(e,t):(this[Yn].set(t.type,t),this[Yn].set(t.type.toLowerCase(),t))}getSVGClass(t){return this[Uc].get(t)}setSVGClass(t,e){this[Uc].set(e??t.type.toLowerCase(),t)}},al=new class extends Array{remove(t){const e=this.indexOf(t);e>-1&&this.splice(e,1)}cancelAll(){const t=this.splice(0);return t.forEach(e=>e.abort()),t}cancelByCanvas(t){if(!t)return[];const e=this.filter(r=>{var n;return r.target===t||typeof r.target=="object"&&((n=r.target)===null||n===void 0?void 0:n.canvas)===t});return e.forEach(r=>r.abort()),e}cancelByTarget(t){if(!t)return[];const e=this.filter(r=>r.target===t);return e.forEach(r=>r.abort()),e}};class Gw{constructor(){S(this,"__eventListeners",{})}on(e,r){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(n=>{let[i,s]=n;this.on(i,s)}),()=>this.off(e);if(r){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(r),()=>this.off(n,r)}return()=>!1}once(e,r){if(typeof e=="object"){const n=[];return Object.entries(e).forEach(i=>{let[s,o]=i;n.push(this.once(s,o))}),()=>n.forEach(i=>i())}if(r){const n=this.on(e,function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];r.call(this,...s),n()});return n}return()=>!1}_removeEventListener(e,r){if(this.__eventListeners[e])if(r){const n=this.__eventListeners[e],i=n.indexOf(r);i>-1&&n.splice(i,1)}else this.__eventListeners[e]=[]}off(e,r){if(this.__eventListeners)if(e===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach(n=>{let[i,s]=n;this._removeEventListener(i,s)}):this._removeEventListener(e,r)}fire(e,r){var n;if(!this.__eventListeners)return;const i=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(i)for(let s=0;s<i.length;s++)i[s].call(this,r||{})}}const vn=(t,e)=>{const r=t.indexOf(e);return r!==-1&&t.splice(r,1),t},Zt=t=>{if(t===0)return 1;switch(Math.abs(t)/sn){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},er=t=>{if(t===0)return 0;const e=t/sn,r=Math.sign(t);switch(e){case 1:return r;case 2:return 0;case 3:return-r}return Math.sin(t)};class O{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=r)}add(e){return new O(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new O(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new O(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new O(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new O(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new O(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new O(this.x/e.x,this.y/e.y)}scalarDivide(e){return new O(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return r=Math.max(Math.min(1,r),0),new O(this.x+(e.x-this.x)*r,this.y+(e.y-this.y)*r)}distanceFrom(e){const r=this.x-e.x,n=this.y-e.y;return Math.sqrt(r*r+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new O(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new O(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,r){return this.x=e,this.y=r,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const r=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=r,e.y=n}clone(){return new O(this.x,this.y)}rotate(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ed;const n=er(e),i=Zt(e),s=this.subtract(r);return new O(s.x*i-s.y*n,s.x*n+s.y*i).add(r)}transform(e){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new O(e[0]*this.x+e[2]*this.y+(r?0:e[4]),e[1]*this.x+e[3]*this.y+(r?0:e[5]))}}const Ed=new O(0,0),Aa=t=>!!t&&Array.isArray(t._objects);function Wv(t){class e extends t{constructor(){super(...arguments),S(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];const o=this._objects.push(...i);return i.forEach(a=>this._onObjectAdded(a)),o}insertAt(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return this._objects.splice(n,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const n=this._objects,i=[];for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return o.forEach(l=>{const c=n.indexOf(l);c!==-1&&(n.splice(c,1),i.push(l),this._onObjectRemoved(l))}),i}forEachObject(n){this.getObjects().forEach((i,s,o)=>n(i,s,o))}getObjects(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return i.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...i))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,i){return!!this._objects.includes(n)||!!i&&this._objects.some(s=>s instanceof e&&s.contains(n,!0))}complexity(){return this._objects.reduce((n,i)=>n+=i.complexity?i.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(vn(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(vn(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,i){if(!n)return!1;const s=this._objects.indexOf(n);if(s!==0){const o=this.findNewLowerIndex(n,s,i);return vn(this._objects,n),this._objects.splice(o,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,i){if(!n)return!1;const s=this._objects.indexOf(n);if(s!==this._objects.length-1){const o=this.findNewUpperIndex(n,s,i);return vn(this._objects,n),this._objects.splice(o,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,i){return n!==this._objects[i]&&(vn(this._objects,n),this._objects.splice(i,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,i,s){let o;if(s){o=i;for(let a=i-1;a>=0;--a)if(n.isOverlapping(this._objects[a])){o=a;break}}else o=i-1;return o}findNewUpperIndex(n,i,s){let o;if(s){o=i;for(let a=i+1;a<this._objects.length;++a)if(n.isOverlapping(this._objects[a])){o=a;break}}else o=i+1;return o}collectObjects(n){let{left:i,top:s,width:o,height:a}=n,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new O(i,s),h=u.add(new O(o,a));for(let d=this._objects.length-1;d>=0;d--){const f=this._objects[d];f.selectable&&f.visible&&(l&&f.intersectsWithRect(u,h)||f.isContainedWithinRect(u,h)||l&&f.containsPoint(u)||l&&f.containsPoint(h))&&c.push(f)}return c}}return e}class Vv extends Gw{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const r in e)this.set(r,e[r])}_setObject(e){for(const r in e)this._set(r,e[r])}set(e,r){return typeof e=="object"?this._setObject(e):this._set(e,r),this}_set(e,r){this[e]=r}toggle(e){const r=this.get(e);return typeof r=="boolean"&&this.set(e,!r),this}get(e){return this[e]}}function Ts(t){return Wl().requestAnimationFrame(t)}function Uv(t){return Wl().cancelAnimationFrame(t)}let Kw=0;const on=()=>Kw++,Me=()=>{const t=Li().createElement("canvas");if(!t||t.getContext===void 0)throw new ar("Failed to create `canvas` element");return t},Xv=()=>Li().createElement("img"),Md=(t,e,r)=>t.toDataURL("image/".concat(e),r),Te=t=>t*bd,an=t=>t/bd,Yv=t=>t.every((e,r)=>e===rt[r]),Ye=(t,e,r)=>new O(t).transform(e,r),xt=t=>{const e=1/(t[0]*t[3]-t[1]*t[2]),r=[e*t[3],-e*t[1],-e*t[2],e*t[0],0,0],{x:n,y:i}=new O(t[4],t[5]).transform(r,!0);return r[4]=-n,r[5]=-i,r},Ae=(t,e,r)=>[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],r?0:t[0]*e[4]+t[2]*e[5]+t[4],r?0:t[1]*e[4]+t[3]*e[5]+t[5]],Xl=(t,e)=>t.reduceRight((r,n)=>n&&r?Ae(n,r,e):n||r,void 0)||rt.concat(),Gv=t=>{let[e,r]=t;return Math.atan2(r,e)},Ei=t=>{const e=Gv(t),r=Math.pow(t[0],2)+Math.pow(t[1],2),n=Math.sqrt(r),i=(t[0]*t[3]-t[2]*t[1])/n,s=Math.atan2(t[0]*t[2]+t[1]*t[3],r);return{angle:an(e),scaleX:n,scaleY:i,skewX:an(s),skewY:0,translateX:t[4]||0,translateY:t[5]||0}},Ii=function(t){return[1,0,0,1,t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Bi(){let{angle:t=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:r=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=Te(t),i=Zt(n),s=er(n);return[i,s,-s,i,e?e-(i*e-s*r):0,r?r-(s*e+i*r):0]}const Yl=function(t){return[t,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,0,0]},Kv=t=>Math.tan(Te(t)),Pd=t=>[1,0,Kv(t),1,0,0],Dd=t=>[1,Kv(t),0,1,0,0],ro=t=>{let{scaleX:e=1,scaleY:r=1,flipX:n=!1,flipY:i=!1,skewX:s=0,skewY:o=0}=t,a=Yl(n?-e:e,i?-r:r);return s&&(a=Ae(a,Pd(s),!0)),o&&(a=Ae(a,Dd(o),!0)),a},qv=t=>{const{translateX:e=0,translateY:r=0,angle:n=0}=t;let i=Ii(e,r);n&&(i=Ae(i,Bi({angle:n})));const s=ro(t);return Yv(s)||(i=Ae(i,s)),i},Os=function(t){let{signal:e,crossOrigin:r=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,i){if(e&&e.aborted)return i(new Iv("loadImage"));const s=Xv();let o;e&&(o=function(l){s.src="",i(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){s.onload=s.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),n(s)};t?(s.onload=a,s.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),i(new ar("Error loading ".concat(s.src)))},r&&(s.crossOrigin=r),s.src=t):a()})},Mi=function(t){let{signal:e,reviver:r=En}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,i)=>{const s=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(t.map(o=>R.getClass(o.type).fromObject(o,{signal:e}).then(a=>(r(o,a),s.push(a),a)))).then(n).catch(o=>{s.forEach(a=>{a.dispose&&a.dispose()}),i(o)}).finally(()=>{e&&e.removeEventListener("abort",i)})})},no=function(t){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,n)=>{const i=[];e&&e.addEventListener("abort",n,{once:!0});const s=Object.values(t).map(a=>a&&a.type&&R.has(a.type)?Mi([a],{signal:e}).then(l=>{let[c]=l;return i.push(c),c}):a),o=Object.keys(t);Promise.all(s).then(a=>a.reduce((l,c,u)=>(l[o[u]]=c,l),{})).then(r).catch(a=>{i.forEach(l=>{l.dispose&&l.dispose()}),n(a)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},Bn=function(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,r)=>(r in t&&(e[r]=t[r]),e),{})},Ad=(t,e)=>Object.keys(t).reduce((r,n)=>(e(t[n],n,t)&&(r[n]=t[n]),r),{}),jg={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Xc=(t,e,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t),$g=(t,e,r,n)=>{t/=255,e/=255,r/=255;const i=Math.max(t,e,r),s=Math.min(t,e,r);let o,a;const l=(i+s)/2;if(i===s)o=a=0;else{const c=i-s;switch(a=l>.5?c/(2-i-s):c/(i+s),i){case t:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-t)/c+2;break;case r:o=(t-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),n]},Lg=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(t)/(t.endsWith("%")?100:1)},Vo=t=>Math.min(Math.round(t),255).toString(16).toUpperCase().padStart(2,"0"),Fg=t=>{let[e,r,n,i=1]=t;const s=Math.round(.3*e+.59*r+.11*n);return[s,s,s,i]};class Z{constructor(e){if(S(this,"isUnrecognised",!1),e)if(e instanceof Z)this.setSource([...e._source]);else if(Array.isArray(e)){const[r,n,i,s=1]=e;this.setSource([r,n,i,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return e in jg&&(e=jg[e]),e==="transparent"?[255,255,255,0]:Z.sourceFromHex(e)||Z.sourceFromRgb(e)||Z.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,r,n]=this.getSource();return"rgb(".concat(e,",").concat(r,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,r,n]=$g(...this.getSource());return"hsl(".concat(e,",").concat(r,"%,").concat(n,"%)")}toHsla(){const[e,r,n,i]=$g(...this.getSource());return"hsla(".concat(e,",").concat(r,"%,").concat(n,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,r,n,i]=this.getSource();return"".concat(Vo(e)).concat(Vo(r)).concat(Vo(n)).concat(Vo(Math.round(255*i)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Fg(this.getSource())),this}toBlackWhite(e){const[r,,,n]=Fg(this.getSource()),i=r<(e||127)?0:255;return this.setSource([i,i,i,n]),this}overlayWith(e){e instanceof Z||(e=new Z(e));const r=this.getSource(),n=e.getSource(),[i,s,o]=r.map((a,l)=>Math.round(.5*a+.5*n[l]));return this.setSource([i,s,o,r[3]]),this}static fromRgb(e){return Z.fromRgba(e)}static fromRgba(e){return new Z(Z.sourceFromRgb(e))}static sourceFromRgb(e){const r=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(r){const[n,i,s]=r.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[n,i,s,Lg(r[4])]}}static fromHsl(e){return Z.fromHsla(e)}static fromHsla(e){return new Z(Z.sourceFromHsl(e))}static sourceFromHsl(e){const r=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!r)return;const n=(Z.parseAngletoDegrees(r[1])%360+360)%360/360,i=parseFloat(r[2])/100,s=parseFloat(r[3])/100;let o,a,l;if(i===0)o=a=l=s;else{const c=s<=.5?s*(i+1):s+i-s*i,u=2*s-c;o=Xc(u,c,n+1/3),a=Xc(u,c,n),l=Xc(u,c,n-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),Lg(r[4])]}static fromHex(e){return new Z(Z.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const r=e.slice(e.indexOf("#")+1);let n;n=r.length<=4?r.split("").map(l=>l+l):r.match(/.{2}/g);const[i,s,o,a=255]=n.map(l=>parseInt(l,16));return[i,s,o,a/255]}}static parseAngletoDegrees(e){const r=e.toLowerCase(),n=parseFloat(r);return r.includes("rad")?an(n):r.includes("turn")?360*n:n}}const me=(t,e)=>parseFloat(Number(t).toFixed(e)),Mn=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Td;const r=/\D{0,2}$/.exec(t),n=parseFloat(t),i=K.DPI;switch(r==null?void 0:r[0]){case"mm":return n*i/25.4;case"cm":return n*i/2.54;case"in":return n*i;case"pt":return n*i/72;case"pc":return n*i/72*12;case"em":return n*e;default:return n}},Qv=t=>{const[e,r]=t.trim().split(" "),[n,i]=(s=e)&&s!==gt?[s.slice(1,4),s.slice(5,8)]:s===gt?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:r||"meet",alignX:n,alignY:i}},Ys=t=>"matrix("+t.map(e=>me(e,K.NUM_FRACTION_DIGITS)).join(" ")+")",Gs=function(t,e){let r,n,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)r="url(#SVGID_".concat(e.id,")");else{const s=new Z(e),o=s.getAlpha();r=s.toRgb(),o!==1&&(n=o.toString())}else r="none";return i?"".concat(t,": ").concat(r,"; ").concat(n?"".concat(t,"-opacity: ").concat(n,"; "):""):"".concat(t,'="').concat(r,'" ').concat(n?"".concat(t,'-opacity="').concat(n,'" '):"")},jt=t=>!!t&&t.toLive!==void 0,Rg=t=>!!t&&typeof t.toObject=="function",Ig=t=>!!t&&t.offsetX!==void 0&&"source"in t,Jv=t=>!!t&&typeof t._renderText=="function",yn=t=>!!t&&"multiSelectionStacking"in t;function Zv(t){const e=t&&Gt(t);let r=0,n=0;if(!t||!e)return{left:r,top:n};let i=t;const s=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===e?(r=o.scrollLeft||s.scrollLeft||0,n=o.scrollTop||s.scrollTop||0):(r+=i.scrollLeft||0,n+=i.scrollTop||0),i.nodeType!==1||i.style.position!=="fixed"););return{left:r,top:n}}const Gt=t=>t.ownerDocument||null,e1=t=>{var e;return((e=t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},t1=function(t,e,r){let{width:n,height:i}=r,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;t.width=n,t.height=i,s>1&&(t.setAttribute("width",(n*s).toString()),t.setAttribute("height",(i*s).toString()),e.scale(s,s))},uh=(t,e)=>{let{width:r,height:n}=e;r&&(t.style.width=typeof r=="number"?"".concat(r,"px"):r),n&&(t.style.height=typeof n=="number"?"".concat(n,"px"):n)};function Bg(t){return t.onselectstart!==void 0&&(t.onselectstart=()=>!1),t.style.userSelect=gt,t}class r1{constructor(e){S(this,"_originalCanvasStyle",void 0),S(this,"lower",void 0);const r=this.createLowerCanvas(e);this.lower={el:r,ctx:r.getContext("2d")}}createLowerCanvas(e){const r=(n=e)&&n.getContext!==void 0?e:e&&Li().getElementById(e)||Me();var n;if(r.hasAttribute("data-fabric"))throw new ar("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=r.style.cssText,r.setAttribute("data-fabric","main"),r.classList.add("lower-canvas"),r}cleanupDOM(e){let{width:r,height:n}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(r)),i.setAttribute("height","".concat(n)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,r){const{el:n,ctx:i}=this.lower;t1(n,i,e,r)}setCSSDimensions(e){uh(this.lower.el,e)}calcOffset(){return function(e){var r;const n=e&&Gt(e),i={left:0,top:0};if(!n)return i;const s=((r=e1(e))===null||r===void 0?void 0:r.getComputedStyle(e,null))||{};i.left+=parseInt(s.borderLeftWidth,10)||0,i.top+=parseInt(s.borderTopWidth,10)||0,i.left+=parseInt(s.paddingLeft,10)||0,i.top+=parseInt(s.paddingTop,10)||0;let o={left:0,top:0};const a=n.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=Zv(e);return{left:o.left+l.left-(a.clientLeft||0)+i.left,top:o.top+l.top-(a.clientTop||0)+i.top}}(this.lower.el)}dispose(){fr().dispose(this.lower.el),delete this.lower}}const qw={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...rt]};class io extends Wv(Vv){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return io.ownDefaults}constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(r),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new r1(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];const s=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(nn("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Bv():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,r){return this.setDimensions({width:e},r)}setHeight(e,r){return this.setDimensions({height:e},r)}_setDimensionsImpl(e){let{cssOnly:r=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!r){const i=b({width:this.width,height:this.height},e);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,r){this._setDimensionsImpl(e,r),r&&r.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,r){const n=e,i=[...this.viewportTransform],s=Ye(e,xt(i));i[0]=r,i[3]=r;const o=Ye(s,i);i[4]+=n.x-o.x,i[5]+=n.y-o.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new O(0,0),e)}absolutePan(e){const r=[...this.viewportTransform];return r[4]=-e.x,r[5]=-e.y,this.setViewportTransform(r)}relativePan(e){return this.absolutePan(new O(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Ts(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,r=this.height,n=xt(this.viewportTransform),i=Ye({x:0,y:0},n),s=Ye({x:e,y:r},n),o=i.min(s),a=i.max(s);return this.vptCoords={tl:o,tr:new O(a.x,o.y),bl:new O(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(Uv(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,r){if(this.destroyed)return;const n=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,r),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,r){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",r.transform(e),e.scale(1/r.zoomX,1/r.zoomY),e.drawImage(r._cacheCanvas,-r.cacheTranslationX,-r.cacheTranslationY),e.restore()}_renderObjects(e,r){for(let n=0,i=r.length;n<i;++n)r[n]&&r[n].render(e)}_renderBackgroundOrOverlay(e,r){const n=this["".concat(r,"Color")],i=this["".concat(r,"Image")],s=this.viewportTransform,o=this["".concat(r,"Vpt")];if(!n&&!i)return;const a=jt(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?n.toLive(e):n,o&&e.transform(...s),a){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const l=n.gradientTransform||n.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...s),i.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new O(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new O(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new O(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new O(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new O(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Ye(this.getCenterPoint(),xt(this.viewportTransform))}_centerObject(e,r){e.setXY(r,W,W),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,r){const n=this.clipPath,i=n&&!n.excludeFromExport?this._toObject(n,e,r):null;return b(b(b({version:lh},Bn(this,r)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,r))},this.__serializeBgOverlay(e,r)),i?{clipPath:i}:null)}_toObject(e,r,n){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[r](n);return this.includeDefaultValues||(e.includeDefaultValues=!!i),s}__serializeBgOverlay(e,r){const n={},i=this.backgroundImage,s=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return jt(o)?o.excludeFromExport||(n.background=o.toObject(r)):o&&(n.background=o),jt(a)?a.excludeFromExport||(n.overlay=a.toObject(r)):a&&(n.overlay=a),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,e,r)),s&&!s.excludeFromExport&&(n.overlayImage=this._toObject(s,e,r)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;e.reviver=r;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",r),this._setSVGObjects(n,r),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",r),n.push("</svg>"),n.join("")}_setSVGPreamble(e,r){r.suppressPreamble||e.push('<?xml version="1.0" encoding="',r.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,r){const n=r.width||"".concat(this.width),i=r.height||"".concat(this.height),s=K.NUM_FRACTION_DIGITS,o=r.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(me(-l[4]/l[0],s)," ").concat(me(-l[5]/l[3],s)," ").concat(me(this.width/l[0],s)," ").concat(me(this.height/l[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',i,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",lh,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(r),`</defs>
`)}createSVGClipPathMarkup(e){const r=this.clipPath;return r?(r.clipPathId="CLIPPATH_".concat(on()),'<clipPath id="'.concat(r.clipPathId,`" >
`).concat(r.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const r=this["".concat(e,"Color")];if(jt(r)){const n=this["".concat(e,"Vpt")],i=this.viewportTransform,s={isType:()=>!1,width:this.width/(n?i[0]:1),height:this.height/(n?i[3]:1)};return r.toSVG(s,{additionalTransform:n?Ys(i):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],r={},n=K.fontPaths;this._objects.forEach(function s(o){e.push(o),Aa(o)&&o._objects.forEach(s)}),e.forEach(s=>{if(!Jv(s))return;const{styles:o,fontFamily:a}=s;!r[a]&&n[a]&&(r[a]=!0,o&&Object.values(o).forEach(l=>{Object.values(l).forEach(c=>{let{fontFamily:u=""}=c;!r[u]&&n[u]&&(r[u]=!0)})}))});const i=Object.keys(r).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(n[s],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(e,r){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,r)})}_setSVGObject(e,r,n){e.push(r.toSVG(n))}_setSVGBgOverlayImage(e,r,n){const i=this[r];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(n))}_setSVGBgOverlayColor(e,r){const n=this["".concat(r,"Color")];if(n)if(jt(n)){const i=n.repeat||"",s=this.width,o=this.height,a=this["".concat(r,"Vpt")]?Ys(xt(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(o/2,')" x="').concat(n.offsetX-s/2,'" y="').concat(n.offsetY-o/2,'" width="').concat(i!=="repeat-y"&&i!=="no-repeat"||!Ig(n)?s:n.source.width,'" height="').concat(i!=="repeat-x"&&i!=="no-repeat"||!Ig(n)?o:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,r){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new ar("`json` is undefined"));const i=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:u}=i,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Mi(s,{reviver:r,signal:n}),no({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:u},{signal:n})]).then(d=>{let[f,m]=d;return this.clear(),this.add(...f),this.set(i),this.set(m),this.renderOnAddRemove=h,this})}clone(e){const r=this.toObject(e);return this.cloneWithoutData().loadFromJSON(r)}cloneWithoutData(){const e=Me();return e.width=this.width,e.height=this.height,new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:r="png",quality:n=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return Md(this.toCanvasElement(o,e),r,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:r,height:n,left:i,top:s,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(r||this.width)*e,l=(n||this.height)*e,c=this.getZoom(),u=this.width,h=this.height,d=this.skipControlsDrawing,f=c*e,m=this.viewportTransform,v=[f,0,0,f,(m[4]-(i||0))*e,(m[5]-(s||0))*e],C=this.enableRetinaScaling,g=Me(),p=o?this._objects.filter(y=>o(y)):this._objects;return g.width=a,g.height=l,this.enableRetinaScaling=!1,this.viewportTransform=v,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),p),this.viewportTransform=m,this.width=u,this.height=h,this.calcViewportBoundaries(),this.enableRetinaScaling=C,this.skipControlsDrawing=d,g}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),al.cancelByCanvas(this),this.disposed=!0,new Promise((e,r)=>{const n=()=>{this.destroy(),e(!0)};n.kill=r,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}S(io,"ownDefaults",qw);const Qw=["touchstart","touchmove","touchend"],n1=t=>{const e=Zv(t.target),r=function(n){const i=n.changedTouches;return i&&i[0]?i[0]:n}(t);return new O(r.clientX+e.left,r.clientY+e.top)},ll=t=>Qw.includes(t.type)||t.pointerType==="touch",hh=t=>{t.preventDefault(),t.stopPropagation()},hr=t=>{if(t.length===0)return{left:0,top:0,width:0,height:0};const{min:e,max:r}=t.reduce((i,s)=>{let{min:o,max:a}=i;return{min:o.min(s),max:a.max(s)}},{min:new O(t[0]),max:new O(t[0])}),n=r.subtract(e);return{left:e.x,top:e.y,width:n.x,height:n.y}},Jw=["translateX","translateY","scaleX","scaleY"],i1=(t,e)=>Pi(t,Ae(e,t.calcOwnMatrix())),Pi=(t,e)=>{const r=Ei(e),{translateX:n,translateY:i,scaleX:s,scaleY:o}=r,a=ve(r,Jw),l=new O(n,i);t.flipX=!1,t.flipY=!1,Object.assign(t,a),t.set({scaleX:s,scaleY:o}),t.setPositionByOrigin(l,W,W)},s1=t=>{t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},jd=t=>({scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}),Gl=(t,e,r)=>{const n=t/2,i=e/2,s=[new O(-n,-i),new O(n,-i),new O(-n,i),new O(n,i)].map(a=>a.transform(r)),o=hr(s);return new O(o.width,o.height)},so=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rt;return Ae(xt(arguments.length>1&&arguments[1]!==void 0?arguments[1]:rt),t)},Pn=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rt,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rt;return t.transform(so(e,r))},o1=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rt,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rt;return t.transform(so(e,r),!0)},dh=(t,e,r)=>{const n=so(e,r);return Pi(t,Ae(n,t.calcOwnMatrix())),n},a1=(t,e)=>{var r;const{transform:{target:n}}=e;(r=n.canvas)===null||r===void 0||r.fire("object:".concat(t),b(b({},e),{},{target:n})),n.fire(t,e)},Zw={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Pe=t=>typeof t=="string"?Zw[t]:t-.5,cl="not-allowed";function l1(t){return Pe(t.originX)===Pe(W)&&Pe(t.originY)===Pe(W)}function Ng(t){return .5-Pe(t)}const Qt=(t,e)=>t[e],c1=(t,e,r,n)=>({e:t,transform:e,pointer:new O(r,n)});function u1(t,e){const r=t.getTotalAngle()+an(Math.atan2(e.y,e.x))+360;return Math.round(r%360/45)}function $d(t,e,r,n,i){var s;let{target:o,corner:a}=t;const l=o.controls[a],c=((s=o.canvas)===null||s===void 0?void 0:s.getZoom())||1,u=o.padding/c,h=function(d,f,m,v){const C=d.getRelativeCenterPoint(),g=m!==void 0&&v!==void 0?d.translateToGivenOrigin(C,W,W,m,v):new O(d.left,d.top);return(d.angle?f.rotate(-Te(d.angle),C):f).subtract(g)}(o,new O(n,i),e,r);return h.x>=u&&(h.x-=u),h.x<=-u&&(h.x+=u),h.y>=u&&(h.y-=u),h.y<=u&&(h.y+=u),h.x-=l.offsetX,h.y-=l.offsetY,h}const eS=(t,e,r,n)=>{const{target:i,offsetX:s,offsetY:o}=e,a=r-s,l=n-o,c=!Qt(i,"lockMovementX")&&i.left!==a,u=!Qt(i,"lockMovementY")&&i.top!==l;return c&&i.set(ee,a),u&&i.set(ft,l),(c||u)&&a1(Nv,c1(t,e,r,n)),c||u};class h1{getSvgStyles(e){const r=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):gt,s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=Gs(je,this.fill);return[Gs(pt,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",r,"; ","opacity: ",c,";",h,u].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(Ys(n));return"".concat(i).concat(r,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:r,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=i,r?r(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:r,reviver:n,withShadow:i,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=r?"":'style="'.concat(this.getSvgStyles(),'" '),a=i?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,h=this.stroke,d=this.fill,f=this.shadow,m=[],v=e.indexOf("COMMON_PARTS");let C;l&&(l.clipPathId="CLIPPATH_".concat(on()),C='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(n),`</clipPath>
`)),u&&m.push("<g ",a,this.getSvgCommons(),` >
`),m.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const g=[o,c,r?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[v]=g,jt(d)&&m.push(d.toSVG(this)),jt(h)&&m.push(h.toSVG(this)),f&&m.push(f.toSVG(this)),l&&m.push(C),m.push(e.join("")),m.push(`</g>
`),u&&m.push(`</g>
`),n?n(m.join("")):m.join("")}addPaintOrder(){return this.paintFirst!==je?' paint-order="'.concat(this.paintFirst,'" '):""}}function Kl(t){return new RegExp("^("+t.join("|")+")\\b","i")}var zg,Hg;const Di=String.raw(zg||(zg=gr(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"])));String.raw(Hg||(Hg=gr(["(?:s+,?s*|,s*|$)"],["(?:\\s+,?\\s*|,\\s*|$)"])));const tS=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Di+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Di+"))?\\s+(.*)"),rS={cx:ee,x:ee,r:"radius",cy:ft,y:ft,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Yc="font-size",Gc="clip-path";Kl(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Kl(["symbol","image","marker","pattern","view","svg"]);const Wg=Kl(["symbol","g","a","svg","clipPath","defs"]),nS=new O(1,0),d1=new O,Ld=(t,e)=>t.rotate(e),ul=(t,e)=>new O(e).subtract(t),hl=t=>t.distanceFrom(d1),dl=(t,e)=>Math.atan2(_i(t,e),g1(t,e)),f1=t=>dl(nS,t),ql=t=>t.eq(d1)?t:t.scalarDivide(hl(t)),Fd=function(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return ql(new O(-t.y,t.x).scalarMultiply(e?1:-1))},_i=(t,e)=>t.x*e.y-t.y*e.x,g1=(t,e)=>t.x*e.x+t.y*e.y,fh=(t,e,r)=>{if(t.eq(e)||t.eq(r))return!0;const n=_i(e,r),i=_i(e,t),s=_i(r,t);return n>=0?i>=0&&s<=0:!(i<=0&&s>=0)},Vg="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Ug=new RegExp("(?:\\s|^)"+Vg+Vg+"("+Di+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class dr{constructor(e){const r=typeof e=="string"?dr.parseShadow(e):e;Object.assign(this,dr.ownDefaults,r),this.id=on()}static parseShadow(e){const r=e.trim(),[,n=0,i=0,s=0]=(Ug.exec(r)||[]).map(o=>parseFloat(o)||0);return{color:(r.replace(Ug,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:i,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const r=Ld(new O(this.offsetX,this.offsetY),Te(-e.angle)),n=new Z(this.color);let i=40,s=40;return e.width&&e.height&&(i=100*me((Math.abs(r.x)+this.blur)/e.width,K.NUM_FRACTION_DIGITS)+20,s=100*me((Math.abs(r.y)+this.blur)/e.height,K.NUM_FRACTION_DIGITS)+20),e.flipX&&(r.x*=-1),e.flipY&&(r.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(i,'%" width="').concat(100+2*i,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(me(this.blur?this.blur/2:0,K.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(me(r.x,K.NUM_FRACTION_DIGITS),'" dy="').concat(me(r.y,K.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},r=dr.ownDefaults;return this.includeDefaultValues?e:Ad(e,(n,i)=>n!==r[i])}static async fromObject(e){return new this(e)}}S(dr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),S(dr,"type","shadow"),R.setClass(dr,"shadow");const Fn=(t,e,r)=>Math.max(t,Math.min(e,r)),iS=[ft,ee,nt,Ct,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Fi,Ri],Ar=[je,pt,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],sS={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:ee,originY:ft,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:je,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Kc=(t,e,r,n)=>(t<Math.abs(e)?(t=e,n=r/4):n=e===0&&t===0?r/Pr*Math.asin(1):r/Pr*Math.asin(e/t),{a:t,c:e,p:r,s:n}),Xg=(t,e,r,n,i)=>t*Math.pow(2,10*(n-=1))*Math.sin((n*i-e)*Pr/r),p1=(t,e,r,n)=>-r*Math.cos(t/n*sn)+r+e,gh=(t,e,r,n)=>(t/=n)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e,Yg=(t,e,r,n)=>r-gh(n-t,0,r,n)+e;var oS=Object.freeze({__proto__:null,defaultEasing:p1,easeInBack:function(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return r*(t/=n)*t*((i+1)*t-i)+e},easeInBounce:Yg,easeInCirc:(t,e,r,n)=>-r*(Math.sqrt(1-(t/=n)*t)-1)+e,easeInCubic:(t,e,r,n)=>r*(t/n)**3+e,easeInElastic:(t,e,r,n)=>{const i=r;let s=0;if(t===0)return e;if((t/=n)===1)return e+r;s||(s=.3*n);const{a:o,s:a,p:l}=Kc(i,r,s,1.70158);return-Xg(o,a,l,t,n)+e},easeInExpo:(t,e,r,n)=>t===0?e:r*2**(10*(t/n-1))+e,easeInOutBack:function(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(t/=n/2)<1?r/2*(t*t*((1+(i*=1.525))*t-i))+e:r/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},easeInOutBounce:(t,e,r,n)=>t<n/2?.5*Yg(2*t,0,r,n)+e:.5*gh(2*t-n,0,r,n)+.5*r+e,easeInOutCirc:(t,e,r,n)=>(t/=n/2)<1?-r/2*(Math.sqrt(1-t**2)-1)+e:r/2*(Math.sqrt(1-(t-=2)*t)+1)+e,easeInOutCubic:(t,e,r,n)=>(t/=n/2)<1?r/2*t**3+e:r/2*((t-2)**3+2)+e,easeInOutElastic:(t,e,r,n)=>{const i=r;let s=0;if(t===0)return e;if((t/=n/2)===2)return e+r;s||(s=n*(.3*1.5));const{a:o,s:a,p:l,c}=Kc(i,r,s,1.70158);return t<1?-.5*Xg(o,a,l,t,n)+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*Pr/l)*.5+c+e},easeInOutExpo:(t,e,r,n)=>t===0?e:t===n?e+r:(t/=n/2)<1?r/2*2**(10*(t-1))+e:r/2*-(2**(-10*--t)+2)+e,easeInOutQuad:(t,e,r,n)=>(t/=n/2)<1?r/2*t**2+e:-r/2*(--t*(t-2)-1)+e,easeInOutQuart:(t,e,r,n)=>(t/=n/2)<1?r/2*t**4+e:-r/2*((t-=2)*t**3-2)+e,easeInOutQuint:(t,e,r,n)=>(t/=n/2)<1?r/2*t**5+e:r/2*((t-2)**5+2)+e,easeInOutSine:(t,e,r,n)=>-r/2*(Math.cos(Math.PI*t/n)-1)+e,easeInQuad:(t,e,r,n)=>r*(t/=n)*t+e,easeInQuart:(t,e,r,n)=>r*(t/=n)*t**3+e,easeInQuint:(t,e,r,n)=>r*(t/n)**5+e,easeInSine:(t,e,r,n)=>-r*Math.cos(t/n*sn)+r+e,easeOutBack:function(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return r*((t=t/n-1)*t*((i+1)*t+i)+1)+e},easeOutBounce:gh,easeOutCirc:(t,e,r,n)=>r*Math.sqrt(1-(t=t/n-1)*t)+e,easeOutCubic:(t,e,r,n)=>r*((t/n-1)**3+1)+e,easeOutElastic:(t,e,r,n)=>{const i=r;let s=0;if(t===0)return e;if((t/=n)===1)return e+r;s||(s=.3*n);const{a:o,s:a,p:l,c}=Kc(i,r,s,1.70158);return o*2**(-10*t)*Math.sin((t*n-a)*Pr/l)+c+e},easeOutExpo:(t,e,r,n)=>t===n?e+r:r*-(2**(-10*t/n)+1)+e,easeOutQuad:(t,e,r,n)=>-r*(t/=n)*(t-2)+e,easeOutQuart:(t,e,r,n)=>-r*((t=t/n-1)*t**3-1)+e,easeOutQuint:(t,e,r,n)=>r*((t/n-1)**5+1)+e,easeOutSine:(t,e,r,n)=>r*Math.sin(t/n*sn)+e});const aS=()=>!1;class Rd{constructor(e){let{startValue:r,byValue:n,duration:i=500,delay:s=0,easing:o=p1,onStart:a=En,onChange:l=En,onComplete:c=En,abort:u=aS,target:h}=e;S(this,"_state","pending"),S(this,"durationProgress",0),S(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=s,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=u,this.target=h,this.startValue=r,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=r=>{this._state==="pending"&&(this.startTime=r||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Ts(e),this.delay):Ts(e)}tick(e){const r=(e||+new Date)-this.startTime,n=Math.min(r,this.duration);this.durationProgress=n/this.duration;const{value:i,valueProgress:s}=this.calculate(n);this.value=Object.freeze(i),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):r>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Ts(this.tick)))}register(){al.push(this)}unregister(){al.remove(this)}abort(){this._state="aborted",this.unregister()}}const lS=["startValue","endValue"];class cS extends Rd{constructor(e){let{startValue:r=0,endValue:n=100}=e;super(b(b({},ve(e,lS)),{},{startValue:r,byValue:n-r}))}calculate(e){const r=this.easing(e,this.startValue,this.byValue,this.duration);return{value:r,valueProgress:Math.abs((r-this.startValue)/this.byValue)}}}const uS=["startValue","endValue"];class hS extends Rd{constructor(e){let{startValue:r=[0],endValue:n=[100]}=e;super(b(b({},ve(e,uS)),{},{startValue:r,byValue:n.map((i,s)=>i-r[s])}))}calculate(e){const r=this.startValue.map((n,i)=>this.easing(e,n,this.byValue[i],this.duration,i));return{value:r,valueProgress:Math.abs((r[0]-this.startValue[0])/this.byValue[0])}}}const dS=["startValue","endValue","easing","onChange","onComplete","abort"],fS=(t,e,r,n)=>e+r*(1-Math.cos(t/n*sn)),qc=t=>t&&((e,r,n)=>t(new Z(e).toRgba(),r,n));class gS extends Rd{constructor(e){let{startValue:r,endValue:n,easing:i=fS,onChange:s,onComplete:o,abort:a}=e,l=ve(e,dS);const c=new Z(r).getSource(),u=new Z(n).getSource();super(b(b({},l),{},{startValue:c,byValue:u.map((h,d)=>h-c[d]),easing:i,onChange:qc(s),onComplete:qc(o),abort:qc(a)}))}calculate(e){const[r,n,i,s]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[r,n,i].map(Math.round),Fn(0,s,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function Id(t){const e=(r=>Array.isArray(r.startValue)||Array.isArray(r.endValue))(t)?new hS(t):new cS(t);return e.start(),e}function m1(t){const e=new gS(t);return e.start(),e}class _e{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(r=>r.eq(e))}append(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.points=this.points.concat(r.filter(i=>!this.includes(i))),this}static isPointContained(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(r.eq(n))return e.eq(r);if(r.x===n.x)return e.x===r.x&&(i||e.y>=Math.min(r.y,n.y)&&e.y<=Math.max(r.y,n.y));if(r.y===n.y)return e.y===r.y&&(i||e.x>=Math.min(r.x,n.x)&&e.x<=Math.max(r.x,n.x));{const s=ul(r,n),o=ul(r,e).divide(s);return i?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,r){const n=new O(e).setX(Math.min(e.x-1,...r.map(s=>s.x)));let i=0;for(let s=0;s<r.length;s++){const o=this.intersectSegmentSegment(r[s],r[(s+1)%r.length],e,n);if(o.includes(e))return!0;i+=+(o.status==="Intersection")}return i%2==1}static intersectLineLine(e,r,n,i){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=r.x-e.x,l=r.y-e.y,c=i.x-n.x,u=i.y-n.y,h=e.x-n.x,d=e.y-n.y,f=c*d-u*h,m=a*d-l*h,v=u*a-c*l;if(v!==0){const C=f/v,g=m/v;return(s||0<=C&&C<=1)&&(o||0<=g&&g<=1)?new _e("Intersection").append(new O(e.x+C*a,e.y+C*l)):new _e}if(f===0||m===0){const C=s||o||_e.isPointContained(e,n,i)||_e.isPointContained(r,n,i)||_e.isPointContained(n,e,r)||_e.isPointContained(i,e,r);return new _e(C?"Coincident":void 0)}return new _e("Parallel")}static intersectSegmentLine(e,r,n,i){return _e.intersectLineLine(e,r,n,i,!1,!0)}static intersectSegmentSegment(e,r,n,i){return _e.intersectLineLine(e,r,n,i,!1,!1)}static intersectLinePolygon(e,r,n){let i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new _e,o=n.length;for(let a,l,c,u=0;u<o;u++){if(a=n[u],l=n[(u+1)%o],c=_e.intersectLineLine(e,r,a,l,i,!1),c.status==="Coincident")return c;s.append(...c.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,r,n){return _e.intersectLinePolygon(e,r,n,!1)}static intersectPolygonPolygon(e,r){const n=new _e,i=e.length,s=[];for(let o=0;o<i;o++){const a=e[o],l=e[(o+1)%i],c=_e.intersectSegmentPolygon(a,l,r);c.status==="Coincident"?(s.push(c),n.append(a,l)):n.append(...c.points)}return s.length>0&&s.length===e.length?new _e("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,r,n){const i=r.min(n),s=r.max(n),o=new O(s.x,i.y),a=new O(i.x,s.y);return _e.intersectPolygonPolygon(e,[i,o,s,a])}}class pS extends Vv{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Ye(e,this.group.calcTransformMatrix()):e}setXY(e,r,n){this.group&&(e=Ye(e,xt(this.group.calcTransformMatrix()))),this.setRelativeXY(e,r,n)}getRelativeXY(){return new O(this.left,this.top)}setRelativeXY(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,r,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:r,br:n,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,r,n,i];if(this.group){const o=this.group.calcTransformMatrix();return s.map(a=>Ye(a,o))}return s}intersectsWithRect(e,r){return _e.intersectPolygonRectangle(this.getCoords(),e,r).status==="Intersection"}intersectsWithObject(e){const r=_e.intersectPolygonPolygon(this.getCoords(),e.getCoords());return r.status==="Intersection"||r.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(r=>e.containsPoint(r))}isContainedWithinRect(e,r){const{left:n,top:i,width:s,height:o}=this.getBoundingRect();return n>=e.x&&n+s<=r.x&&i>=e.y&&i+o<=r.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return _e.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:r}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=r.x&&n.x>=e.x&&n.y<=r.y&&n.y>=e.y)||!!this.intersectsWithRect(e,r)||this.containsPoint(e.midPointFrom(r))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:r}=this.canvas.vptCoords;return this.intersectsWithRect(e,r)?!0:this.getCoords().every(n=>(n.x>=r.x||n.x<=e.x)&&(n.y>=r.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(r))}getBoundingRect(){return hr(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(nt,e),this._set(Ct,e),this.setCoords()}scaleToWidth(e){const r=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/r)}scaleToHeight(e){const r=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/r)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?an(Gv(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||rt.concat()}calcACoords(){const e=Bi({angle:this.angle}),{x:r,y:n}=this.getRelativeCenterPoint(),i=Ii(r,n),s=Ae(i,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:Ye({x:-a,y:-l},s),tr:Ye({x:a,y:-l},s),bl:Ye({x:-a,y:l},s),br:Ye({x:a,y:l},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],r=[];return!e&&this.group&&(r=this.group.transformMatrixKey(e)),r.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Pe(this.originX),Pe(this.originY)),r}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],r=this.calcOwnMatrix();if(e||!this.group)return r;const n=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key.every((s,o)=>s===n[o])?i.value:(this.group&&(r=Ae(this.group.calcTransformMatrix(!1),r)),this.matrixCache={key:n,value:r},r)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),r=this.ownMatrixCache;if(r&&r.key===e)return r.value;const n=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=qv(i);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new O(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=b({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=r.strokeWidth;let i=n,s=0;this.strokeUniform&&(i=0,s=n);const o=r.width+i,a=r.height+i;let l;return l=r.skewX===0&&r.skewY===0?new O(o*r.scaleX,a*r.scaleY):Gl(o,a,ro(r)),l.scalarAdd(s)}translateToGivenOrigin(e,r,n,i,s){let o=e.x,a=e.y;const l=Pe(i)-Pe(r),c=Pe(s)-Pe(n);if(l||c){const u=this._getTransformedDimensions();o+=l*u.x,a+=c*u.y}return new O(o,a)}translateToCenterPoint(e,r,n){if(r===W&&n===W)return e;const i=this.translateToGivenOrigin(e,r,n,W,W);return this.angle?i.rotate(Te(this.angle),e):i}translateToOriginPoint(e,r,n){const i=this.translateToGivenOrigin(e,W,W,r,n);return this.angle?i.rotate(Te(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Ye(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new O(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,r){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,r)}setPositionByOrigin(e,r,n){const i=this.translateToCenterPoint(e,r,n),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),ee,ft)}}const mS=["type"],vS=["extraParam"];let vr=class ja extends pS{static getDefaults(){return ja.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){nn("warn","Setting type has no effect",e)}constructor(e){super(),S(this,"_cacheContext",null),Object.assign(this,ja.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Me(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const r=e.width,n=e.height,i=K.maxCacheSideLimit,s=K.minCacheSideLimit;if(r<=i&&n<=i&&r*n<=K.perfLimitSizeTotal)return r<s&&(e.width=s),n<s&&(e.height=s),e;const o=r/n,[a,l]=bs.limitDimsByArea(o),c=Fn(s,a,i),u=Fn(s,l,i);return r>c&&(e.zoomX/=r/c,e.width=c,e.capped=!0),n>u&&(e.zoomY/=n/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),r=this._getTransformedDimensions({skewX:0,skewY:0}),n=r.x*e.x/this.scaleX,i=r.y*e.y/this.scaleY;return{width:n+2,height:i+2,zoomX:e.x,zoomY:e.y,x:n,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,r=this._cacheContext,n=this._limitCacheSize(this._getCacheCanvasDimensions()),i=K.minCacheSideLimit,s=n.width,o=n.height,a=n.zoomX,l=n.zoomY,c=s!==e.width||o!==e.height,u=this.zoomX!==a||this.zoomY!==l;if(!e||!r)return!1;let h,d,f=c||u,m=0,v=0,C=!1;if(c){const g=this._cacheCanvas.width,p=this._cacheCanvas.height,y=s>g||o>p;C=y||(s<.9*g||o<.9*p)&&g>i&&p>i,y&&!n.capped&&(s>i||o>i)&&(m=.1*s,v=.1*o)}return Jv(this)&&this.path&&(f=!0,C=!0,m+=this.getHeightOfLine(0)*this.zoomX,v+=this.getHeightOfLine(0)*this.zoomY),!!f&&(C?(e.width=Math.ceil(s+m),e.height=Math.ceil(o+v)):(r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,e.width,e.height)),h=n.x/2,d=n.y/2,this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-d)+d,r.translate(this.cacheTranslationX,this.cacheTranslationY),r.scale(a,l),this.zoomX=a,this.zoomY=l,!0)}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const r=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!r);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new O(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Ei(this.calcTransformMatrix());return new O(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const r=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(r*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,r){e!==nt&&e!==Ct||(r=this._constrainScale(r)),e===nt&&r<0?(this.flipX=!this.flipX,r*=-1):e==="scaleY"&&r<0?(this.flipY=!this.flipY,r*=-1):e!=="shadow"||!r||r instanceof dr||(r=new dr(r));const n=this[e]!==r;return this[e]=r,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext&&(this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===pt&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.parent||!this.parent.isOnACache()),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,r){if(e.save(),r.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",r.absolutePositioned){const n=xt(this.calcTransformMatrix());e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}r.transform(e),e.scale(1/r.zoomX,1/r.zoomY),e.drawImage(r._cacheCanvas,-r.cacheTranslationX,-r.cacheTranslationY),e.restore()}drawObject(e,r){const n=this.fill,i=this.stroke;r?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath),this.fill=n,this.stroke=i}_drawClipPath(e,r){r&&(r._set("canvas",this.canvas),r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCache(e,r))}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const r=this._cacheCanvas,n=this._cacheContext;return!(!r||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(r&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.width,r.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const r=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,r){const n=r.stroke;n&&(e.lineWidth=r.strokeWidth,e.lineCap=r.strokeLineCap,e.lineDashOffset=r.strokeDashOffset,e.lineJoin=r.strokeLineJoin,e.miterLimit=r.strokeMiterLimit,jt(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=r.stroke)}_setFillStyles(e,r){let{fill:n}=r;n&&(jt(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,r){r&&r.length!==0&&(1&r.length&&r.push(...r),e.setLineDash(r))}_setShadow(e){if(!this.shadow)return;const r=this.shadow,n=this.canvas,i=this.getCanvasRetinaScaling(),[s,,,o]=(n==null?void 0:n.viewportTransform)||rt,a=s*i,l=o*i,c=r.nonScaling?new O(1,1):this.getObjectScaling();e.shadowColor=r.color,e.shadowBlur=r.blur*K.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=r.offsetX*a*c.x,e.shadowOffsetY=r.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,r){if(!jt(r))return{offsetX:0,offsetY:0};const n=r.gradientTransform||r.patternTransform,i=-this.width/2+r.offsetX||0,s=-this.height/2+r.offsetY||0;return r.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,i,s):e.transform(1,0,0,1,i,s),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===pt?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const r=this.getObjectScaling();e.scale(1/r.x,1/r.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,r){var n;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=Me(),o=this.getCanvasRetinaScaling(),a=i.x/this.scaleX/o,l=i.y/this.scaleY/o;s.width=Math.ceil(a),s.height=Math.ceil(l);const c=s.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(a,0),c.lineTo(a,l),c.lineTo(0,l),c.closePath(),c.translate(a/2,l/2),c.scale(i.zoomX/this.scaleX/o,i.zoomY/this.scaleY/o),this._applyPatternGradientTransform(c,r),c.fillStyle=r.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(o*this.scaleX/i.zoomX,o*this.scaleY/i.zoomY),e.strokeStyle=(n=c.createPattern(s,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new O(this.left+this.width/2,this.top+this.height/2)}clone(e){const r=this.toObject(e);return this.constructor.fromObject(r)}cloneAsImage(e){const r=this.toCanvasElement(e);return new(R.getClass("image"))(r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=jd(this),n=this.group,i=this.shadow,s=Math.abs,o=e.enableRetinaScaling?Bv():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(p=>new io(p,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&s1(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&dh(this,this.getViewportTransform()),this.setCoords();const c=Me(),u=this.getBoundingRect(),h=this.shadow,d=new O;if(h){const p=h.blur,y=h.nonScaling?new O(1,1):this.getObjectScaling();d.x=2*Math.round(s(h.offsetX)+p)*s(y.x),d.y=2*Math.round(s(h.offsetY)+p)*s(y.y)}const f=u.width+d.x,m=u.height+d.y;c.width=Math.ceil(f),c.height=Math.ceil(m);const v=l(c);e.format==="jpeg"&&(v.backgroundColor="#fff"),this.setPositionByOrigin(new O(v.width/2,v.height/2),W,W);const C=this.canvas;v._objects=[this],this.set("canvas",v),this.setCoords();const g=v.toCanvasElement(a||1,e);return this.set("canvas",C),this.shadow=i,n&&(this.group=n),this.set(r),this.setCoords(),v._objects=[],v.destroy(),g}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Md(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.includes(this.constructor.type)||r.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:r,originX:n,originY:i}=this;if(r){const{x:s,y:o}=this.getRelativeCenterPoint();this.originX=W,this.originY=W,this.left=s,this.top=o}if(this.set("angle",e),r){const{x:s,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,i);this.left=s,this.top=o,this.originX=n,this.originY=i}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){al.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&fr().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,r){return Object.entries(e).reduce((n,i)=>{let[s,o]=i;return n[s]=this._animate(s,o,r),n},{})}_animate(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.split("."),s=this.constructor.colorProperties.includes(i[i.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=n,u=b(b({},n),{},{target:this,startValue:a??i.reduce((h,d)=>h[d],this),endValue:r,abort:o==null?void 0:o.bind(this),onChange:(h,d,f)=>{i.reduce((m,v,C)=>(C===i.length-1&&(m[v]=h),m[v]),this),l&&l(h,d,f)},onComplete:(h,d,f)=>{this.setCoords(),c&&c(h,d,f)}});return s?m1(u):Id(u)}isDescendantOf(e){const{parent:r,group:n}=this;return r===e||n===e||!!r&&r.isDescendantOf(e)||!!n&&n!==r&&n.isDescendantOf(e)}getAncestors(){const e=[];let r=this;do r=r.parent,r&&e.push(r);while(r);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const r=this.getAncestors(),n=e.getAncestors();if(r.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let i,s=0;s<r.length;s++){if(i=r[s],i===e)return{fork:[this,...r.slice(0,s)],otherFork:[],common:r.slice(s)};for(let o=0;o<n.length;o++){if(this===n[o])return{fork:[],otherFork:[e,...n.slice(0,o)],common:[this,...r]};if(i===n[o])return{fork:[this,...r.slice(0,s)],otherFork:[e,...n.slice(0,o)],common:r.slice(s)}}}return{fork:[this,...r],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const r=this.findCommonAncestors(e);return r&&!!r.common.length}isInFrontOf(e){if(this===e)return;const r=this.findCommonAncestors(e);if(r.fork.includes(e))return!0;if(r.otherFork.includes(this))return!1;const n=r.common[0]||this.canvas;if(!n)return;const i=r.fork.pop(),s=r.otherFork.pop(),o=n._objects.indexOf(i),a=n._objects.indexOf(s);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(ja.customProperties,this.constructor.customProperties||[]);let r;const n=K.NUM_FRACTION_DIGITS,{clipPath:i,fill:s,stroke:o,shadow:a,strokeDashArray:l,left:c,top:u,originX:h,originY:d,width:f,height:m,strokeWidth:v,strokeLineCap:C,strokeDashOffset:g,strokeLineJoin:p,strokeUniform:y,strokeMiterLimit:T,scaleX:k,scaleY:E,angle:P,flipX:M,flipY:z,opacity:B,visible:Y,backgroundColor:te,fillRule:U,paintFirst:ie,globalCompositeOperation:V,skewX:ye,skewY:re}=this;i&&!i.excludeFromExport&&(r=i.toObject(e.concat("inverted","absolutePositioned")));const j=N=>me(N,n),H=b(b({},Bn(this,e)),{},{type:this.constructor.type,version:lh,originX:h,originY:d,left:j(c),top:j(u),width:j(f),height:j(m),fill:Rg(s)?s.toObject():s,stroke:Rg(o)?o.toObject():o,strokeWidth:j(v),strokeDashArray:l&&l.concat(),strokeLineCap:C,strokeDashOffset:g,strokeLineJoin:p,strokeUniform:y,strokeMiterLimit:j(T),scaleX:j(k),scaleY:j(E),angle:j(P),flipX:M,flipY:z,opacity:j(B),shadow:a&&a.toObject(),visible:Y,backgroundColor:te,fillRule:U,paintFirst:ie,globalCompositeOperation:V,skewX:j(ye),skewY:j(re)},r?{clipPath:r}:null);return this.includeDefaultValues?H:this._removeDefaultValues(H)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const r=this.constructor.getDefaults(),n=Object.keys(r).length>0?r:Object.getPrototypeOf(this);return Ad(e,(i,s)=>{if(s===ee||s===ft||s==="type")return!0;const o=n[s];return i!==o&&!(Array.isArray(i)&&Array.isArray(o)&&i.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let r=ve(e,mS),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:i}=n,s=ve(n,vS);return no(r,s).then(o=>i?(delete o[i],new this(r[i],o)):new this(o))}static fromObject(e,r){return this._fromObject(e,r)}};S(vr,"stateProperties",iS),S(vr,"cacheProperties",Ar),S(vr,"ownDefaults",sS),S(vr,"type","FabricObject"),S(vr,"colorProperties",[je,pt,"backgroundColor"]),S(vr,"customProperties",[]),R.setClass(vr),R.setClass(vr,"object");const Ni=(t,e,r)=>(n,i,s,o)=>{const a=e(n,i,s,o);return a&&a1(t,b(b({},c1(n,i,s,o)),r)),a};function zi(t){return(e,r,n,i)=>{const{target:s,originX:o,originY:a}=r,l=s.getRelativeCenterPoint(),c=s.translateToOriginPoint(l,o,a),u=t(e,r,n,i);return s.setPositionByOrigin(c,r.originX,r.originY),u}}const Gg=Ni(Xs,zi((t,e,r,n)=>{const i=$d(e,e.originX,e.originY,r,n);if(Pe(e.originX)===Pe(W)||Pe(e.originX)===Pe(ke)&&i.x<0||Pe(e.originX)===Pe(ee)&&i.x>0){const{target:s}=e,o=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=l1(e)?2:1,l=s.width,c=Math.ceil(Math.abs(i.x*a/s.scaleX)-o);return s.set("width",Math.max(c,0)),l!==s.width}return!1}));function yS(t,e,r,n,i){n=n||{};const s=this.sizeX||n.cornerSize||i.cornerSize,o=this.sizeY||n.cornerSize||i.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:i.transparentCorners,l=a?pt:je,c=!a&&(n.cornerStrokeColor||i.cornerStrokeColor);let u,h=e,d=r;t.save(),t.fillStyle=n.cornerColor||i.cornerColor||"",t.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",s>o?(u=s,t.scale(1,o/s),d=r*s/o):o>s?(u=o,t.scale(s/o,1),h=e*o/s):u=s,t.lineWidth=1,t.beginPath(),t.arc(h,d,u/2,0,Pr,!1),t[l](),c&&t.stroke(),t.restore()}function _S(t,e,r,n,i){n=n||{};const s=this.sizeX||n.cornerSize||i.cornerSize,o=this.sizeY||n.cornerSize||i.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:i.transparentCorners,l=a?pt:je,c=!a&&(n.cornerStrokeColor||i.cornerStrokeColor),u=s/2,h=o/2;t.save(),t.fillStyle=n.cornerColor||i.cornerColor||"",t.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",t.lineWidth=1,t.translate(e,r);const d=i.getTotalAngle();t.rotate(Te(d)),t["".concat(l,"Rect")](-u,-h,s,o),c&&t.strokeRect(-u,-h,s,o),t.restore()}class Wt{constructor(e){S(this,"visible",!0),S(this,"actionName",Ul),S(this,"angle",0),S(this,"x",0),S(this,"y",0),S(this,"offsetX",0),S(this,"offsetY",0),S(this,"sizeX",0),S(this,"sizeY",0),S(this,"touchSizeX",0),S(this,"touchSizeY",0),S(this,"cursorStyle","crosshair"),S(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,r,n,i){var s;let{tl:o,tr:a,br:l,bl:c}=i;return((s=r.canvas)===null||s===void 0?void 0:s.getActiveObject())===r&&r.isControlVisible(e)&&_e.isPointInPolygon(n,[o,a,l,c])}getActionHandler(e,r,n){return this.actionHandler}getMouseDownHandler(e,r,n){return this.mouseDownHandler}getMouseUpHandler(e,r,n){return this.mouseUpHandler}cursorStyleHandler(e,r,n){return r.cursorStyle}getActionName(e,r,n){return r.actionName}getVisibility(e,r){var n,i;return(n=(i=e._controlsVisibility)===null||i===void 0?void 0:i[r])!==null&&n!==void 0?n:this.visible}setVisibility(e,r,n){this.visible=e}positionHandler(e,r,n,i){return new O(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(r)}calcCornerCoords(e,r,n,i,s,o){const a=Xl([Ii(n,i),Bi({angle:e}),Yl((s?this.touchSizeX:this.sizeX)||r,(s?this.touchSizeY:this.sizeY)||r)]);return{tl:new O(-.5,-.5).transform(a),tr:new O(.5,-.5).transform(a),br:new O(.5,.5).transform(a),bl:new O(-.5,.5).transform(a)}}render(e,r,n,i,s){((i=i||{}).cornerStyle||s.cornerStyle)==="circle"?yS.call(this,e,r,n,i,s):_S.call(this,e,r,n,i,s)}}const xS=(t,e,r)=>r.lockRotation?cl:e.cursorStyle,wS=Ni(zv,zi((t,e,r,n)=>{let{target:i,ex:s,ey:o,theta:a,originX:l,originY:c}=e;const u=i.translateToOriginPoint(i.getRelativeCenterPoint(),l,c);if(Qt(i,"lockRotation"))return!1;const h=Math.atan2(o-u.y,s-u.x),d=Math.atan2(n-u.y,r-u.x);let f=an(d-h+a);if(i.snapAngle&&i.snapAngle>0){const v=i.snapAngle,C=i.snapThreshold||v,g=Math.ceil(f/v)*v,p=Math.floor(f/v)*v;Math.abs(f-p)<C?f=p:Math.abs(f-g)<C&&(f=g)}f<0&&(f=360+f),f%=360;const m=i.angle!==f;return i.angle=f,m}));function v1(t,e){const r=e.canvas,n=t[r.uniScaleKey];return r.uniformScaling&&!n||!r.uniformScaling&&n}function y1(t,e,r){const n=Qt(t,"lockScalingX"),i=Qt(t,"lockScalingY");if(n&&i||!e&&(n||i)&&r||n&&e==="x"||i&&e==="y")return!0;const{width:s,height:o,strokeWidth:a}=t;return s===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const SS=["e","se","s","sw","w","nw","n","ne","e"],fs=(t,e,r)=>{const n=v1(t,r);if(y1(r,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return cl;const i=u1(r,e);return"".concat(SS[i],"-resize")};function Bd(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,o=i.by,a=v1(t,s);let l,c,u,h,d,f;if(y1(s,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(l=$d(e,e.originX,e.originY,r,n),d=o!=="y"?Math.sign(l.x||e.signX||1):1,f=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=d),e.signY||(e.signY=f),Qt(s,"lockScalingFlip")&&(e.signX!==d||e.signY!==f))return!1;if(h=s._getTransformedDimensions(),a&&!o){const C=Math.abs(l.x)+Math.abs(l.y),{original:g}=e,p=C/(Math.abs(h.x*g.scaleX/s.scaleX)+Math.abs(h.y*g.scaleY/s.scaleY));c=g.scaleX*p,u=g.scaleY*p}else c=Math.abs(l.x*s.scaleX/h.x),u=Math.abs(l.y*s.scaleY/h.y);l1(e)&&(c*=2,u*=2),e.signX!==d&&o!=="y"&&(e.originX=Ng(e.originX),c*=-1,e.signX=d),e.signY!==f&&o!=="x"&&(e.originY=Ng(e.originY),u*=-1,e.signY=f)}const m=s.scaleX,v=s.scaleY;return o?(o==="x"&&s.set(nt,c),o==="y"&&s.set(Ct,u)):(!Qt(s,"lockScalingX")&&s.set(nt,c),!Qt(s,"lockScalingY")&&s.set(Ct,u)),m!==s.scaleX||v!==s.scaleY}const Uo=Ni(Vl,zi((t,e,r,n)=>Bd(t,e,r,n))),CS=Ni(Vl,zi((t,e,r,n)=>Bd(t,e,r,n,{by:"x"}))),bS=Ni(Vl,zi((t,e,r,n)=>Bd(t,e,r,n,{by:"y"}))),TS=["target","ex","ey","skewingSide"],Qc={x:{counterAxis:"y",scale:nt,skew:Fi,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Ct,skew:Ri,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},OS=["ns","nesw","ew","nwse"],kS=(t,e,r)=>{if(e.x!==0&&Qt(r,"lockSkewingY")||e.y!==0&&Qt(r,"lockSkewingX"))return cl;const n=u1(r,e)%4;return"".concat(OS[n],"-resize")};function _1(t,e,r,n,i){const{target:s}=r,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:u}=Qc[t];if(Qt(s,l))return!1;const{origin:h,flip:d}=Qc[o],f=Pe(r[h])*(s[d]?-1:1),m=-Math.sign(f)*(s[u]?-1:1),v=.5*-((s[c]===0&&$d(r,W,W,n,i)[t]>0||s[c]>0?1:-1)*m)+.5;return Ni(Hv,zi((g,p,y,T)=>function(k,E,P){let{target:M,ex:z,ey:B,skewingSide:Y}=E,te=ve(E,TS);const{skew:U}=Qc[k],ie=P.subtract(new O(z,B)).divide(new O(M.scaleX,M.scaleY))[k],V=M[U],ye=te[U],re=Math.tan(Te(ye)),j=k==="y"?M._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:M._getTransformedDimensions({scaleX:1,scaleY:1}).y,H=2*ie*Y/Math.max(j,1)+re,N=an(Math.atan(H));M.set(U,N);const Q=V!==M[U];if(Q&&k==="y"){const{skewX:he,scaleX:mt}=M,se=M._getTransformedDimensions({skewY:V}),Re=M._getTransformedDimensions(),ze=he!==0?se.x/Re.x:1;ze!==1&&M.set(nt,ze*mt)}return Q}(t,p,new O(y,T))))(e,b(b({},r),{},{[a]:v,skewingSide:m}),n,i)}const ES=(t,e,r,n)=>_1("x",t,e,r,n),MS=(t,e,r,n)=>_1("y",t,e,r,n);function Ql(t,e){return t[e.canvas.altActionKey]}const Xo=(t,e,r)=>{const n=Ql(t,r);return e.x===0?n?Fi:Ct:e.y===0?n?Ri:nt:""},ui=(t,e,r)=>Ql(t,r)?kS(0,e,r):fs(t,e,r),Kg=(t,e,r,n)=>Ql(t,e.target)?MS(t,e,r,n):CS(t,e,r,n),qg=(t,e,r,n)=>Ql(t,e.target)?ES(t,e,r,n):bS(t,e,r,n),x1=()=>({ml:new Wt({x:-.5,y:0,cursorStyleHandler:ui,actionHandler:Kg,getActionName:Xo}),mr:new Wt({x:.5,y:0,cursorStyleHandler:ui,actionHandler:Kg,getActionName:Xo}),mb:new Wt({x:0,y:.5,cursorStyleHandler:ui,actionHandler:qg,getActionName:Xo}),mt:new Wt({x:0,y:-.5,cursorStyleHandler:ui,actionHandler:qg,getActionName:Xo}),tl:new Wt({x:-.5,y:-.5,cursorStyleHandler:fs,actionHandler:Uo}),tr:new Wt({x:.5,y:-.5,cursorStyleHandler:fs,actionHandler:Uo}),bl:new Wt({x:-.5,y:.5,cursorStyleHandler:fs,actionHandler:Uo}),br:new Wt({x:.5,y:.5,cursorStyleHandler:fs,actionHandler:Uo}),mtr:new Wt({x:0,y:-.5,actionHandler:wS,cursorStyleHandler:xS,offsetY:-40,withConnection:!0,actionName:kd})}),PS=()=>({mr:new Wt({x:.5,y:0,actionHandler:Gg,cursorStyleHandler:ui,actionName:Xs}),ml:new Wt({x:-.5,y:0,actionHandler:Gg,cursorStyleHandler:ui,actionName:Xs})}),DS=()=>b(b({},x1()),PS());class Ks extends vr{static getDefaults(){return b(b({},super.getDefaults()),Ks.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Ks.ownDefaults),this.setOptions(e)}static createControls(){return{controls:x1()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const r=e._currentTransform,n=r.target,i=r.action;if(this===n&&i&&i.startsWith(Ul))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let i=n.length-1;i>=0;i--){const[s,o]=n[i],a=this.controls[s];if(a.shouldActivate(s,this,e,r?o.touchCorner:o.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),r=this.getCenterPoint(),n=Ii(r.x,r.y),i=Bi({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=Ae(n,i),o=Ae(e,s),a=Ae(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?Ei(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((h,d)=>{const f=h.positionHandler(c,a,this,h);u[d]=Object.assign(f,this._calcCornerCoords(h,f))}),u}_calcCornerCoords(e,r){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,r.x,r.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,r.x,r.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const r in this.controls)e(this.controls[r],r,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const r=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(r.x,r.y),e.scale(1/i[0],1/i[3]),e.rotate(Te(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,r){e.strokeRect(-r.x/2,-r.y/2,r.x,r.y)}_drawBorders(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=b({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,r),i.hasControls&&this.drawControlsConnectingLines(e,r),e.restore()}_renderControls(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:i}=this,s=b({hasBorders:n,hasControls:i},r),o=this.getViewportTransform(),a=s.hasBorders,l=s.hasControls,c=Ae(o,this.calcTransformMatrix()),u=Ei(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=1*this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(Te(this.group?u.angle:this.angle)),a&&this.drawBorders(e,u,r),l&&this.drawControls(e,r),e.restore()}drawBorders(e,r,n){let i;if(n&&n.forActiveSelection||this.group){const s=Gl(this.width,this.height,ro(r)),o=this.isStrokeAccountedForInDimensions()?Ed:(this.strokeUniform?new O().scalarAdd(this.canvas?this.canvas.getZoom():1):new O(r.scaleX,r.scaleY)).scalarMultiply(this.strokeWidth);i=s.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,n)}drawControlsConnectingLines(e,r){let n=!1;e.beginPath(),this.forEachControl((i,s)=>{i.withConnection&&i.getVisibility(this,s)&&(n=!0,e.moveTo(i.x*r.x,i.y*r.y),e.lineTo(i.x*r.x+i.offsetX,i.y*r.y+i.offsetY))}),n&&e.stroke()}drawControls(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:s,cornerColor:o}=this,a=b({cornerStrokeColor:i,cornerDashArray:s,cornerColor:o},r);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,r){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=r}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(r=>{let[n,i]=r;return this.setControlVisible(n,i)})}clearContextTop(e){if(!this.canvas)return;const r=this.canvas.contextTop;if(!r)return;const n=this.canvas.viewportTransform;r.save(),r.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(r);const i=this.width+4,s=this.height+4;return r.clearRect(-i/2,-s/2,i,s),e||r.restore(),r}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function w1(t,e){return e.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(r.prototype,n)||Object.create(null))})}),t}S(Ks,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Ne extends Ks{}w1(Ne,[h1]),R.setClass(Ne),R.setClass(Ne,"object");const S1=(t,e,r,n)=>{const i=2*(n=Math.round(n))+1,{data:s}=t.getImageData(e-n,r-n,i,i);for(let o=3;o<s.length;o+=4)if(s[o]>0)return!1;return!0};class C1{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new O(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new O(1/this.options.scaleX,1/this.options.scaleY):new O(1,1)}createSideVector(e,r){const n=ul(e,r);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,r,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,r,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const r=new O(e);return r.y+=r.x*Math.tan(Te(this.options.skewY)),r.x+=r.y*Math.tan(Te(this.options.skewX)),r}scaleUnitVector(e,r){return e.multiply(this.strokeUniformScalar).scalarMultiply(r)}}const AS=new O;class xi extends C1{static getOrthogonalRotationFactor(e,r){const n=r?dl(e,r):f1(e);return Math.abs(n)<sn?-1:1}constructor(e,r,n,i){super(i),S(this,"AB",void 0),S(this,"AC",void 0),S(this,"alpha",void 0),S(this,"bisector",void 0),this.A=new O(e),this.B=new O(r),this.C=new O(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=dl(this.AB,this.AC),this.bisector=ql(Ld(this.AB.eq(AS)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,r),s=Fd(i),o=xi.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,n*o)}projectBevel(){const e=[];return(this.alpha%Pr==0?[this.B]:[this.B,this.C]).forEach(r=>{e.push(this.projectOrthogonally(this.A,r)),e.push(this.projectOrthogonally(this.A,r,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],r=Math.abs(this.alpha),n=1/Math.sin(r/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),s=this.options.strokeUniform?hl(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return hl(i)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(i))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,r){const n=[],i=new O(xi.getOrthogonalRotationFactor(this.bisector),xi.getOrthogonalRotationFactor(new O(this.bisector.y,this.bisector.x)));return[new O(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new O(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach(s=>{fh(s,e,r)&&n.push(this.A.add(s))}),n}projectRoundWithSkew(e,r){const n=[],{skewX:i,skewY:s,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new O(Math.tan(Te(i)),Math.tan(Te(s))),u=this.strokeProjectionMagnitude,h=l?u/a/Math.sqrt(1/a**2+1/o**2*c.y**2):u/Math.sqrt(1+c.y**2),d=new O(Math.sqrt(Math.max(u**2-h**2,0)),h),f=l?u/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):u/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),m=new O(f,Math.sqrt(Math.max(u**2-f**2,0)));return[m,m.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(v=>this.applySkew(l?v.multiply(this.strokeUniformScalar):v)).forEach(v=>{fh(v,e,r)&&n.push(this.applySkew(this.A).add(v))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const r=this.alpha%Pr==0,n=this.applySkew(this.A),i=e[r?0:2].subtract(n),s=e[r?1:0].subtract(n),o=r?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=_i(i,o)>0,l=a?i:s,c=a?s:i;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Qg extends C1{constructor(e,r,n){super(n),this.A=new O(e),this.T=new O(r)}calcOrthogonalProjection(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,r);return this.scaleUnitVector(Fd(i),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const r=new O(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(r)),this.applySkew(this.A.subtract(r)))}else e.push(...new xi(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const r=new O(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(r),this.A.subtract(r))}else{const r=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(ql(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(n);e.push(i.add(r),i.subtract(r))}return e.map(r=>this.applySkew(r))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const b1=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(t.length===0)return n;const i=t.reduce((s,o)=>(s[s.length-1].eq(o)||s.push(new O(o)),s),[new O(t[0])]);if(i.length===1)r=!0;else if(!r){const s=i[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(i,a=>!a.eq(s));i.splice(o+1)}return i.forEach((s,o,a)=>{let l,c;o===0?(c=a[1],l=r?s:a[a.length-1]):o===a.length-1?(l=a[o-1],c=r?s:a[0]):(l=a[o-1],c=a[o+1]),r&&a.length===1?n.push(...new Qg(s,s,e).project()):!r||o!==0&&o!==a.length-1?n.push(...new xi(s,l,c,e).project()):n.push(...new Qg(s,o===0?c:l,e).project())}),n},Nd=t=>{const e={};return Object.keys(t).forEach(r=>{e[r]={},Object.keys(t[r]).forEach(n=>{e[r][n]=b({},t[r][n])})}),e},T1=t=>t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Jl=t=>{const e=[];for(let r,n=0;n<t.length;n++)(r=jS(t,n))!==!1&&e.push(r);return e},jS=(t,e)=>{const r=t.charCodeAt(e);if(isNaN(r))return"";if(r<55296||r>57343)return t.charAt(e);if(55296<=r&&r<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";const i=t.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const n=t.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var $S=Object.freeze({__proto__:null,capitalize:function(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(t.charAt(0).toUpperCase()).concat(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:T1,graphemeSplit:Jl});const Zl=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.textBackgroundColor!==e.textBackgroundColor||t.deltaY!==e.deltaY||r&&(t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough)},O1=(t,e)=>{const r=e.split(`
`),n=[];let i=-1,s={};t=Nd(t);for(let o=0;o<r.length;o++){const a=Jl(r[o]);if(t[o])for(let l=0;l<a.length;l++){i++;const c=t[o][l];c&&Object.keys(c).length>0&&(Zl(s,c,!0)?n.push({start:i,end:i+1,style:c}):n[n.length-1].end++),s=c||{}}else i+=a.length,s={}}return n},k1=(t,e)=>{if(!Array.isArray(t))return Nd(t);const r=e.split(Od),n={};let i=-1,s=0;for(let o=0;o<r.length;o++){const a=Jl(r[o]);for(let l=0;l<a.length;l++)i++,t[s]&&t[s].start<=i&&i<t[s].end&&(n[o]=n[o]||{},n[o][l]=b({},t[s].style),i===t[s].end-1&&s++)}return n},hn=["display","transform",je,"fill-opacity","fill-rule","opacity",pt,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Jg(t,e){const r=t.nodeName,n=t.getAttribute("class"),i=t.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+r,"i"),e=e.replace(o,""),i&&e.length&&(o=new RegExp("#"+i+s,"i"),e=e.replace(o,"")),n&&e.length){const a=n.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+s,"i"),e=e.replace(o,"")}return e.length===0}function LS(t,e){let r=!0;const n=Jg(t,e.pop());return n&&e.length&&(r=function(i,s){let o,a=!0;for(;i.parentElement&&i.parentElement.nodeType===1&&s.length;)a&&(o=s.pop()),a=Jg(i=i.parentElement,o);return s.length===0}(t,e)),n&&r&&e.length===0}const FS=t=>{var e;return(e=rS[t])!==null&&e!==void 0?e:t},RS=new RegExp("(".concat(Di,")"),"gi"),E1=t=>t.replace(RS," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Zg,ep,tp,rp,np,ip,sp;const Ze="(".concat(Di,")"),IS=String.raw(Zg||(Zg=gr(["(skewX)(",")"],["(skewX)\\(","\\)"])),Ze),BS=String.raw(ep||(ep=gr(["(skewY)(",")"],["(skewY)\\(","\\)"])),Ze),NS=String.raw(tp||(tp=gr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Ze,Ze,Ze),zS=String.raw(rp||(rp=gr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Ze,Ze),HS=String.raw(np||(np=gr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Ze,Ze),WS=String.raw(ip||(ip=gr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Ze,Ze,Ze,Ze,Ze,Ze),zd="(?:".concat(WS,"|").concat(HS,"|").concat(NS,"|").concat(zS,"|").concat(IS,"|").concat(BS,")"),VS="(?:".concat(zd,"*)"),US=String.raw(sp||(sp=gr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),VS),XS=new RegExp(US),YS=new RegExp(zd),GS=new RegExp(zd,"g");function ph(t){const e=[];if(!(t=E1(t).replace(/\s*([()])\s*/gi,"$1"))||t&&!XS.test(t))return[...rt];for(const r of t.matchAll(GS)){const n=YS.exec(r[0]);if(!n)continue;let i=rt;const s=n.filter(m=>!!m),[,o,...a]=s,[l,c,u,h,d,f]=a.map(m=>parseFloat(m));switch(o){case"translate":i=Ii(l,c);break;case kd:i=Bi({angle:l},{x:c,y:u});break;case Ul:i=Yl(l,c);break;case Fi:i=Pd(l);break;case Ri:i=Dd(l);break;case"matrix":i=[l,c,u,h,d,f]}e.push(i)}return Xl(e)}function KS(t,e,r,n){const i=Array.isArray(e);let s,o=e;if(t!==je&&t!==pt||e!==gt){if(t==="strokeUniform")return e==="non-scaling-stroke";if(t==="strokeDashArray")o=e===gt?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(t==="transformMatrix")o=r&&r.transformMatrix?Ae(r.transformMatrix,ph(e)):ph(e);else if(t==="visible")o=e!==gt&&e!=="hidden",r&&r.visible===!1&&(o=!1);else if(t==="opacity")o=parseFloat(e),r&&r.opacity!==void 0&&(o*=r.opacity);else if(t==="textAnchor")o=e==="start"?ee:e==="end"?ke:W;else if(t==="charSpacing")s=Mn(e,n)/n*1e3;else if(t==="paintFirst"){const a=e.indexOf(je),l=e.indexOf(pt);o=je,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=pt)}else{if(t==="href"||t==="xlink:href"||t==="font"||t==="id")return e;if(t==="imageSmoothing")return e==="optimizeQuality";s=i?e.map(Mn):Mn(e,n)}}else o="";return!i&&isNaN(s)?o:s}function qS(t,e){const r=t.match(tS);if(!r)return;const n=r[1],i=r[3],s=r[4],o=r[5],a=r[6];n&&(e.fontStyle=n),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),s&&(e.fontSize=Mn(s)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function QS(t,e){t.replace(/;\s*$/,"").split(";").forEach(r=>{if(!r)return;const[n,i]=r.split(":");e[n.trim().toLowerCase()]=i.trim()})}function JS(t){const e={},r=t.getAttribute("style");return r&&(typeof r=="string"?QS(r,e):function(n,i){Object.entries(n).forEach(s=>{let[o,a]=s;a!==void 0&&(i[o.toLowerCase()]=a)})}(r,e)),e}const ZS={stroke:"strokeOpacity",fill:"fillOpacity"};function jr(t,e,r){if(!t)return{};let n,i={},s=Td;t.parentNode&&Wg.test(t.parentNode.nodeName)&&(i=jr(t.parentElement,e,r),i.fontSize&&(n=s=Mn(i.fontSize)));const o=b(b(b({},e.reduce((c,u)=>{const h=t.getAttribute(u);return h&&(c[u]=h),c},{})),function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={};for(const d in u)LS(c,d.split(" "))&&(h=b(b({},h),u[d]));return h}(t,r)),JS(t));o[Gc]&&t.setAttribute(Gc,o[Gc]),o[Yc]&&(n=Mn(o[Yc],s),o[Yc]="".concat(n));const a={};for(const c in o){const u=FS(c),h=KS(u,o[c],i,n);a[u]=h}a&&a.font&&qS(a.font,a);const l=b(b({},i),a);return Wg.test(t.nodeName)?l:function(c){const u=Ne.getDefaults();return Object.entries(ZS).forEach(h=>{let[d,f]=h;if(c[f]===void 0||c[d]==="")return;if(c[d]===void 0){if(!u[d])return;c[d]=u[d]}if(c[d].indexOf("url(")===0)return;const m=new Z(c[d]);c[d]=m.setAlpha(me(m.getAlpha()*c[f],2)).toRgba()}),c}(l)}const e2=["left","top","width","height","visible"],M1=["rx","ry"];class At extends Ne{static getDefaults(){return b(b({},super.getDefaults()),At.ownDefaults)}constructor(e){super(),Object.assign(this,At.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:r}=this;e&&!r?this.ry=e:r&&!e&&(this.rx=r)}_render(e){const{width:r,height:n}=this,i=-r/2,s=-n/2,o=this.rx?Math.min(this.rx,r/2):0,a=this.ry?Math.min(this.ry,n/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(i+o,s),e.lineTo(i+r-o,s),l&&e.bezierCurveTo(i+r-Lr*o,s,i+r,s+Lr*a,i+r,s+a),e.lineTo(i+r,s+n-a),l&&e.bezierCurveTo(i+r,s+n-Lr*a,i+r-Lr*o,s+n,i+r-o,s+n),e.lineTo(i+o,s+n),l&&e.bezierCurveTo(i+Lr*o,s+n,i,s+n-Lr*a,i,s+n-a),e.lineTo(i,s+a),l&&e.bezierCurveTo(i,s+Lr*a,i+Lr*o,s,i+o,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...M1,...e])}_toSVG(){const{width:e,height:r,rx:n,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-r/2,'" rx="').concat(n,'" ry="').concat(i,'" width="').concat(e,'" height="').concat(r,`" />
`)]}static async fromElement(e,r,n){const i=jr(e,this.ATTRIBUTE_NAMES,n),{left:s=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=i,u=ve(i,e2);return new this(b(b(b({},r),u),{},{left:s,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}S(At,"type","Rect"),S(At,"cacheProperties",[...Ar,...M1]),S(At,"ownDefaults",{rx:0,ry:0}),S(At,"ATTRIBUTE_NAMES",[...hn,"x","y","rx","ry","width","height"]),R.setClass(At),R.setSVGClass(At);const Cr="initialization",fl="added",Hd="removed",gl="imperative",P1=(t,e)=>{const{strokeUniform:r,strokeWidth:n,width:i,height:s,group:o}=e,a=o&&o!==t?so(o.calcTransformMatrix(),t.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),u=r&&c?o1(new O(n,n),void 0,t.calcTransformMatrix()):Ed,h=!r&&c?n:0,d=Gl(i+h,s+h,Xl([a,e.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(d),l.add(d)]};class ec{calcLayoutResult(e,r){if(this.shouldPerformLayout(e))return this.calcBoundingBox(r,e)}shouldPerformLayout(e){let{type:r,prevStrategy:n,strategy:i}=e;return r===Cr||r===gl||!!n&&i!==n}shouldLayoutClipPath(e){let{type:r,target:{clipPath:n}}=e;return r!==Cr&&n&&!n.absolutePositioned}getInitialSize(e,r){return r.size}calcBoundingBox(e,r){const{type:n,target:i}=r;if(n===gl&&r.overrides)return r.overrides;if(e.length===0)return;const{left:s,top:o,width:a,height:l}=hr(e.map(h=>P1(i,h)).reduce((h,d)=>h.concat(d),[])),c=new O(a,l),u=new O(s,o).add(c.scalarDivide(2));if(n===Cr){const h=this.getInitialSize(r,{size:c,center:u});return{center:u,relativeCorrection:new O(0,0),size:h}}return{center:u.transform(i.calcOwnMatrix()),size:c}}}S(ec,"type","strategy");class mh extends ec{shouldPerformLayout(e){return!0}}S(mh,"type","fit-content"),R.setClass(mh);const t2=["strategy"],r2=["target","strategy","bubbles","prevStrategy"],D1="layoutManager";class qs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new mh;S(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const r=b(b({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(r);const n=this.getLayoutResult(r);n&&this.commitLayout(r,n),this.onAfterLayout(r,n),this._prevLayoutStrategy=r.strategy}attachHandlers(e,r){const{target:n}=r;return[ol,Nv,Xs,zv,Vl,Hv,sl,Xw,Yw].map(i=>e.on(i,s=>this.performLayout(i===ol?{type:"object_modified",trigger:i,e:s,target:n}:{type:"object_modifying",trigger:i,e:s,target:n})))}subscribe(e,r){this.unsubscribe(e,r);const n=this.attachHandlers(e,r);this._subscriptions.set(e,n)}unsubscribe(e,r){(this._subscriptions.get(e)||[]).forEach(n=>n()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(r=>this.unsubscribe(r,e))}subscribeTargets(e){e.targets.forEach(r=>this.subscribe(r,e))}onBeforeLayout(e){const{target:r,type:n}=e,{canvas:i}=r;if(n===Cr||n===fl?this.subscribeTargets(e):n===Hd&&this.unsubscribeTargets(e),r.fire("layout:before",{context:e}),i&&i.fire("object:layout:before",{target:r,context:e}),n===gl&&e.deep){const s=ve(e,t2);r.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(b(b({},s),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:r,strategy:n,type:i}=e,s=n.calcLayoutResult(e,r.getObjects());if(!s)return;const o=i===Cr?new O:r.getRelativeCenterPoint(),{center:a,correction:l=new O,relativeCorrection:c=new O}=s,u=o.subtract(a).add(l).transform(i===Cr?rt:xt(r.calcOwnMatrix()),!0).add(c);return{result:s,prevCenter:o,nextCenter:a,offset:u}}commitLayout(e,r){const{target:n}=e,{result:{size:i},nextCenter:s}=r;var o,a;n.set({width:i.x,height:i.y}),this.layoutObjects(e,r),e.type===Cr?n.set({left:(o=e.x)!==null&&o!==void 0?o:s.x+i.x*Pe(n.originX),top:(a=e.y)!==null&&a!==void 0?a:s.y+i.y*Pe(n.originY)}):(n.setPositionByOrigin(s,W,W),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,r){const{target:n}=e;n.forEachObject(i=>{i.group===n&&this.layoutObject(e,r,i)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,r,n.clipPath)}layoutObject(e,r,n){let{offset:i}=r;n.set({left:n.left+i.x,top:n.top+i.y})}onAfterLayout(e,r){const{target:n,strategy:i,bubbles:s,prevStrategy:o}=e,a=ve(e,r2),{canvas:l}=n;n.fire("layout:after",{context:e,result:r}),l&&l.fire("object:layout:after",{context:e,result:r,target:n});const c=n.parent;s&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(n),c.layoutManager.performLayout(b(b({},a),{},{target:c}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(r=>r.forEach(n=>n())),e.clear()}toObject(){return{type:D1,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}R.setClass(qs,D1);const n2=["type","objects","layoutManager"];class i2 extends qs{performLayout(){}}class Tr extends Wv(Ne){static getDefaults(){return b(b({},super.getDefaults()),Tr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),S(this,"_activeObjects",[]),S(this,"__objectSelectionTracker",void 0),S(this,"__objectSelectionDisposer",void 0),Object.assign(this,Tr.ownDefaults),this.setOptions(r),this.groupInit(e,r)}groupInit(e,r){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(i=>{this.enterGroup(i,!1)}),this.layoutManager=(n=r.layoutManager)!==null&&n!==void 0?n:new qs,this.layoutManager.performLayout({type:Cr,target:this,targets:[...e],x:r.left,y:r.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(nn("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(nn("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((r,n,i)=>this.canEnterGroup(r)&&i.indexOf(r)===n)}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const i=this._filterObjectsBeforeEnteringGroup(r),s=super.add(...i);return this._onAfterObjectsChange(fl,i),s}insertAt(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(n),o=super.insertAt(e,...s);return this._onAfterObjectsChange(fl,s),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Hd,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,r){this.exitGroup(e,r),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,r){this.layoutManager.performLayout({type:e,targets:r,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,r){const n=this[e];return super._set(e,r),e==="canvas"&&n!==r&&(this._objects||[]).forEach(i=>{i._set(e,r)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,r){let{target:n}=r;const i=this._activeObjects;if(e)i.push(n),this._set("dirty",!0);else if(i.length>0){const s=i.indexOf(n);s>-1&&(i.splice(s,1),this._set("dirty",!0))}}_watchObject(e,r){e&&this._watchObject(!1,r),e?(r.on("selected",this.__objectSelectionTracker),r.on("deselected",this.__objectSelectionDisposer)):(r.off("selected",this.__objectSelectionTracker),r.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,r){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,r)}_enterGroup(e,r){r&&Pi(e,Ae(xt(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,r){this._exitGroup(e,r),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,r){e._set("group",void 0),r||(Pi(e,Ae(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=Ne.prototype.shouldCache.call(this);if(e){for(let r=0;r<this._objects.length;r++)if(this._objects[r].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e){this._renderBackground(e);for(let n=0;n<this._objects.length;n++){var r;(r=this.canvas)!==null&&r!==void 0&&r.preserveObjectStacking&&this._objects[n].group!==this?(e.save(),e.transform(...xt(this.calcTransformMatrix())),this._objects[n].render(e),e.restore()):this._objects[n].group===this&&this._objects[n].render(e)}this._drawClipPath(e,this.clipPath)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(b({target:this,type:gl},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,r){const n=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const s=i.includeDefaultValues;i.includeDefaultValues=n;const o=i[e||"toObject"](r);return i.includeDefaultValues=s,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=this.layoutManager.toObject();return b(b(b({},super.toObject(["subTargetCheck","interactive",...e])),r.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:r}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const r=At.prototype._toSVG.call(this),n=r.indexOf("COMMON_PARTS");r[n]='for="group" ';const i=r.join("");return e?e(i):i}_toSVG(e){const r=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&r.push("		",n);for(let i=0;i<this._objects.length;i++)r.push("		",this._objects[i].toSVG(e));return r.push(`</g>
`),r}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",r=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),r].join("")}toClipPathSVG(e){const r=[],n=this._createSVGBgRect(e);n&&r.push("	",n);for(let i=0;i<this._objects.length;i++)r.push("	",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(r,{reviver:e})}static fromObject(e,r){let{type:n,objects:i=[],layoutManager:s}=e,o=ve(e,n2);return Promise.all([Mi(i,r),no(o,r)]).then(a=>{let[l,c]=a;const u=new this(l,b(b(b({},o),c),{},{layoutManager:new i2}));if(s){const h=R.getClass(s.type),d=R.getClass(s.strategy);u.layoutManager=new h(new d)}else u.layoutManager=new qs;return u.layoutManager.subscribeTargets({type:Cr,target:u,targets:u.getObjects()}),u.setCoords(),u})}}S(Tr,"type","Group"),S(Tr,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),R.setClass(Tr);const A1=(t,e)=>Math.min(e.width/t.width,e.height/t.height),j1=(t,e)=>Math.max(e.width/t.width,e.height/t.height);var op;const ae="(".concat(Di,")"),s2="(M) (?:".concat(ae," ").concat(ae," ?)+"),o2="(L) (?:".concat(ae," ").concat(ae," ?)+"),a2="(H) (?:".concat(ae," ?)+"),l2="(V) (?:".concat(ae," ?)+"),c2=String.raw(op||(op=gr(["(Z)s*"],["(Z)\\s*"]))),u2="(C) (?:".concat(ae," ").concat(ae," ").concat(ae," ").concat(ae," ").concat(ae," ").concat(ae," ?)+"),h2="(S) (?:".concat(ae," ").concat(ae," ").concat(ae," ").concat(ae," ?)+"),d2="(Q) (?:".concat(ae," ").concat(ae," ").concat(ae," ").concat(ae," ?)+"),f2="(T) (?:".concat(ae," ").concat(ae," ?)+"),g2="(A) (?:".concat(ae," ").concat(ae," ").concat(ae," ([01]) ?([01]) ").concat(ae," ").concat(ae," ?)+"),$1="(?:(?:".concat(s2,")")+"|(?:".concat(o2,")")+"|(?:".concat(a2,")")+"|(?:".concat(l2,")")+"|(?:".concat(c2,")")+"|(?:".concat(u2,")")+"|(?:".concat(h2,")")+"|(?:".concat(d2,")")+"|(?:".concat(f2,")")+"|(?:".concat(g2,"))"),p2={m:"l",M:"L"},m2=(t,e,r,n,i,s,o,a,l,c,u)=>{const h=Zt(t),d=er(t),f=Zt(e),m=er(e),v=r*i*f-n*s*m+o,C=n*i*f+r*s*m+a;return["C",c+l*(-r*i*d-n*s*h),u+l*(-n*i*d+r*s*h),v+l*(r*i*m+n*s*f),C+l*(n*i*m-r*s*f),v,C]},ap=(t,e,r,n)=>{const i=Math.atan2(e,t),s=Math.atan2(n,r);return s>=i?s-i:2*Math.PI-(i-s)};function vh(t,e,r,n,i,s,o,a){let l;if(K.cachesBoundsOfCurve&&(l=[...arguments].join(),bs.boundsOfCurveCache[l]))return bs.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,h=[],d=[[0,0],[0,0]];let f=6*t-12*r+6*i,m=-3*t+9*r-9*i+3*o,v=3*r-3*t;for(let T=0;T<2;++T){if(T>0&&(f=6*e-12*n+6*s,m=-3*e+9*n-9*s+3*a,v=3*n-3*e),u(m)<1e-12){if(u(f)<1e-12)continue;const z=-v/f;0<z&&z<1&&h.push(z);continue}const k=f*f-4*v*m;if(k<0)continue;const E=c(k),P=(-f+E)/(2*m);0<P&&P<1&&h.push(P);const M=(-f-E)/(2*m);0<M&&M<1&&h.push(M)}let C=h.length;const g=C,p=F1(t,e,r,n,i,s,o,a);for(;C--;){const{x:T,y:k}=p(h[C]);d[0][C]=T,d[1][C]=k}d[0][g]=t,d[1][g]=e,d[0][g+1]=o,d[1][g+1]=a;const y=[new O(Math.min(...d[0]),Math.min(...d[1])),new O(Math.max(...d[0]),Math.max(...d[1]))];return K.cachesBoundsOfCurve&&(bs.boundsOfCurveCache[l]=y),y}const v2=(t,e,r)=>{let[n,i,s,o,a,l,c,u]=r;const h=((d,f,m,v,C,g,p)=>{if(m===0||v===0)return[];let y=0,T=0,k=0;const E=Math.PI,P=p*bd,M=er(P),z=Zt(P),B=.5*(-z*d-M*f),Y=.5*(-z*f+M*d),te=m**2,U=v**2,ie=Y**2,V=B**2,ye=te*U-te*ie-U*V;let re=Math.abs(m),j=Math.abs(v);if(ye<0){const x=Math.sqrt(1-ye/(te*U));re*=x,j*=x}else k=(C===g?-1:1)*Math.sqrt(ye/(te*ie+U*V));const H=k*re*Y/j,N=-k*j*B/re,Q=z*H-M*N+.5*d,he=M*H+z*N+.5*f;let mt=ap(1,0,(B-H)/re,(Y-N)/j),se=ap((B-H)/re,(Y-N)/j,(-B-H)/re,(-Y-N)/j);g===0&&se>0?se-=2*E:g===1&&se<0&&(se+=2*E);const Re=Math.ceil(Math.abs(se/E*2)),ze=[],kt=se/Re,_=8/3*Math.sin(kt/4)*Math.sin(kt/4)/Math.sin(kt/2);let w=mt+kt;for(let x=0;x<Re;x++)ze[x]=m2(mt,w,z,M,re,j,Q,he,_,y,T),y=ze[x][5],T=ze[x][6],mt=w,w+=kt;return ze})(c-t,u-e,i,s,a,l,o);for(let d=0,f=h.length;d<f;d++)h[d][1]+=t,h[d][2]+=e,h[d][3]+=t,h[d][4]+=e,h[d][5]+=t,h[d][6]+=e;return h},L1=t=>{let e=0,r=0,n=0,i=0;const s=[];let o,a=0,l=0;for(const c of t){const u=[...c];let h;switch(u[0]){case"l":u[1]+=e,u[2]+=r;case"L":e=u[1],r=u[2],h=["L",e,r];break;case"h":u[1]+=e;case"H":e=u[1],h=["L",e,r];break;case"v":u[1]+=r;case"V":r=u[1],h=["L",e,r];break;case"m":u[1]+=e,u[2]+=r;case"M":e=u[1],r=u[2],n=u[1],i=u[2],h=["M",e,r];break;case"c":u[1]+=e,u[2]+=r,u[3]+=e,u[4]+=r,u[5]+=e,u[6]+=r;case"C":a=u[3],l=u[4],e=u[5],r=u[6],h=["C",u[1],u[2],a,l,e,r];break;case"s":u[1]+=e,u[2]+=r,u[3]+=e,u[4]+=r;case"S":o==="C"?(a=2*e-a,l=2*r-l):(a=e,l=r),e=u[3],r=u[4],h=["C",a,l,u[1],u[2],e,r],a=h[3],l=h[4];break;case"q":u[1]+=e,u[2]+=r,u[3]+=e,u[4]+=r;case"Q":a=u[1],l=u[2],e=u[3],r=u[4],h=["Q",a,l,e,r];break;case"t":u[1]+=e,u[2]+=r;case"T":o==="Q"?(a=2*e-a,l=2*r-l):(a=e,l=r),e=u[1],r=u[2],h=["Q",a,l,e,r];break;case"a":u[6]+=e,u[7]+=r;case"A":v2(e,r,u).forEach(d=>s.push(d)),e=u[6],r=u[7];break;case"z":case"Z":e=n,r=i,h=["Z"]}h?(s.push(h),o=h[0]):o=""}return s},pl=(t,e,r,n)=>Math.sqrt((r-t)**2+(n-e)**2),F1=(t,e,r,n,i,s,o,a)=>l=>{const c=l**3,u=(f=>3*f**2*(1-f))(l),h=(f=>3*f*(1-f)**2)(l),d=(f=>(1-f)**3)(l);return new O(o*c+i*u+r*h+t*d,a*c+s*u+n*h+e*d)},R1=t=>t**2,I1=t=>2*t*(1-t),B1=t=>(1-t)**2,y2=(t,e,r,n,i,s,o,a)=>l=>{const c=R1(l),u=I1(l),h=B1(l),d=3*(h*(r-t)+u*(i-r)+c*(o-i)),f=3*(h*(n-e)+u*(s-n)+c*(a-s));return Math.atan2(f,d)},_2=(t,e,r,n,i,s)=>o=>{const a=R1(o),l=I1(o),c=B1(o);return new O(i*a+r*l+t*c,s*a+n*l+e*c)},x2=(t,e,r,n,i,s)=>o=>{const a=1-o,l=2*(a*(r-t)+o*(i-r)),c=2*(a*(n-e)+o*(s-n));return Math.atan2(c,l)},lp=(t,e,r)=>{let n=new O(e,r),i=0;for(let s=1;s<=100;s+=1){const o=t(s/100);i+=pl(n.x,n.y,o.x,o.y),n=o}return i},w2=(t,e)=>{let r,n=0,i=0,s={x:t.x,y:t.y},o=b({},s),a=.01,l=0;const c=t.iterator,u=t.angleFinder;for(;i<e&&a>1e-4;)o=c(n),l=n,r=pl(s.x,s.y,o.x,o.y),r+i>e?(n-=a,a/=2):(s=o,n+=a,i+=r);return b(b({},o),{},{angle:u(l)})},Wd=t=>{let e,r,n=0,i=0,s=0,o=0,a=0;const l=[];for(const c of t){const u={x:i,y:s,command:c[0],length:0};switch(c[0]){case"M":r=u,r.x=o=i=c[1],r.y=a=s=c[2];break;case"L":r=u,r.length=pl(i,s,c[1],c[2]),i=c[1],s=c[2];break;case"C":e=F1(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),r=u,r.iterator=e,r.angleFinder=y2(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),r.length=lp(e,i,s),i=c[5],s=c[6];break;case"Q":e=_2(i,s,c[1],c[2],c[3],c[4]),r=u,r.iterator=e,r.angleFinder=x2(i,s,c[1],c[2],c[3],c[4]),r.length=lp(e,i,s),i=c[3],s=c[4];break;case"Z":r=u,r.destX=o,r.destY=a,r.length=pl(i,s,o,a),i=o,s=a}n+=r.length,l.push(r)}return l.push({length:n,x:i,y:s}),l},N1=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wd(t),n=0;for(;e-r[n].length>0&&n<r.length-2;)e-=r[n].length,n++;const i=r[n],s=e/i.length,o=t[n];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return b(b({},new O(i.x,i.y).lerp(new O(i.destX,i.destY),s)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return b(b({},new O(i.x,i.y).lerp(new O(o[1],o[2]),s)),{},{angle:Math.atan2(o[2]-i.y,o[1]-i.x)});case"C":case"Q":return w2(i,e)}},S2=new RegExp($1,"gi"),C2=new RegExp($1,"i"),z1=t=>{t=E1(t);const e=[];for(let[r]of t.matchAll(S2)){const n=[];let i;do{if(i=C2.exec(r),!i)break;const s=i.filter(a=>a);s.shift();const o=s.map(a=>{const l=Number.parseFloat(a);return Number.isNaN(l)?a:l});if(n.push(o),s.length<=1)break;s.shift(),r=r.replace(new RegExp("".concat(s.join(" ?")," ?$")),"")}while(i);n.reverse().forEach((s,o)=>{const a=p2[s[0]];o>0&&(a=="l"||a=="L")&&(s[0]=a),e.push(s)})}return e},H1=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=new O(t[0]),n=new O(t[1]),i=1,s=0;const o=[],a=t.length,l=a>2;let c;for(l&&(i=t[2].x<n.x?-1:t[2].x===n.x?0:1,s=t[2].y<n.y?-1:t[2].y===n.y?0:1),o.push(["M",r.x-i*e,r.y-s*e]),c=1;c<a;c++){if(!r.eq(n)){const u=r.midPointFrom(n);o.push(["Q",r.x,r.y,u.x,u.y])}r=t[c],c+1<t.length&&(n=t[c+1])}return l&&(i=r.x>t[c-2].x?1:r.x===t[c-2].x?0:-1,s=r.y>t[c-2].y?1:r.y===t[c-2].y?0:-1),o.push(["L",r.x+i*e,r.y+s*e]),o},Vd=(t,e)=>t.map(r=>r.map((n,i)=>i===0||e===void 0?n:me(n,e)).join(" ")).join(" ");function ml(t,e){const r=t.style;r&&e&&(typeof e=="string"?r.cssText+=";"+e:Object.entries(e).forEach(n=>{let[i,s]=n;return r.setProperty(i,s)}))}const b2=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;function T2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=e.onComplete||En,n=new(Wl()).XMLHttpRequest,i=e.signal,s=function(){n.abort()},o=function(){i&&i.removeEventListener("abort",s),n.onerror=n.ontimeout=En};if(i&&i.aborted)throw new Iv("request");return i&&i.addEventListener("abort",s,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(o(),r(n),n.onreadystatechange=En)},n.onerror=n.ontimeout=o,n.open("get",t,!0),n.send(),n}const O2=(t,e)=>{let r=t._findCenterFromElement();t.transformMatrix&&((n=>{if(n.transformMatrix){const{scaleX:i,scaleY:s,angle:o,skewX:a}=Ei(n.transformMatrix);n.flipX=!1,n.flipY=!1,n.set(nt,i),n.set(Ct,s),n.angle=o,n.skewX=a,n.skewY=0}})(t),r=r.transform(t.transformMatrix)),delete t.transformMatrix,e&&(t.scaleX*=e.scaleX,t.scaleY*=e.scaleY,t.cropX=e.cropX,t.cropY=e.cropY,r.x+=e.offsetLeft,r.y+=e.offsetTop,t.width=e.width,t.height=e.height),t.setPositionByOrigin(r,W,W)};var cp=Object.freeze({__proto__:null,addTransformToObject:i1,animate:Id,animateColor:m1,applyTransformToObject:Pi,calcAngleBetweenVectors:dl,calcDimensionsMatrix:ro,calcPlaneChangeMatrix:so,calcVectorRotation:f1,cancelAnimFrame:Uv,capValue:Fn,composeMatrix:qv,copyCanvasElement:t=>{var e;const r=Me();return r.width=t.width,r.height=t.height,(e=r.getContext("2d"))===null||e===void 0||e.drawImage(t,0,0),r},cos:Zt,createCanvasElement:Me,createImage:Xv,createRotateMatrix:Bi,createScaleMatrix:Yl,createSkewXMatrix:Pd,createSkewYMatrix:Dd,createTranslateMatrix:Ii,createVector:ul,crossProduct:_i,degreesToRadians:Te,dotProduct:g1,ease:oS,enlivenObjectEnlivables:no,enlivenObjects:Mi,findScaleToCover:j1,findScaleToFit:A1,getBoundsOfCurve:vh,getOrthonormalVector:Fd,getPathSegmentsInfo:Wd,getPointOnPath:N1,getPointer:n1,getRandomInt:b2,getRegularPolygonPath:(t,e)=>{const r=2*Math.PI/t;let n=-sn;t%2==0&&(n+=r/2);const i=new Array(t+1);for(let s=0;s<t;s++){const o=s*r+n,{x:a,y:l}=new O(Zt(o),er(o)).scalarMultiply(e);i[s]=[s===0?"M":"L",a,l]}return i[t]=["Z"],i},getSmoothPathFromPoints:H1,getSvgAttributes:t=>{const e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":return e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return e.concat(["offset","stop-color","stop-opacity"])}return e},getUnitVector:ql,groupSVGElements:(t,e)=>t&&t.length===1?t[0]:new Tr(t,e),hasStyleChanged:Zl,invertTransform:xt,isBetweenVectors:fh,isIdentityMatrix:Yv,isTouchEvent:ll,isTransparent:S1,joinPath:Vd,loadImage:Os,magnitude:hl,makeBoundingBoxFromPoints:hr,makePathSimpler:L1,matrixToSVG:Ys,mergeClipPaths:(t,e)=>{var r;let n=t,i=e;n.inverted&&!i.inverted&&(n=e,i=t),dh(i,(r=i.group)===null||r===void 0?void 0:r.calcTransformMatrix(),n.calcTransformMatrix());const s=n.inverted&&i.inverted;return s&&(n.inverted=i.inverted=!1),new Tr([n],{clipPath:i,inverted:s})},multiplyTransformMatrices:Ae,multiplyTransformMatrixArray:Xl,parsePath:z1,parsePreserveAspectRatioAttribute:Qv,parseUnit:Mn,pick:Bn,projectStrokeOnPoints:b1,qrDecompose:Ei,radiansToDegrees:an,removeFromArray:vn,removeTransformFromObject:(t,e)=>{const r=xt(e),n=Ae(r,t.calcOwnMatrix());Pi(t,n)},removeTransformMatrixForSvgParsing:O2,request:T2,requestAnimFrame:Ts,resetObjectTransform:s1,rotatePoint:(t,e,r)=>t.rotate(r,e),rotateVector:Ld,saveObjectTransform:jd,sendObjectToPlane:dh,sendPointToPlane:Pn,sendVectorToPlane:o1,setStyle:ml,sin:er,sizeAfterTransform:Gl,string:$S,stylesFromArray:k1,stylesToArray:O1,toDataURL:Md,toFixed:me,transformPath:(t,e,r)=>(r&&(e=Ae(e,[1,0,0,1,-r.x,-r.y])),t.map(n=>{const i=[...n];for(let s=1;s<n.length-1;s+=2){const{x:o,y:a}=Ye({x:n[s],y:n[s+1]},e);i[s]=o,i[s+1]=a}return i})),transformPoint:Ye});class k2 extends r1{constructor(e){let{allowTouchScrolling:r=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),S(this,"upper",void 0),S(this,"container",void 0);const{el:i}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:r}),this.applyCanvasStyle(s,{allowTouchScrolling:r,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(n),i.parentNode&&i.parentNode.replaceChild(o,i),o.append(i,s),this.container=o}createUpperCanvas(){const{el:e}=this.lower,r=Me();return r.className=e.className,r.classList.remove("lower-canvas"),r.classList.add("upper-canvas"),r.setAttribute("data-fabric","top"),r.style.cssText=e.style.cssText,r.setAttribute("draggable","true"),r}createContainerElement(){const e=Li().createElement("div");return e.setAttribute("data-fabric","wrapper"),ml(e,{position:"relative"}),Bg(e),e}applyCanvasStyle(e,r){const{styles:n,allowTouchScrolling:i}=r;ml(e,b(b({},n),{},{"touch-action":i?"manipulation":gt})),Bg(e)}setDimensions(e,r){super.setDimensions(e,r);const{el:n,ctx:i}=this.upper;t1(n,i,e,r)}setCSSDimensions(e){super.setCSSDimensions(e),uh(this.upper.el,e),uh(this.container,e)}cleanupDOM(e){const r=this.container,{el:n}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),r.removeChild(i),r.removeChild(n),r.parentNode&&r.parentNode.replaceChild(n,r)}dispose(){super.dispose(),fr().dispose(this.upper.el),delete this.upper,delete this.container}}class tc extends io{constructor(){super(...arguments),S(this,"targets",[]),S(this,"_hoveredTargets",[]),S(this,"_objectsToRender",void 0),S(this,"_currentTransform",null),S(this,"_groupSelector",null),S(this,"contextTopDirty",!1)}static getDefaults(){return b(b({},super.getDefaults()),tc.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new k2(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(r=>!r.group&&r!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const r=this.getRetinaScaling(),n=Math.ceil((2*e+1)*r);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(r,r)}isTargetTransparent(e,r,n){const i=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-r+i,-n+i),s.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=o,s.restore();const a=Math.round(i*this.getRetinaScaling());return S1(s,a,a,a)}_isSelectionKeyPressed(e){const r=this.selectionKey;return!!r&&(Array.isArray(r)?!!r.find(n=>!!n&&e[n]===!0):e[r])}_shouldClearSelection(e,r){const n=this.getActiveObjects(),i=this._activeObject;return!!(!r||r&&i&&n.length>1&&n.indexOf(r)===-1&&i!==r&&!this._isSelectionKeyPressed(e)||r&&!r.evented||r&&!r.selectable&&i&&i!==r)}_shouldCenterTransform(e,r,n){if(!e)return;let i;return r===Ul||r===nt||r===Ct||r===Xs?i=this.centeredScaling||e.centeredScaling:r===kd&&(i=this.centeredRotation||e.centeredRotation),i?!n:n}_getOriginFromCorner(e,r){const n={x:e.originX,y:e.originY};return r&&(["ml","tl","bl"].includes(r)?n.x=ke:["mr","tr","br"].includes(r)&&(n.x=ee),["tl","mt","tr"].includes(r)?n.y=ch:["bl","mb","br"].includes(r)&&(n.y=ft)),n}_setupCurrentTransform(e,r,n){var i;const s=r.group?Pn(this.getScenePoint(e),void 0,r.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=r.getActiveControl()||{},l=n&&a?(i=a.getActionHandler(e,r,a))===null||i===void 0?void 0:i.bind(a):eS,c=((f,m,v,C)=>{if(!m||!f)return"drag";const g=C.controls[m];return g.getActionName(v,g,C)})(n,o,e,r),u=e[this.centeredKey],h=this._shouldCenterTransform(r,c,u)?{x:W,y:W}:this._getOriginFromCorner(r,o),d={target:r,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,offsetX:s.x-r.left,offsetY:s.y-r.top,originX:h.x,originY:h.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:Te(r.angle),width:r.width,height:r.height,shiftKey:e.shiftKey,altKey:u,original:b(b({},jd(r)),{},{originX:h.x,originY:h.y})};this._currentTransform=d,this.fire("before:transform",{e,transform:d})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:r,y:n,deltaX:i,deltaY:s}=this._groupSelector,o=new O(r,n).transform(this.viewportTransform),a=new O(r+i,n+s).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),u=Math.min(o.y,a.y),h=Math.max(o.x,a.x),d=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,h-c,d-u)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,h-=l,d-=l,Ne.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,h-c,d-u))}findTarget(e){if(this.skipTargetFind)return;const r=this.getViewportPoint(e),n=this._activeObject,i=this.getActiveObjects();if(this.targets=[],n&&i.length>=1){if(n.findControl(r,ll(e))||i.length>1&&this.searchPossibleTargets([n],r))return n;if(n===this.searchPossibleTargets([n],r)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,r);return e[this.altSelectionKey]&&o&&o!==n?(this.targets=s,n):o}return n}}return this.searchPossibleTargets(this._objects,r)}_pointIsInObjectSelectionArea(e,r){let n=e.getCoords();const i=this.getZoom(),s=e.padding/i;if(s){const[o,a,l,c]=n,u=Math.atan2(a.y-o.y,a.x-o.x),h=Zt(u)*s,d=er(u)*s,f=h+d,m=h-d;n=[new O(o.x-m,o.y-f),new O(a.x+f,a.y-m),new O(l.x+m,l.y+f),new O(c.x-f,c.y+m)]}return _e.isPointInPolygon(r,n)}_checkTarget(e,r){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Pn(r,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,r.x,r.y)))}_searchPossibleTargets(e,r){let n=e.length;for(;n--;){const i=e[n];if(this._checkTarget(i,r)){if(Aa(i)&&i.subTargetCheck){const s=this._searchPossibleTargets(i._objects,r);s&&this.targets.push(s)}return i}}}searchPossibleTargets(e,r){const n=this._searchPossibleTargets(e,r);if(n&&Aa(n)&&n.interactive&&this.targets[0]){const i=this.targets;for(let s=i.length-1;s>0;s--){const o=i[s];if(!Aa(o)||!o.interactive)return o}return i[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,i=n.getBoundingClientRect();let s=n1(e),o=i.width||0,a=i.height||0;o&&a||(ft in i&&ch in i&&(a=Math.abs(i.top-i.bottom)),ke in i&&ee in i&&(o=Math.abs(i.right-i.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,r||(s=Pn(s,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(s.x/=l,s.y/=l);const c=o===0||a===0?new O(1,1):new O(n.width/o,n.height/a);return s.multiply(c)}_setDimensionsImpl(e,r){this._resetTransformEventData(),super._setDimensionsImpl(e,r),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Me(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return yn(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,r){let n=!1,i=!1;const s=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{s.includes(l)||(n=!0,l.fire("deselected",{e:r,target:l}),a.push(l))}),s.forEach(l=>{e.includes(l)||(n=!0,l.fire("selected",{e:r,target:l}),o.push(l))}),e.length>0&&s.length>0?(i=!0,n&&this.fire("selection:updated",{e:r,selected:o,deselected:a})):s.length>0?(i=!0,this.fire("selection:created",{e:r,selected:o})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:r,deselected:a})),i&&(this._objectsToRender=void 0)}setActiveObject(e,r){const n=this.getActiveObjects(),i=this._setActiveObject(e,r);return this._fireSelectionEvents(n,r),i}_setActiveObject(e,r){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(r,e)&&this._activeObject)&&!e.onSelect({e:r})&&(this._activeObject=e,yn(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,r){const n=this._activeObject;return!!n&&!n.onDeselect({e,object:r})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),yn(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const r=this.getActiveObjects(),n=this.getActiveObject();r.length&&this.fire("before:selection:cleared",{e,deselected:[n]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(r,e),i}endCurrentTransform(e){const r=this._currentTransform;this._finalizeCurrentTransform(e),r&&r.target&&(r.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const r=this._currentTransform,n=r.target,i={e,target:n,transform:r,action:r.action};n._scaling&&(n._scaling=!1),n.setCoords(),r.actionPerformed&&(this.fire("object:modified",i),n.fire(ol,i))}setViewportTransform(e){super.setViewportTransform(e);const r=this._activeObject;r&&r.setCoords()}destroy(){const e=this._activeObject;yn(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const r=this._activeObject;r&&r._renderControls(e)}_toObject(e,r,n){const i=this._realizeGroupTransformOnObject(e),s=super._toObject(e,r,n);return e.set(i),s}_realizeGroupTransformOnObject(e){const{group:r}=e;if(r&&yn(r)&&this._activeObject===r){const n=Bn(e,["angle","flipX","flipY",ee,nt,Ct,Fi,Ri,ft]);return i1(e,r.calcOwnMatrix()),n}return{}}_setSVGObject(e,r,n){const i=this._realizeGroupTransformOnObject(r);super._setSVGObject(e,r,n),r.set(i)}}S(tc,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class E2{constructor(e){S(this,"targets",[]),S(this,"__disposer",void 0);const r=()=>{const{hiddenTextarea:i}=e.getActiveObject()||{};i&&i.focus()},n=e.upperCanvasEl;n.addEventListener("click",r),this.__disposer=()=>n.removeEventListener("click",r)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),vn(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var r;!((r=this.target)===null||r===void 0)&&r.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const M2=["target","oldTarget","fireCanvas","e"],vt={passive:!1},Gn=(t,e)=>{const r=t.getViewportPoint(e),n=t.getScenePoint(e);return{viewportPoint:r,scenePoint:n,pointer:r,absolutePointer:n}},Fr=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.addEventListener(...r)},Mt=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.removeEventListener(...r)},P2={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class yh extends tc{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),S(this,"_isClick",void 0),S(this,"textEditingManager",new E2(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(r=>{this[r]=this[r].bind(this)}),this.addOrRemove(Fr,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,r){const n=this.upperCanvasEl,i=this._getEventPrefix();e(e1(n),"resize",this._onResize),e(n,i+"down",this._onMouseDown),e(n,"".concat(i,"move"),this._onMouseMove,vt),e(n,"".concat(i,"out"),this._onMouseOut),e(n,"".concat(i,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,vt)}removeListeners(){this.addOrRemove(Mt,"remove");const e=this._getEventPrefix(),r=Gt(this.upperCanvasEl);Mt(r,"".concat(e,"up"),this._onMouseUp),Mt(r,"touchend",this._onTouchEnd,vt),Mt(r,"".concat(e,"move"),this._onMouseMove,vt),Mt(r,"touchmove",this._onMouseMove,vt)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const r=this._hoveredTarget,n=b({e},Gn(this,e));this.fire("mouse:out",b(b({},n),{},{target:r})),this._hoveredTarget=void 0,r&&r.fire("mouseout",b({},n)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",b(b({},n),{},{target:i})),i&&i.fire("mouseout",b({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",b({e},Gn(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const r=this.getActiveObject();if(r&&r.onDragStart(e)){this._dragSource=r;const n={e,target:r};return this.fire("dragstart",n),r.fire("dragstart",n),void Fr(this.upperCanvasEl,"drag",this._onDragProgress)}hh(e)}_renderDragEffects(e,r,n){let i=!1;const s=this._dropTarget;s&&s!==r&&s!==n&&(s.clearContextTop(),i=!0),r==null||r.clearContextTop(),n!==r&&(n==null||n.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),r&&(o.save(),r.transform(o),r.renderDragSourceEffect(e),o.restore(),i=!0),n&&(o.save(),n.transform(o),n.renderDropTargetEffect(e),o.restore(),i=!0),o.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const r=!!e.dataTransfer&&e.dataTransfer.dropEffect!==gt,n=r?this._activeObject:void 0,i={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:r,dropTarget:n};Mt(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const r={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",r),this._dragSource&&this._dragSource.fire("drag",r)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const r="dragover",{target:n,targets:i}=this.findDragTargets(e),s=this._dragSource,o={e,target:n,subTargets:i,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(r,o),this._fireEnterLeaveEvents(n,o),n&&(n.canDrop(e)&&(a=n),n.fire(r,o));for(let l=0;l<i.length;l++){const c=i[l];c.canDrop(e)&&(a=c),c.fire(r,o)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{target:r,targets:n}=this.findDragTargets(e),i={e,target:r,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(r,i)}_onDragLeave(e){const r={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",r),this._fireEnterLeaveEvents(void 0,r),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:r,targets:n}=this.findDragTargets(e),i=this._basicEventHandler("drop:before",b({e,target:r,subTargets:n,dragSource:this._dragSource},Gn(this,e)));i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const r=this.findTarget(e),n=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e,target:r,subTargets:n});return this.stopContextMenu&&hh(e),this._basicEventHandler("contextmenu",i),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const r=e.changedTouches;return r?r[0]&&r[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){e.preventDefault(),this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),this._resetTransformEventData();const r=this.upperCanvasEl,n=this._getEventPrefix(),i=Gt(r);Fr(i,"touchend",this._onTouchEnd,vt),Fr(i,"touchmove",this._onMouseMove,vt),Mt(r,"".concat(n,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const r=this.upperCanvasEl,n=this._getEventPrefix();Mt(r,"".concat(n,"move"),this._onMouseMove,vt);const i=Gt(r);Fr(i,"".concat(n,"up"),this._onMouseUp),Fr(i,"".concat(n,"move"),this._onMouseMove,vt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const r=this._getEventPrefix(),n=Gt(this.upperCanvasEl);Mt(n,"touchend",this._onTouchEnd,vt),Mt(n,"touchmove",this._onMouseMove,vt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Fr(this.upperCanvasEl,"".concat(r,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const r=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const i=Gt(this.upperCanvasEl);Mt(i,"".concat(n,"up"),this._onMouseUp),Mt(i,"".concat(n,"move"),this._onMouseMove,vt),Fr(r,"".concat(n,"move"),this._onMouseMove,vt)}}_onMouseMove(e){const r=this.getActiveObject();!this.allowTouchScrolling&&(!r||!r.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const r=this.getActiveObject();return!!r!=!!e||r&&e&&r!==e}__onMouseUp(e){var r;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,i=this._isClick,s=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(n&&(this._finalizeCurrentTransform(e),c=n.actionPerformed),!i){const u=s===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(s)||!u&&s===this._activeObject)}if(s){const u=s.findControl(this.getViewportPoint(e),ll(e)),{key:h,control:d}=u||{};if(l=h,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),c=!0;else if(d){const f=d.getMouseUpHandler(e,s,d);f&&(a=this.getScenePoint(e),f.call(d,e,n,a.x,a.y))}s.isMoving=!1}if(n&&(n.target!==s||n.corner!==l)){const u=n.target&&n.target.controls[n.corner],h=u&&u.getMouseUpHandler(e,n.target,u);a=a||this.getScenePoint(e),h&&h.call(u,e,n,a.x,a.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),c?this.requestRenderAll():i||(r=this._activeObject)!==null&&r!==void 0&&r.isEditing||this.renderTop()}_basicEventHandler(e,r){const{target:n,subTargets:i=[]}=r;this.fire(e,r),n&&n.fire(e,r);for(let s=0;s<i.length;s++)i[s]!==n&&i[s].fire(e,r);return r}_handleEvent(e,r){const n=this._target,i=this.targets||[],s=b(b({e,target:n,subTargets:i},Gn(this,e)),{},{transform:this._currentTransform},r==="up:before"||r==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(r),s),n&&n.fire("mouse".concat(r),s);for(let o=0;o<i.length;o++)i[o]!==n&&i[o].fire("mouse".concat(r),s)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const r=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(r,{e,pointer:r}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const r=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(r,{e,pointer:r})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const r=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:r}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let r=this._target;const{button:n}=e;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let i=this._shouldRender(r),s=!1;if(this.handleMultiSelection(e,r)?(r=this._activeObject,s=!0,i=!0):this._shouldClearSelection(e,r)&&this.discardActiveObject(e),this.selection&&(!r||!r.selectable&&!r.isEditing&&r!==this._activeObject)){const o=this.getScenePoint(e);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(r){const o=r===this._activeObject;r.selectable&&r.activeOn==="down"&&this.setActiveObject(r,e);const a=r.findControl(this.getViewportPoint(e),ll(e));if(r===this._activeObject&&(a||!s)){this._setupCurrentTransform(e,r,o);const l=a?a.control:void 0,c=this.getScenePoint(e),u=l&&l.getMouseDownHandler(e,r,l);u&&u.call(l,e,this._currentTransform,c.x,c.y)}}i&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),i&&this.requestRenderAll()}_resetTransformEventData(){this._target=void 0,this._pointer=void 0,this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Pn(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const r=this._groupSelector;if(r){const n=this.getScenePoint(e);r.deltaX=n.x-r.x,r.deltaY=n.y-r.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,r){const n=this._hoveredTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:r,oldTarget:n,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:i[a]});this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,r){const n=this._draggedoverTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("drag",b(b({},r),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",b(b({},r),{},{target:s[a],oldTarget:i[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,r){let{target:n,oldTarget:i,fireCanvas:s,e:o}=r,a=ve(r,M2);const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:h}=P2[e],d=i!==n;if(i&&d){const f=b(b({},a),{},{e:o,target:i,nextTarget:n},Gn(this,o));s&&this.fire(h,f),i.fire(c,f)}if(n&&d){const f=b(b({},a),{},{e:o,target:n,previousTarget:i},Gn(this,o));s&&this.fire(u,f),n.fire(l,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const r=this.getScenePoint(e),n=this._currentTransform,i=n.target,s=i.group?Pn(r,void 0,i.group.calcTransformMatrix()):r;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,s),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,r,n){const{action:i,actionHandler:s,target:o}=r,a=!!s&&s(e,r,n.x,n.y);a&&o.setCoords(),i==="drag"&&a&&(r.target.isMoving=!0,this.setCursor(r.target.moveCursor||this.moveCursor)),r.actionPerformed=r.actionPerformed||a}_setCursorFromEvent(e,r){if(!r)return void this.setCursor(this.defaultCursor);let n=r.hoverCursor||this.hoverCursor;const i=yn(this._activeObject)?this._activeObject:null,s=(!i||r.group!==i)&&r.findControl(this.getViewportPoint(e));if(s){const o=s.control;this.setCursor(o.cursorStyleHandler(e,o,r))}else r.subTargetCheck&&this.targets.concat().reverse().map(o=>{n=o.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,r){const n=this._activeObject,i=yn(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&r&&r.selectable&&(n!==r||i)&&(i||!r.isDescendantOf(n)&&!n.isDescendantOf(r))&&!r.onSelect({e})&&!n.getActiveControl()){if(i){const s=n.getObjects();if(r===n){const o=this.getViewportPoint(e);if(!(r=this.searchPossibleTargets(s,o)||this.searchPossibleTargets(this._objects,o))||!r.selectable)return!1}r.group===n?(n.remove(r),this._hoveredTarget=r,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(r),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{n.exitEditing&&n.exitEditing();const s=new(R.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(n,r),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:r,y:n,deltaX:i,deltaY:s}=this._groupSelector,o=new O(r,n),a=o.add(new O(i,s)),l=o.min(a),c=o.max(a).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),h=o.eq(a)?u[0]?[u[0]]:[]:u.length>1?u.filter(d=>!d.onSelect({e})).reverse():u;if(h.length===1)this.setActiveObject(h[0],e);else if(h.length>1){const d=R.getClass("ActiveSelection");this.setActiveObject(new d(h,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const W1={x1:0,y1:0,x2:0,y2:0},D2=b(b({},W1),{},{r1:0,r2:0}),hi=(t,e)=>isNaN(t)&&typeof e=="number"?e:t,A2=/^(\d+\.\d+)%|(\d+)%$/;function V1(t){return t&&A2.test(t)}function U1(t,e){const r=typeof t=="number"?t:typeof t=="string"?parseFloat(t)/(V1(t)?100:1):NaN;return Fn(0,hi(r,e),1)}const j2=/\s*;\s*/,$2=/\s*:\s*/;function L2(t,e){let r,n;const i=t.getAttribute("style");if(i){const o=i.split(j2);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split($2).map(u=>u.trim());l==="stop-color"?r=c:l==="stop-opacity"&&(n=c)}}const s=new Z(r||t.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:U1(t.getAttribute("offset"),0),color:s.toRgb(),opacity:hi(parseFloat(n||t.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function F2(t,e){const r=[],n=t.getElementsByTagName("stop"),i=U1(e,1);for(let s=n.length;s--;)r.push(L2(n[s],i));return r}function X1(t){return t.nodeName==="linearGradient"||t.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Y1(t){return t.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Ht(t,e){return t.getAttribute(e)}function R2(t,e){return function(r,n){let i,{width:s,height:o,gradientUnits:a}=n;return Object.keys(r).reduce((l,c)=>{const u=r[c];return u==="Infinity"?i=1:u==="-Infinity"?i=0:(i=typeof u=="string"?parseFloat(u):u,typeof u=="string"&&V1(u)&&(i*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(i*=s),c!=="y1"&&c!=="y2"||(i*=o)))),l[c]=i,l},{})}(X1(t)==="linear"?function(r){return{x1:Ht(r,"x1")||0,y1:Ht(r,"y1")||0,x2:Ht(r,"x2")||"100%",y2:Ht(r,"y2")||0}}(t):function(r){return{x1:Ht(r,"fx")||Ht(r,"cx")||"50%",y1:Ht(r,"fy")||Ht(r,"cy")||"50%",r1:0,x2:Ht(r,"cx")||"50%",y2:Ht(r,"cy")||"50%",r2:Ht(r,"r")||"50%"}}(t),b(b({},e),{},{gradientUnits:Y1(t)}))}class Yo{constructor(e){const{type:r="linear",gradientUnits:n="pixels",coords:i={},colorStops:s=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:r,gradientUnits:n,coords:b(b({},r==="radial"?D2:W1),i),colorStops:s,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(on()):on()})}addColorStop(e){for(const r in e){const n=new Z(e[r]);this.colorStops.push({offset:parseFloat(r),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return b(b({},Bn(this,e)),{},{type:this.type,coords:b({},this.coords),colorStops:this.colorStops.map(r=>b({},r)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],i=this.gradientTransform?this.gradientTransform.concat():rt.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(h=>b({},h)).sort((h,d)=>h.offset-d.offset);let a=-this.offsetX,l=-this.offsetY;var c;s==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),i[4]-=a,i[5]-=l;const u=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(r?r+" ":"").concat(Ys(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:h,y1:d,x2:f,y2:m}=this.coords;n.push("<linearGradient ",u,' x1="',h,'" y1="',d,'" x2="',f,'" y2="',m,`">
`)}else if(this.type==="radial"){const{x1:h,y1:d,x2:f,y2:m,r1:v,r2:C}=this.coords,g=v>C;n.push("<radialGradient ",u,' cx="',g?h:f,'" cy="',g?d:m,'" r="',g?v:C,'" fx="',g?f:h,'" fy="',g?m:d,`">
`),g&&(o.reverse(),o.forEach(y=>{y.offset=1-y.offset}));const p=Math.min(v,C);if(p>0){const y=p/Math.max(v,C);o.forEach(T=>{T.offset+=y*(1-T.offset)})}}return o.forEach(h=>{let{color:d,offset:f,opacity:m}=h;n.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',d,m!==void 0?";stop-opacity: "+m:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){const{x1:r,y1:n,x2:i,y2:s,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(r,n,i,s):e.createRadialGradient(r,n,o,i,s,a);return this.colorStops.forEach(c=>{let{color:u,opacity:h,offset:d}=c;l.addColorStop(d,h!==void 0?new Z(u).setAlpha(h).toRgba():u)}),l}static async fromObject(e){const{colorStops:r,gradientTransform:n}=e;return new this(b(b({},e),{},{colorStops:r?r.map(i=>b({},i)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,r,n){const i=Y1(e),s=r._findCenterFromElement();return new this(b({id:e.getAttribute("id")||void 0,type:X1(e),coords:R2(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:F2(e,n.opacity),gradientUnits:i,gradientTransform:ph(e.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:r.width/2-s.x,offsetY:r.height/2-s.y}:{offsetX:0,offsetY:0}))}}S(Yo,"type","Gradient"),R.setClass(Yo,"gradient"),R.setClass(Yo,"linear"),R.setClass(Yo,"radial");const I2=["type","source","patternTransform"];class Jc{get type(){return"pattern"}set type(e){nn("warn","Setting type has no effect",e)}constructor(e){S(this,"repeat","repeat"),S(this,"offsetX",0),S(this,"offsetY",0),S(this,"crossOrigin",""),this.id=on(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:r,crossOrigin:n}=this;return b(b({},Bn(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:r,crossOrigin:n,offsetX:me(this.offsetX,K.NUM_FRACTION_DIGITS),offsetY:me(this.offsetY,K.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:r,height:n}=e;const{source:i,repeat:s,id:o}=this,a=hi(this.offsetX/r,0),l=hi(this.offsetY/n,0),c=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):hi(i.width/r,0),u=s==="repeat-x"||s==="no-repeat"?1+Math.abs(l||0):hi(i.height/n,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,r){let{type:n,source:i,patternTransform:s}=e,o=ve(e,I2);const a=await Os(i,b(b({},r),{},{crossOrigin:o.crossOrigin}));return new this(b(b({},o),{},{patternTransform:s&&s.slice(0),source:a}))}}S(Jc,"type","Pattern"),R.setClass(Jc),R.setClass(Jc,"pattern");class B2{constructor(e){S(this,"color","rgb(0, 0, 0)"),S(this,"width",1),S(this,"shadow",null),S(this,"strokeLineCap","round"),S(this,"strokeLineJoin","round"),S(this,"strokeMiterLimit",10),S(this,"strokeDashArray",null),S(this,"limitedToCanvasSize",!1),this.canvas=e}_setBrushStyles(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])}_saveAndTransform(e){const r=this.canvas.viewportTransform;e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}needsFullRender(){return new Z(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const e=this.canvas,r=this.shadow,n=e.contextTop,i=e.getZoom()*e.getRetinaScaling();n.shadowColor=r.color,n.shadowBlur=r.blur*i,n.shadowOffsetX=r.offsetX*i,n.shadowOffsetY=r.offsetY*i}_resetShadow(){const e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}_isOutSideCanvas(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}const N2=["path","left","top"],z2=["d"];class Hr extends Ne{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:i,top:s}=r,o=ve(r,N2);super(),Object.assign(this,Hr.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof i=="number"&&this.set(ee,i),typeof s=="number"&&this.set(ft,s)}_setPath(e,r){this.path=L1(Array.isArray(e)?e:z1(e)),this.setBoundingBox(r)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new O(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const r=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const i of this.path)switch(i[0]){case"L":e.lineTo(i[1]+r,i[2]+n);break;case"M":e.moveTo(i[1]+r,i[2]+n);break;case"C":e.bezierCurveTo(i[1]+r,i[2]+n,i[3]+r,i[4]+n,i[5]+r,i[6]+n);break;case"Q":e.quadraticCurveTo(i[1]+r,i[2]+n,i[3]+r,i[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return b(b({},super.toObject(e)),{},{path:this.path.map(r=>r.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=this.toObject(e);return this.sourcePath&&(delete r.path,r.sourcePath=this.sourcePath),r}_toSVG(){const e=Vd(this.path,K.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=K.NUM_FRACTION_DIGITS;return" translate(".concat(me(-this.pathOffset.x,e),", ").concat(me(-this.pathOffset.y,e),")")}toClipPathSVG(e){const r=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:r})}toSVG(e){const r=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:r})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:r,height:n,pathOffset:i}=this._calcDimensions();this.set({width:r,height:n,pathOffset:i}),e&&this.setPositionByOrigin(i,W,W)}_calcBoundsFromPath(){const e=[];let r=0,n=0,i=0,s=0;for(const o of this.path)switch(o[0]){case"L":i=o[1],s=o[2],e.push(new O(r,n),new O(i,s));break;case"M":i=o[1],s=o[2],r=i,n=s;break;case"C":e.push(...vh(i,s,o[1],o[2],o[3],o[4],o[5],o[6])),i=o[5],s=o[6];break;case"Q":e.push(...vh(i,s,o[1],o[2],o[1],o[2],o[3],o[4])),i=o[3],s=o[4];break;case"Z":i=r,s=n}return hr(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return b(b({},e),{},{pathOffset:new O(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,r,n){const i=jr(e,this.ATTRIBUTE_NAMES,n),{d:s}=i;return new this(s,b(b(b({},ve(i,z2)),r),{},{left:void 0,top:void 0}))}}S(Hr,"type","Path"),S(Hr,"cacheProperties",[...Ar,"path","fillRule"]),S(Hr,"ATTRIBUTE_NAMES",[...hn,"d"]),R.setClass(Hr),R.setSVGClass(Hr);class vl extends B2{constructor(e){super(e),S(this,"decimate",.4),S(this,"drawStraightLine",!1),S(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(e,r,n){const i=r.midPointFrom(n);return e.quadraticCurveTo(r.x,r.y,i.x,i.y),i}onMouseDown(e,r){let{e:n}=r;this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],this._prepareForDrawing(e),this._addPoint(e),this._render())}onMouseMove(e,r){let{e:n}=r;if(this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(e))&&this._addPoint(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const i=this._points,s=i.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=vl.drawSegment(o,i[s-2],i[s-1]),o.stroke(),o.restore()}}onMouseUp(e){let{e:r}=e;return!this.canvas._isMainEvent(r)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(e){this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)}_addPoint(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,r=this._points[0],n=this._points[1];if(this._saveAndTransform(e),e.beginPath(),this._points.length===2&&r.x===n.x&&r.y===n.y){const i=this.width/1e3;r.x-=i,n.x+=i}e.moveTo(r.x,r.y);for(let i=1;i<this._points.length;i++)vl.drawSegment(e,r,n),r=this._points[i],n=this._points[i+1];e.lineTo(r.x,r.y),e.stroke(),e.restore()}convertPointsToSVGPath(e){const r=this.width/1e3;return H1(e,r)}createPath(e){const r=new Hr(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new dr(this.shadow)),r}decimatePoints(e,r){if(e.length<=2)return e;let n,i=e[0];const s=this.canvas.getZoom(),o=Math.pow(r/s,2),a=e.length-1,l=[i];for(let c=1;c<a-1;c++)n=Math.pow(i.x-e[c].x,2)+Math.pow(i.y-e[c].y,2),n>=o&&(i=e[c],l.push(i));return l.push(e[a]),l}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const e=this.convertPointsToSVGPath(this._points);if(function(n){return Vd(n)==="M 0 0 Q 0 0 0 0 L 0 0"}(e))return void this.canvas.requestRenderAll();const r=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:r}),this.canvas.add(r),this.canvas.requestRenderAll(),r.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:r})}}const H2=["left","top","radius"],G1=["radius","startAngle","endAngle","counterClockwise"];class ir extends Ne{static getDefaults(){return b(b({},super.getDefaults()),ir.ownDefaults)}constructor(e){super(),Object.assign(this,ir.ownDefaults),this.setOptions(e)}_set(e,r){return super._set(e,r),e==="radius"&&this.setRadius(r),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Te(this.startAngle),Te(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(nt)}getRadiusY(){return this.get("radius")*this.get(Ct)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...G1,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:r}=this,n=Te(this.startAngle),i=Te(this.endAngle),s=Zt(n)*r,o=er(n)*r,a=Zt(i)*r,l=er(i)*r,c=e>180?1:0,u=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(o," A ").concat(r," ").concat(r," 0 ").concat(c," ").concat(u," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,r,n){const i=jr(e,this.ATTRIBUTE_NAMES,n),{left:s=0,top:o=0,radius:a=0}=i;return new this(b(b({},ve(i,H2)),{},{radius:a,left:s-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}S(ir,"type","Circle"),S(ir,"cacheProperties",[...Ar,...G1]),S(ir,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),S(ir,"ATTRIBUTE_NAMES",["cx","cy","r",...hn]),R.setClass(ir),R.setSVGClass(ir);const W2=["x1","y1","x2","y2"],V2=["x1","y1","x2","y2"],_h=["x1","x2","y1","y2"];class _n extends Ne{constructor(){let[e,r,n,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,_n.ownDefaults),this.setOptions(s),this.x1=e,this.x2=n,this.y1=r,this.y2=i,this._setWidthHeight();const{left:o,top:a}=s;typeof o=="number"&&this.set(ee,o),typeof a=="number"&&this.set(ft,a)}_setWidthHeight(){const{x1:e,y1:r,x2:n,y2:i}=this;this.width=Math.abs(n-e),this.height=Math.abs(i-r);const{left:s,top:o,width:a,height:l}=hr([{x:e,y:r},{x:n,y:i}]),c=new O(s+a/2,o+l/2);this.setPositionByOrigin(c,W,W)}_set(e,r){return super._set(e,r),_h.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const r=this.calcLinePoints();e.moveTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var i;jt(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new O((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return b(b({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:r,y1:n,y2:i,width:s,height:o}=this,a=e<=r?-1:1,l=n<=i?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:r,y1:n,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(r,'" y2="').concat(i,`" />
`)]}static async fromElement(e,r,n){const i=jr(e,this.ATTRIBUTE_NAMES,n),{x1:s=0,y1:o=0,x2:a=0,y2:l=0}=i;return new this([s,o,a,l],ve(i,W2))}static fromObject(e){let{x1:r,y1:n,x2:i,y2:s}=e,o=ve(e,V2);return this._fromObject(b(b({},o),{},{points:[r,n,i,s]}),{extraParam:"points"})}}S(_n,"type","Line"),S(_n,"cacheProperties",[...Ar,..._h]),S(_n,"ATTRIBUTE_NAMES",hn.concat(_h)),R.setClass(_n),R.setSVGClass(_n);class Ur extends Ne{static getDefaults(){return b(b({},super.getDefaults()),Ur.ownDefaults)}constructor(e){super(),Object.assign(this,Ur.ownDefaults),this.setOptions(e)}_render(e){const r=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-r,n),e.lineTo(0,-n),e.lineTo(r,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,r=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(r,",0 ").concat(-r,",").concat(e," ").concat(r),'" />']}}S(Ur,"type","Triangle"),S(Ur,"ownDefaults",{width:100,height:100}),R.setClass(Ur),R.setSVGClass(Ur);const K1=["rx","ry"];class xr extends Ne{static getDefaults(){return b(b({},super.getDefaults()),xr.ownDefaults)}constructor(e){super(),Object.assign(this,xr.ownDefaults),this.setOptions(e)}_set(e,r){switch(super._set(e,r),e){case"rx":this.rx=r,this.set("width",2*r);break;case"ry":this.ry=r,this.set("height",2*r)}return this}getRx(){return this.get("rx")*this.get(nt)}getRy(){return this.get("ry")*this.get(Ct)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...K1,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Pr,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,r,n){const i=jr(e,this.ATTRIBUTE_NAMES,n);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}function U2(t){if(!t)return[];const e=t.replace(/,/g," ").trim().split(/\s+/),r=[];for(let n=0;n<e.length;n+=2)r.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return r}S(xr,"type","Ellipse"),S(xr,"cacheProperties",[...Ar,...K1]),S(xr,"ownDefaults",{rx:0,ry:0}),S(xr,"ATTRIBUTE_NAMES",[...hn,"cx","cy","rx","ry"]),R.setClass(xr),R.setSVGClass(xr);const X2=["left","top"],q1={exactBoundingBox:!1};class Xt extends Ne{static getDefaults(){return b(b({},super.getDefaults()),Xt.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),S(this,"strokeDiff",void 0),Object.assign(this,Xt.ownDefaults),this.setOptions(r),this.points=e;const{left:n,top:i}=r;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(ee,n),typeof i=="number"&&this.set(ft,i)}isOpen(){return!0}_projectStrokeOnPoints(e){return b1(this.points,e,this.isOpen())}_calcDimensions(e){e=b({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const r=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(r.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new O,strokeOffset:new O,strokeDiff:new O};const n=hr(r),i=ro(b(b({},e),{},{scaleX:1,scaleY:1})),s=hr(this.points.map(c=>Ye(c,i,!0))),o=new O(this.scaleX,this.scaleY);let a=n.left+n.width/2,l=n.top+n.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(Te(this.skewX)),l-=a*Math.tan(Te(this.skewY))),b(b({},n),{},{pathOffset:new O(a,l),strokeOffset:new O(s.left,s.top).subtract(new O(n.left,n.top)).multiply(o),strokeDiff:new O(n.width,n.height).subtract(new O(s.width,s.height)).multiply(o)})}_findCenterFromElement(){const e=hr(this.points);return new O(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:r,top:n,width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new O(r+i/2,n+s/2),W,W)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new O(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var r,n;const{width:a,height:l}=this._calcDimensions(e);o=new O((r=e.width)!==null&&r!==void 0?r:a,(n=e.height)!==null&&n!==void 0?n:l)}else{var i,s;o=new O((i=e.width)!==null&&i!==void 0?i:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return o.multiply(new O(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,r){const n=this.initialized&&this[e]!==r,i=super._set(e,r);return this.exactBoundingBox&&n&&((e===nt||e===Ct)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return b(b({},super.toObject(e)),{},{points:this.points.map(r=>{let{x:n,y:i}=r;return{x:n,y:i}})})}_toSVG(){const e=[],r=this.pathOffset.x,n=this.pathOffset.y,i=K.NUM_FRACTION_DIGITS;for(let s=0,o=this.points.length;s<o;s++)e.push(me(this.points[s].x-r,i),",",me(this.points[s].y-n,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const r=this.points.length,n=this.pathOffset.x,i=this.pathOffset.y;if(r&&!isNaN(this.points[r-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-i);for(let s=0;s<r;s++){const o=this.points[s];e.lineTo(o.x-n,o.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,r,n){return new this(U2(e.getAttribute("points")),b(b({},ve(jr(e,this.ATTRIBUTE_NAMES,n),X2)),r))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}S(Xt,"ownDefaults",q1),S(Xt,"type","Polyline"),S(Xt,"layoutProperties",[Fi,Ri,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),S(Xt,"cacheProperties",[...Ar,"points"]),S(Xt,"ATTRIBUTE_NAMES",[...hn]),R.setClass(Xt),R.setSVGClass(Xt);class Go extends Xt{isOpen(){return!1}}S(Go,"ownDefaults",q1),S(Go,"type","Polygon"),R.setClass(Go),R.setSVGClass(Go);const Q1=["fontSize","fontWeight","fontFamily","fontStyle"],J1=["underline","overline","linethrough"],Z1=[...Q1,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],ey=[...Z1,...J1,"textBackgroundColor","direction"],Y2=[...Q1,...J1,pt,"strokeWidth",je,"deltaY","textBackgroundColor"],G2={_reNewline:Od,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:ee,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:ee,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},or="justify",yl="justify-left",ks="justify-right",Es="justify-center";class ty extends Ne{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const r=e===void 0?this.styles:{line:this.styles[e]};for(const n in r)for(const i in r[n])for(const s in r[n][i])return!1;return!0}styleHas(e,r){if(!this.styles||r!==void 0&&!this.styles[r])return!1;const n=r===void 0?this.styles:{0:this.styles[r]};for(const i in n)for(const s in n[i])if(n[i][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const r=this.styles;let n,i,s=0,o=!0,a=0;for(const l in r){n=0;for(const c in r[l]){const u=r[l][c]||{};s++,u[e]!==void 0?(i?u[e]!==i&&(o=!1):i=u[e],u[e]===this[e]&&delete u[e]):o=!1,Object.keys(u).length!==0?n++:delete r[l][c]}n===0&&delete r[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&s===a&&(this[e]=i,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const r=this.styles;let n,i,s;for(i in r){for(s in n=r[i],n)delete n[s][e],Object.keys(n[s]).length===0&&delete n[s];Object.keys(n).length===0&&delete r[i]}}_extendStyles(e,r){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const s=Ad(b(b({},this._getStyleDeclaration(n,i)),r),o=>o!==void 0);this._setStyleDeclaration(n,i,s)}getSelectionStyles(e,r,n){const i=[];for(let s=e;s<(r||e);s++)i.push(this.getStyleAtPosition(s,n));return i}getStyleAtPosition(e,r){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e);return r?this.getCompleteStyleDeclaration(n,i):this._getStyleDeclaration(n,i)}setSelectionStyles(e,r,n){for(let i=r;i<(n||r);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,r){var n;const i=this.styles&&this.styles[e];return i&&(n=i[r])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,r){return b(b({},Bn(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,r))}_setStyleDeclaration(e,r,n){this.styles[e][r]=n}_deleteStyleDeclaration(e,r){delete this.styles[e][r]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}S(ty,"_styleProperties",Y2);const K2=/  +/g,q2=/"/g;function Zc(t,e,r,n,i){return"		".concat(function(s,o){let{left:a,top:l,width:c,height:u}=o,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:K.NUM_FRACTION_DIGITS;const d=Gs(je,s,!1),[f,m,v,C]=[a,l,c,u].map(g=>me(g,h));return"<rect ".concat(d,' x="').concat(f,'" y="').concat(m,'" width="').concat(v,'" height="').concat(C,'"></rect>')}(t,{left:e,top:r,width:n,height:i}),`
`)}const Q2=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let eu;class Je extends ty{static getDefaults(){return b(b({},super.getDefaults()),Je.ownDefaults)}constructor(e,r){super(),S(this,"__charBounds",[]),Object.assign(this,Je.ownDefaults),this.setOptions(r),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Wd(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(or)&&this.enlargeSpaces()}enlargeSpaces(){let e,r,n,i,s,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===or||l!==c-1&&!this.isEndOfWrapping(l))&&(i=0,s=this._textLines[l],r=this.getLineWidth(l),r<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){n=a.length,e=(this.width-r)/n;for(let u=0;u<=s.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(s[u])?(o.width+=e,o.kernedWidth+=e,o.left+=i,i+=e):o.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,r){const n=r?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<n.length;i++){if(e<=n[i].length)return{lineIndex:i,charIndex:e};e-=n[i].length+this.missingNewlineOffset(i,r)}return{lineIndex:i-1,charIndex:n[i-1].length<e?n[i-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),r=this.fontSize;return e.width+=r*e.zoomX,e.height+=r*e.zoomY,e}_render(e){const r=this.path;r&&!r.isNotVisible()&&r._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===pt?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,r,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case W:e.textBaseline="middle";break;case"ascender":e.textBaseline=ft;break;case"descender":e.textBaseline=ch}e.font=this._getFontDeclaration(r,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let r=1,n=this._textLines.length;r<n;r++){const i=this.getLineWidth(r);i>e&&(e=i)}return e}_renderTextLine(e,r,n,i,s,o){this._renderChars(e,r,n,i,s,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const r=e.fillStyle,n=this._getLeftOffset();let i=this._getTopOffset();for(let s=0,o=this._textLines.length;s<o;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){i+=a;continue}const l=this._textLines[s].length,c=this._getLineLeftOffset(s);let u,h,d=0,f=0,m=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let v=0;v<l;v++){const C=this.__charBounds[s][v];h=this.getValueOfPropertyAt(s,v,"textBackgroundColor"),this.path?(e.save(),e.translate(C.renderLeft,C.renderTop),e.rotate(C.angle),e.fillStyle=h,h&&e.fillRect(-C.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),C.width,a/this.lineHeight),e.restore()):h!==m?(u=n+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=m,m&&e.fillRect(u,i,d,a/this.lineHeight),f=C.left,d=C.width,m=h):d+=C.kernedWidth}h&&!this.path&&(u=n+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=h,e.fillRect(u,i,d,a/this.lineHeight)),i+=a}e.fillStyle=r,this._removeShadow(e)}_measureChar(e,r,n,i){const s=bs.getFontCache(r),o=this._getFontDeclaration(r),a=n+e,l=n&&o===this._getFontDeclaration(i),c=r.fontSize/this.CACHE_FONT_SIZE;let u,h,d,f;if(n&&s[n]!==void 0&&(d=s[n]),s[e]!==void 0&&(f=u=s[e]),l&&s[a]!==void 0&&(h=s[a],f=h-d),u===void 0||d===void 0||h===void 0){const m=function(){if(!eu){const v=Me();v.width=v.height=0,eu=v.getContext("2d")}return eu}();this._setTextStyles(m,r,!0),u===void 0&&(f=u=m.measureText(e).width,s[e]=u),d===void 0&&l&&n&&(d=m.measureText(n).width,s[n]=d),l&&h===void 0&&(h=m.measureText(a).width,s[a]=h,f=h-d)}return{width:u*c,kernedWidth:f*c}}getHeightOfChar(e,r){return this.getValueOfPropertyAt(e,r,"fontSize")}measureLine(e){const r=this._measureLine(e);return this.charSpacing!==0&&(r.width-=this._getWidthOfCharSpacing()),r.width<0&&(r.width=0),r}_measureLine(e){let r,n,i=0;const s=this.pathSide===ke,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const h=a[u];n=this._getGraphemeBox(h,e,u,r),c[u]=n,i+=n.kernedWidth,r=h}if(c[l]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let u=0;const h=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case ee:u=s?h-i:0;break;case W:u=(h-i)/2;break;case ke:u=s?0:h-i}u+=this.pathStartOffset*(s?-1:1);for(let d=s?l-1:0;s?d>=0:d<l;s?d--:d++)n=c[d],u>h?u%=h:u<0&&(u+=h),this._setGraphemeOnPath(u,n),u+=n.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(e,r){const n=e+r.kernedWidth/2,i=this.path,s=N1(i.path,n,i.segmentsInfo);r.renderLeft=s.x-i.pathOffset.x,r.renderTop=s.y-i.pathOffset.y,r.angle=s.angle+(this.pathSide===ke?Math.PI:0)}_getGraphemeBox(e,r,n,i,s){const o=this.getCompleteStyleDeclaration(r,n),a=i?this.getCompleteStyleDeclaration(r,n-1):{},l=this._measureChar(e,o,i,a);let c,u=l.kernedWidth,h=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),h+=c,u+=c);const d={width:h,left:0,height:o.fontSize,kernedWidth:u,deltaY:o.deltaY};if(n>0&&!s){const f=this.__charBounds[r][n-1];d.left=f.left+f.width+l.kernedWidth-l.width}return d}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let r=this.getHeightOfChar(e,0);for(let n=1,i=this._textLines[e].length;n<i;n++)r=Math.max(this.getHeightOfChar(e,n),r);return this.__lineHeights[e]=r*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,r=0;for(let n=0,i=this._textLines.length;n<i;n++)e=this.getHeightOfLine(n),r+=n===i-1?e/this.lineHeight:e;return r}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,r){e.save();let n=0;const i=this._getLeftOffset(),s=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,u=this._getLineLeftOffset(o);this._renderTextLine(r,e,this._textLines[o],i+u,s+n+c,o),n+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(je))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,r,n,i,s,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(or),c=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,h=this.direction==="ltr",d=this.direction==="ltr"?1:-1,f=r.direction;let m,v,C,g,p,y="",T=0;if(r.save(),f!==this.direction&&(r.canvas.setAttribute("dir",h?"ltr":"rtl"),r.direction=h?"ltr":"rtl",r.textAlign=h?ee:ke),s-=a*this._fontSizeFraction/this.lineHeight,u)return this._renderChar(e,r,o,0,n.join(""),i,s),void r.restore();for(let k=0,E=n.length-1;k<=E;k++)g=k===E||this.charSpacing||c,y+=n[k],C=this.__charBounds[o][k],T===0?(i+=d*(C.kernedWidth-C.width),T+=C.width):T+=C.kernedWidth,l&&!g&&this._reSpaceAndTab.test(n[k])&&(g=!0),g||(m=m||this.getCompleteStyleDeclaration(o,k),v=this.getCompleteStyleDeclaration(o,k+1),g=Zl(m,v,!1)),g&&(c?(r.save(),r.translate(C.renderLeft,C.renderTop),r.rotate(C.angle),this._renderChar(e,r,o,k,y,-T/2,0),r.restore()):(p=i,this._renderChar(e,r,o,k,y,p,s)),y="",m=v,i+=d*T,T=0);r.restore()}_applyPatternGradientTransformText(e){const r=Me(),n=this.width+this.strokeWidth,i=this.height+this.strokeWidth,s=r.getContext("2d");return r.width=n,r.height=i,s.beginPath(),s.moveTo(0,0),s.lineTo(n,0),s.lineTo(n,i),s.lineTo(0,i),s.closePath(),s.translate(n/2,i/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(r,"no-repeat")}handleFiller(e,r,n){let i,s;return jt(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(i=-this.width/2,s=-this.height/2,e.translate(i,s),e[r]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:s}):(e[r]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[r]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,r){let{stroke:n,strokeWidth:i}=r;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,r){let{fill:n}=r;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,r,n,i,s,o,a){const l=this._getStyleDeclaration(n,i),c=this.getCompleteStyleDeclaration(n,i),u=e==="fillText"&&c.fill,h=e==="strokeText"&&c.stroke&&c.strokeWidth;if(h||u){if(r.save(),r.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(r),l.deltaY&&(a+=l.deltaY),u){const d=this._setFillStyles(r,c);r.fillText(s,o-d.offsetX,a-d.offsetY)}if(h){const d=this._setStrokeStyles(r,c);r.strokeText(s,o-d.offsetX,a-d.offsetY)}r.restore()}}setSuperscript(e,r){this._setScript(e,r,this.superscript)}setSubscript(e,r){this._setScript(e,r,this.subscript)}_setScript(e,r,n){const i=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),a={fontSize:s*n.size,deltaY:o+s*n.baseline};this.setSelectionStyles(a,e,r)}_getLineLeftOffset(e){const r=this.getLineWidth(e),n=this.width-r,i=this.textAlign,s=this.direction,o=this.isEndOfWrapping(e);let a=0;return i===or||i===Es&&!o||i===ks&&!o||i===yl&&!o?0:(i===W&&(a=n/2),i===ke&&(a=n),i===Es&&(a=n/2),i===ks&&(a=n),s==="rtl"&&(i===ke||i===or||i===ks?a=0:i===ee||i===yl?a=-n:i!==W&&i!==Es||(a=-n/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:r}=this.measureLine(e);return this.__lineWidths[e]=r,r}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,r,n){var i;return(i=this._getStyleDeclaration(e,r)[n])!==null&&i!==void 0?i:this[n]}_renderTextDecoration(e,r){if(!this[r]&&!this.styleHas(r))return;let n=this._getTopOffset();const i=this._getLeftOffset(),s=this.path,o=this._getWidthOfCharSpacing(),a=this.offsets[r];for(let l=0,c=this._textLines.length;l<c;l++){const u=this.getHeightOfLine(l);if(!this[r]&&!this.styleHas(r,l)){n+=u;continue}const h=this._textLines[l],d=u/this.lineHeight,f=this._getLineLeftOffset(l);let m,v,C=0,g=0,p=this.getValueOfPropertyAt(l,0,r),y=this.getValueOfPropertyAt(l,0,je);const T=n+d*(1-this._fontSizeFraction);let k=this.getHeightOfChar(l,0),E=this.getValueOfPropertyAt(l,0,"deltaY");for(let M=0,z=h.length;M<z;M++){const B=this.__charBounds[l][M];m=this.getValueOfPropertyAt(l,M,r),v=this.getValueOfPropertyAt(l,M,je);const Y=this.getHeightOfChar(l,M),te=this.getValueOfPropertyAt(l,M,"deltaY");if(s&&m&&v)e.save(),e.fillStyle=y,e.translate(B.renderLeft,B.renderTop),e.rotate(B.angle),e.fillRect(-B.kernedWidth/2,a*Y+te,B.kernedWidth,this.fontSize/15),e.restore();else if((m!==p||v!==y||Y!==k||te!==E)&&g>0){let U=i+f+C;this.direction==="rtl"&&(U=this.width-U-g),p&&y&&(e.fillStyle=y,e.fillRect(U,T+a*k+E,g,this.fontSize/15)),C=B.left,g=B.width,p=m,y=v,k=Y,E=te}else g+=B.kernedWidth}let P=i+f+C;this.direction==="rtl"&&(P=this.width-P-g),e.fillStyle=v,m&&v&&e.fillRect(P,T+a*k+E,g-o,this.fontSize/15),n+=u}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:r=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||Je.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[r,n,"".concat(s?this.CACHE_FONT_SIZE:i,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Jl(e)}_splitTextIntoLines(e){const r=e.split(this._reNewline),n=new Array(r.length),i=[`
`];let s=[];for(let o=0;o<r.length;o++)n[o]=this.graphemeSplit(r[o]),s=s.concat(n[o],i);return s.pop(),{_unwrappedLines:n,lines:r,graphemeText:s,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return b(b({},super.toObject([...ey,...e])),{},{styles:O1(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,r){const{textLayoutProperties:n}=this.constructor;super.set(e,r);let i=!1,s=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),i=i||n.includes(o),s=s||o==="path";else i=n.includes(e),s=e==="path";return s&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,r,n){const i=jr(e,Je.ATTRIBUTE_NAMES,n),s=b(b({},r),i),{textAnchor:o=ee,textDecoration:a="",dx:l=0,dy:c=0,top:u=0,left:h=0,fontSize:d=Td,strokeWidth:f=1}=s,m=ve(s,Q2),v=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),b({left:h+l,top:u+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:d},m)),C=v.getScaledHeight()/v.height,g=((v.height+v.strokeWidth)*v.lineHeight-v.height)*C,p=v.getScaledHeight()+g;let y=0;return o===W&&(y=v.getScaledWidth()/2),o===ke&&(y=v.getScaledWidth()),v.set({left:v.left-y,top:v.top-(p-v.fontSize*(.07+v._fontSizeFraction))/v.lineHeight,strokeWidth:f}),v}static fromObject(e){return this._fromObject(b(b({},e),{},{styles:k1(e.styles||{},e.text)}),{extraParam:"text"})}}S(Je,"textLayoutProperties",Z1),S(Je,"cacheProperties",[...Ar,...ey]),S(Je,"ownDefaults",G2),S(Je,"type","Text"),S(Je,"genericFonts",["sans-serif","serif","cursive","fantasy","monospace"]),S(Je,"ATTRIBUTE_NAMES",hn.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),w1(Je,[class extends h1{_toSVG(){const t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(t){let{textBgRects:e,textSpans:r}=t;const n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(q2,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",r.join(""),`</text>
`]}_getSVGTextAndBg(t,e){const r=[],n=[];let i,s=t;this.backgroundColor&&n.push(...Zc(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)i=this._getLineLeftOffset(o),this.direction==="rtl"&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(n,o,e+i,s),this._setSVGTextLineText(r,o,e+i,s),s+=this.getHeightOfLine(o);return{textSpans:r,textBgRects:n}}_createTextCharSpan(t,e,r,n){const i=this.getSvgSpanStyles(e,t!==t.trim()||!!t.match(K2)),s=i?'style="'.concat(i,'"'):"",o=e.deltaY,a=o?' dy="'.concat(me(o,K.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(me(r,K.NUM_FRACTION_DIGITS),'" y="').concat(me(n,K.NUM_FRACTION_DIGITS),'" ').concat(a).concat(s,">").concat(T1(t),"</tspan>")}_setSVGTextLineText(t,e,r,n){const i=this.getHeightOfLine(e),s=this.textAlign.includes(or),o=this._textLines[e];let a,l,c,u,h,d="",f=0;n+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let m=0,v=o.length-1;m<=v;m++)h=m===v||this.charSpacing,d+=o[m],c=this.__charBounds[e][m],f===0?(r+=c.kernedWidth-c.width,f+=c.width):f+=c.kernedWidth,s&&!h&&this._reSpaceAndTab.test(o[m])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(e,m),l=this.getCompleteStyleDeclaration(e,m+1),h=Zl(a,l,!0)),h&&(u=this._getStyleDeclaration(e,m),t.push(this._createTextCharSpan(d,u,r,n)),d="",a=l,this.direction==="rtl"?r-=f:r+=f,f=0)}_setSVGTextLineBg(t,e,r,n){const i=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<i.length;u++){const{left:h,width:d,kernedWidth:f}=this.__charBounds[e][u];o=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),o!==c?(c&&t.push(...Zc(c,r+l,n,a,s)),l=h,a=d,c=o):a+=f}o&&t.push(...Zc(c,r+l,n,a,s))}_getSVGLineTopOffset(t){let e,r=0;for(e=0;e<t;e++)r+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:r,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(t){return"".concat(super.getSvgStyles(t)," white-space: pre;")}getSvgSpanStyles(t,e){const{fontFamily:r,strokeWidth:n,stroke:i,fill:s,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c}=t,u=this.getSvgTextDecoration(t);return[i?Gs(pt,i):"",n?"stroke-width: ".concat(n,"; "):"",r?"font-family: ".concat(r.includes("'")||r.includes('"')?r:"'".concat(r,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",u&&"text-decoration: ".concat(u,"; "),s?Gs(je,s):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(t){return["overline","underline","line-through"].filter(e=>t[e.replace("-","")]).join(" ")}}]),R.setClass(Je),R.setSVGClass(Je);class J2{constructor(e){S(this,"target",void 0),S(this,"__mouseDownInPlace",!1),S(this,"__dragStartFired",!1),S(this,"__isDraggingOver",!1),S(this,"__dragStartSelection",void 0),S(this,"__dragImageDisposer",void 0),S(this,"_dispose",void 0),this.target=e;const r=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{r.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(e){const r=this.target,n=r.getSelectionStartFromPointer(e);return r.isEditing&&n>=r.selectionStart&&n<=r.selectionEnd&&r.selectionStart<r.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const r=this.isActive();return r&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,r}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,r){var n;let{selectionStart:i,selectionEnd:s}=r;const o=this.target,a=o.canvas,l=new O(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(i),u=new O(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),h=a.getScenePoint(e).subtract(u),d=o.getCanvasRetinaScaling(),f=o.getBoundingRect(),m=u.subtract(new O(f.left,f.top)),v=a.viewportTransform,C=m.add(h).transform(v,!0),g=o.backgroundColor,p=Nd(o.styles);o.backgroundColor="";const y={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(y,0,i),o.setSelectionStyles(y,s,o.text.length),o.dirty=!0;const T=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=g,o.styles=p,o.dirty=!0,ml(T,{position:"fixed",left:"".concat(-T.width,"px"),border:gt,width:"".concat(T.width/d,"px"),height:"".concat(T.height/d,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{T.remove()},Gt(e.target||this.target.hiddenTextarea).body.appendChild(T),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(T,C.x,C.y)}onDragStart(e){this.__dragStartFired=!0;const r=this.target,n=this.isActive();if(n&&e.dataTransfer){const i=this.__dragStartSelection={selectionStart:r.selectionStart,selectionEnd:r.selectionEnd},s=r._text.slice(i.selectionStart,i.selectionEnd).join(""),o=b({text:r.text,value:s},i);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:r.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return r.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const r=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return r<n.selectionStart||r>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:r}=e;const n=this.targetCanDrop(r);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:r}=e,n=this.targetCanDrop(r);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(r.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var r;const{e:n}=e,i=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let s=(r=n.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain");if(s&&!i){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(n);const{styles:c}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},u=s[Math.max(0,s.length-1)],h=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;l>d&&l<=f?l=d:l>f&&(l-=f-d),o.removeChars(d,f),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(s,c,l),a.setActiveObject(o),o.enterEditing(n),o.selectionStart=Math.min(l+h,o._text.length),o.selectionEnd=Math.min(o.selectionStart+s.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(sl,{index:l+h,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:r}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const i=this.target,s=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((n=r.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||gt;l===gt?(i.selectionStart=o,i.selectionEnd=a,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),l==="move"&&(i.removeChars(o,a),i.selectionStart=i.selectionEnd=o,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire(sl,{index:o,action:"dragend"}),s.fire("text:changed",{target:i}),s.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const up=/[ \n\.,;!\?\-]/;class Z2 extends Je{constructor(){super(...arguments),S(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:r,duration:n,delay:i,onComplete:s}=e;return Id({startValue:this._currentCursorOpacity,endValue:r,duration:n,delay:i,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(r=>{r&&!r.isDone()&&(e=!0,r.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let r=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)r++,n--;for(;/\S/.test(this._text[n])&&n>-1;)r++,n--;return e-r}findWordBoundaryRight(e){let r=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)r++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)r++,n++;return e+r}findLineBoundaryLeft(e){let r=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)r++,n--;return e-r}findLineBoundaryRight(e){let r=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)r++,n++;return e+r}searchWordBoundary(e,r){const n=this._text;let i=e>0&&this._reSpace.test(n[e])&&(r===-1||!Od.test(n[e-1]))?e-1:e,s=n[i];for(;i>0&&i<n.length&&!up.test(s);)i+=r,s=n[i];return r===-1&&up.test(s)&&i++,i}selectWord(e){e=e||this.selectionStart;const r=this.searchWordBoundary(e,-1),n=Math.max(r,this.searchWordBoundary(e,1));this.selectionStart=r,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const r=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);return this.selectionStart=r,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const r=this.hiddenTextarea;Gt(r).activeElement!==r&&r.focus();const n=this.getSelectionStartFromPointer(e),i=this.selectionStart,s=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&i!==s||i!==n&&s!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,r,n){const i=n.slice(0,e),s=this.graphemeSplit(i).length;if(e===r)return{selectionStart:s,selectionEnd:s};const o=n.slice(e,r);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,r,n){const i=n.slice(0,e).join("").length;return e===r?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+n.slice(e,r).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const r=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,r=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),i=n.lineIndex,s=n.charIndex,o=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,a=r.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,h=c.height/l,d=u-o,f=h-o,m=new O(r.left+a,r.top+r.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new O(c.clientWidth/u,c.clientHeight/h));return m.x<0&&(m.x=0),m.x>d&&(m.x=d),m.y<0&&(m.y=0),m.y>f&&(m.y=f),m.x+=this.canvas._offset.left,m.y+=this.canvas._offset.top,{left:"".concat(m.x,"px"),top:"".concat(m.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditing(){const e=this._textBeforeEdit!==this.text;return this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire(ol),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,r){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:o}=this.get2DCursorLocation(r,!0);if(n!==s){if(this.styles[n])for(let a=i;a<this._unwrappedTextLines[n].length;a++)delete this.styles[n][a];if(this.styles[s])for(let a=o;a<this._unwrappedTextLines[s].length;a++){const l=this.styles[s][a];l&&(this.styles[n]||(this.styles[n]={}),this.styles[n][i+a-o]=l)}for(let a=n+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,n-s)}else if(this.styles[n]){const a=this.styles[n],l=o-i;for(let c=i;c<o;c++)delete a[c];for(const c in this.styles[n]){const u=parseInt(c,10);u>=o&&(a[u-l]=a[c],delete a[c])}}}shiftLineStyles(e,r){const n=Object.assign({},this.styles);for(const i in this.styles){const s=parseInt(i,10);s>e&&(this.styles[s+r]=n[s],n[s-r]||delete this.styles[s])}}insertNewlineStyleObject(e,r,n,i){const s={},o=this._unwrappedTextLines[e].length,a=o===r;let l=!1;n||(n=1),this.shiftLineStyles(e,n);const c=this.styles[e]?this.styles[e][r===0?r:r-1]:void 0;for(const h in this.styles[e]){const d=parseInt(h,10);d>=r&&(l=!0,s[d-r]=this.styles[e][h],a&&r===0||delete this.styles[e][h])}let u=!1;for(l&&!a&&(this.styles[e+n]=s,u=!0),(u||o>r)&&n--;n>0;)i&&i[n-1]?this.styles[e+n]={0:b({},i[n-1])}:c?this.styles[e+n]={0:b({},c)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,r,n,i){this.styles||(this.styles={});const s=this.styles[e],o=s?b({},s):{};n||(n=1);for(const l in o){const c=parseInt(l,10);c>=r&&(s[c+n]=o[c],o[c-n]||delete s[c])}if(this._forceClearCache=!0,i){for(;n--;)Object.keys(i[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][r+n]=b({},i[n]));return}if(!s)return;const a=s[r?r-1:1];for(;a&&n--;)this.styles[e][r+n]=b({},a)}insertNewStyleBlock(e,r,n){const i=this.get2DCursorLocation(r,!0),s=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],n),n=n&&n.slice(s[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],a),o=1;o<a;o++)s[o]>0?this.insertCharStyleObject(i.lineIndex+o,0,s[o],n):n&&this.styles[i.lineIndex+o]&&n[0]&&(this.styles[i.lineIndex+o][0]=n[0]),n=n&&n.slice(s[o]+1);s[o]>0&&this.insertCharStyleObject(i.lineIndex+o,0,s[o],n)}removeChars(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,r),this._text.splice(e,r-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;i>n&&this.removeStyleFromTo(n,i);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,n,r),this._text=[...this._text.slice(0,n),...s,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,r,n){n<=e?(r===e?this._selectionDirection=ee:this._selectionDirection===ke&&(this._selectionDirection=ee,this.selectionEnd=e),this.selectionStart=n):n>e&&n<r?this._selectionDirection===ke?this.selectionEnd=n:this.selectionStart=n:(r===e?this._selectionDirection=ke:this._selectionDirection===ee&&(this._selectionDirection=ke,this.selectionStart=r),this.selectionEnd=n)}}class eC extends Z2{initHiddenTextarea(){const e=this.canvas&&Gt(this.canvas.getElement())||Li(),r=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return r.setAttribute(a,l)});const{top:n,left:i,fontSize:s}=this._calcTextareaPosition();r.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(r),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return r.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=r}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in r)this[r[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const r=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const n=()=>{this.updateFromTextArea(),this.fire(sl),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void n();const i=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,o=i.length,a=this.selectionStart,l=this.selectionEnd,c=a!==l;let u,h,d,f,m=o-s;const v=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),C=a>v.selectionStart;c?(h=this._text.slice(a,l),m+=l-a):o<s&&(h=C?this._text.slice(l+m,l):this._text.slice(a,a-m));const g=i.slice(v.selectionEnd-m,v.selectionEnd);if(h&&h.length&&(g.length&&(u=this.getSelectionStyles(a,a+1,!1),u=g.map(()=>u[0])),c?(d=a,f=l):C?(d=l-h.length,f=l):(d=l,f=l+h.length),this.removeStyleFromTo(d,f)),g.length){const{copyPasteData:p}=fr();r&&g.join("")===p.copiedText&&!K.disableStyleCopyPaste&&(u=p.copiedTextStyle),this.insertNewStyleBlock(g,a,u)}n()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:r}=e;const{selectionStart:n,selectionEnd:i}=r;this.compositionStart=n,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=fr();e.copiedText=this.getSelectedText(),K.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,r){let n,i=this._getLineLeftOffset(e);return r>0&&(n=this.__charBounds[e][r-1],i+=n.left+n.width),i}getDownCursorOffset(e,r){const n=this._getSelectionForOffset(e,r),i=this.get2DCursorLocation(n),s=i.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(o).length+l+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,r){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,r){const n=this._getSelectionForOffset(e,r),i=this.get2DCursorLocation(n),s=i.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-n;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s-1,a),c=this._textLines[s].slice(0,o),u=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+l-c.length+(1-u)}_getIndexOnLine(e,r){const n=this._textLines[e];let i,s,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=n.length;l<c;l++)if(i=this.__charBounds[e][l].width,o+=i,o>r){s=!0;const u=o-i,h=o,d=Math.abs(u-r);a=Math.abs(h-r)<d?l:l-1;break}return s||(a=n.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,r){const n=this["get".concat(e,"CursorOffset")](r,this._selectionDirection===ke);if(r.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const i=this.text.length;this.selectionStart=Fn(0,this.selectionStart,i),this.selectionEnd=Fn(0,this.selectionEnd,i),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const r=this._selectionDirection===ee?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,r,n){let i;if(e.altKey)i=this["findWordBoundary".concat(n)](this[r]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[r]+=n==="Left"?-1:1,!0;i=this["findLineBoundary".concat(n)](this[r])}return i!==void 0&&this[r]!==i&&(this[r]=i,!0)}_moveLeft(e,r){return this._move(e,r,"Left")}_moveRight(e,r){return this._move(e,r,"Right")}moveCursorLeftWithoutShift(e){let r=!0;return this._selectionDirection=ee,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,r}moveCursorLeftWithShift(e){return this._selectionDirection===ke&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=ee,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,r){const n="moveCursor".concat(e).concat(r.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===ee&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=ke,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let r=!0;return this._selectionDirection=ke,this.selectionStart===this.selectionEnd?(r=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r}}const tu=t=>!!t.button;class tC extends eC{constructor(){super(...arguments),S(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new J2(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const r=e.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",e),hh(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:r}=e;this.canvas&&this.editable&&!tu(r)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(r)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(r)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:r}=e;this.canvas&&this.editable&&!tu(r)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:r,transform:n}=e;const i=this.draggableTextDelegate.end(r);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||tu(r)||i||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(r),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const r=this.getSelectionStartFromPointer(e),n=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,i,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const r=this.canvas.getScenePoint(e).transform(xt(this.calcTransformMatrix())).add(new O(-this._getLeftOffset(),-this._getTopOffset()));let n=0,i=0,s=0;for(let c=0;c<this._textLines.length&&n<=r.y;c++)n+=this.getHeightOfLine(c),s=c,c>0&&(i+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,l=this.__charBounds[s];for(let c=0;c<a;c++){const u=o+l[c].kernedWidth;if(r.x<=u){Math.abs(r.x-u)<=Math.abs(r.x-o)&&i++;break}o=u,i++}return Math.min(this.flipX?a-i:i,this._text.length)}}const Ko="moveCursorUp",qo="moveCursorDown",Qo="moveCursorLeft",Jo="moveCursorRight",Zo="exitEditing",rC=b({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Zo,27:Zo,33:Ko,34:qo,35:Jo,36:Qo,37:Qo,38:Ko,39:Jo,40:qo},keysMapRtl:{9:Zo,27:Zo,33:Ko,34:qo,35:Qo,36:Jo,37:Jo,38:Ko,39:Qo,40:qo},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class lr extends tC{static getDefaults(){return b(b({},super.getDefaults()),lr.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,r){super(e,b(b({},lr.ownDefaults),r)),this.initBehavior()}_set(e,r){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=r,this):(e==="canvas"&&(this.canvas instanceof yh&&this.canvas.textEditingManager.remove(this),r instanceof yh&&r.textEditingManager.add(this)),super._set(e,r))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,r){this[e]!==r&&(this._fireSelectionChanged(),this[e]=r),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,r,n)}setSelectionStyles(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,r,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,r=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,r)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const r=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=r,n}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const r=this._getCursorBoundaries();this.selectionStart===this.selectionEnd?this.renderCursor(e,r):this.renderSelection(e,r),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,r=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),i=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,r);return{left:n,top:i,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,r){return r?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let r=0,n=0;const{charIndex:i,lineIndex:s}=this.get2DCursorLocation(e);for(let c=0;c<s;c++)r+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(s),a=this.__charBounds[s][i];a&&(n=a.left),this.charSpacing!==0&&i===this._textLines[s].length&&(n-=this._getWidthOfCharSpacing());const l={top:r,left:o+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===ke||this.textAlign===or||this.textAlign===ks?l.left*=-1:this.textAlign===ee||this.textAlign===yl?l.left=o-(n>0?n:0):this.textAlign!==W&&this.textAlign!==Es||(l.left=o-(n>0?n:0))),l}renderCursorAt(e){const r=this._getCursorBoundaries(e,!0);this._renderCursor(this.canvas.contextTop,r,e)}renderCursor(e,r){this._renderCursor(e,r,this.selectionStart)}_renderCursor(e,r,n){const i=this.get2DCursorLocation(n),s=i.lineIndex,o=i.charIndex>0?i.charIndex-1:0,a=this.getValueOfPropertyAt(s,o,"fontSize"),l=this.getObjectScaling().x*this.canvas.getZoom(),c=this.cursorWidth/l,u=this.getValueOfPropertyAt(s,o,"deltaY"),h=r.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-a*(1-this._fontSizeFraction);this.inCompositionMode&&this.renderSelection(e,r),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(s,o,je),e.globalAlpha=this._currentCursorOpacity,e.fillRect(r.left+r.leftOffset-c/2,h+r.top+u,c,a)}renderSelection(e,r){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,r)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const r=this.getSelectionStartFromPointer(e);this.renderCursorAt(r)}_renderSelection(e,r,n){const i=r.selectionStart,s=r.selectionEnd,o=this.textAlign.includes(or),a=this.get2DCursorLocation(i),l=this.get2DCursorLocation(s),c=a.lineIndex,u=l.lineIndex,h=a.charIndex<0?0:a.charIndex,d=l.charIndex<0?0:l.charIndex;for(let f=c;f<=u;f++){const m=this._getLineLeftOffset(f)||0;let v=this.getHeightOfLine(f),C=0,g=0,p=0;if(f===c&&(g=this.__charBounds[c][h].left),f>=c&&f<u)p=o&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===u)if(d===0)p=this.__charBounds[u][d].left;else{const P=this._getWidthOfCharSpacing();p=this.__charBounds[u][d-1].left+this.__charBounds[u][d-1].width-P}C=v,(this.lineHeight<1||f===u&&this.lineHeight>1)&&(v/=this.lineHeight);let y=n.left+m+g,T=v,k=0;const E=p-g;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",T=1,k=v):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===ke||this.textAlign===or||this.textAlign===ks?y=this.width-y-E:this.textAlign===ee||this.textAlign===yl?y=n.left+m-p:this.textAlign!==W&&this.textAlign!==Es||(y=n.left+m-p)),e.fillRect(y,n.top+n.topOffset+k,E,T),n.topOffset+=C}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,je)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),r=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:r}}dispose(){this._exitEditing(),this.draggableTextDelegate.dispose(),super.dispose()}}S(lr,"ownDefaults",rC),S(lr,"type","IText"),R.setClass(lr),R.setClass(lr,"i-text");class bn extends lr{static getDefaults(){return b(b({},super.getDefaults()),bn.ownDefaults)}constructor(e,r){super(e,b(b({},bn.ownDefaults),r))}static createControls(){return{controls:DS()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(or)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let r=0,n=0,i=0;const s={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[i]===`
`&&o>0?(n=0,i++,r++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&o>0&&(n++,i++),s[o]={line:r,offset:n},i+=e.graphemeLines[o].length,n+=e.graphemeLines[o].length;return s}styleHas(e,r){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[r];n&&(r=n.line)}return super.styleHas(e,r)}isEmptyStyles(e){if(!this.styles)return!0;let r,n=0,i=e+1,s=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,n=o.offset),a&&(i=a.line,s=i===e,r=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c]){const h=parseInt(u,10);if(h>=n&&(!s||h<r))for(const d in l[c][u])return!1}return!0}_getStyleDeclaration(e,r){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,r=n.offset+r}return super._getStyleDeclaration(e,r)}_setStyleDeclaration(e,r,n){const i=this._styleMap[e];super._setStyleDeclaration(i.line,i.offset+r,n)}_deleteStyleDeclaration(e,r){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+r)}_getLineStyle(e){const r=this._styleMap[e];return!!this.styles[r.line]}_setLineStyle(e){const r=this._styleMap[e];super._setLineStyle(r.line)}_wrapText(e,r){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),i=[];for(let s=0;s<n.wordsData.length;s++)i.push(...this._wrapLine(s,r,n));return this.isWrapping=!1,i}getGraphemeDataForRender(e){const r=this.splitByGrapheme,n=r?"":" ";let i=0;return{wordsData:e.map((s,o)=>{let a=0;const l=r?this.graphemeSplit(s):this.wordSplit(s);return l.length===0?[{word:[],width:0}]:l.map(c=>{const u=r?[c]:this.graphemeSplit(c),h=this._measureWord(u,o,a);return i=Math.max(h,i),a+=u.length+n.length,{word:u,width:h}})}),largestWordWidth:i}}_measureWord(e,r){let n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let o=0,a=e.length;o<a;o++)s+=this._getGraphemeBox(e[o],r,o+i,n,!0).kernedWidth,n=e[o];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,r,n){let{largestWordWidth:i,wordsData:s}=n,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],u=l?"":" ";let h=0,d=[],f=0,m=0,v=!0;r-=o;const C=Math.max(r,i,this.dynamicMinWidth),g=s[e];let p;for(f=0,p=0;p<g.length;p++){const{word:y,width:T}=g[p];f+=y.length,h+=m+T-a,h>C&&!v?(c.push(d),d=[],h=T,v=!0):h+=a,v||l||d.push(u),d=d.concat(y),m=l?0:this._measureWord([u],e,f),f++,v=!1}return p&&c.push(d),i+o>this.dynamicMinWidth&&(this.dynamicMinWidth=i-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,r){return this.splitByGrapheme&&!r?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const r=super._splitTextIntoLines(e),n=this._wrapText(r.lines,this.width),i=new Array(n.length);for(let s=0;s<n.length;s++)i[s]=n[s].join("");return r.lines=i,r.graphemeLines=n,r}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const r in this._styleMap){const n=parseInt(r,10);if(this._textLines[n]){const i=this._styleMap[r].line;e.set("".concat(i),!0)}}for(const r in this.styles)e.has(r)||delete this.styles[r]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}S(bn,"type","Textbox"),S(bn,"textLayoutProperties",[...lr.textLayoutProperties,"width"]),S(bn,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),R.setClass(bn);class hp extends ec{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,r){const{target:n}=e,{clipPath:i,group:s}=n;if(!i||!this.shouldPerformLayout(e))return;const{width:o,height:a}=hr(P1(n,i)),l=new O(o,a);if(i.absolutePositioned)return{center:Pn(i.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:l};{const c=i.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:u=new O,correction:h=new O}=this.calcBoundingBox(r,e)||{};return{center:u.add(c),correction:h.subtract(c),size:l}}return{center:n.getRelativeCenterPoint().add(c),size:l}}}}S(hp,"type","clip-path"),R.setClass(hp);class dp extends ec{getInitialSize(e,r){let{target:n}=e,{size:i}=r;return new O(n.width||i.x,n.height||i.y)}}S(dp,"type","fixed"),R.setClass(dp);class nC extends qs{subscribeTargets(e){const r=e.target;e.targets.reduce((n,i)=>(i.parent&&n.add(i.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[r]})})}unsubscribeTargets(e){const r=e.target,n=r.getObjects();e.targets.reduce((i,s)=>(s.parent&&i.add(s.parent),i),new Set).forEach(i=>{!n.some(s=>s.parent===i)&&i.layoutManager.unsubscribeTargets({target:i,targets:[r]})})}}class Xr extends Tr{static getDefaults(){return b(b({},super.getDefaults()),Xr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Xr.ownDefaults),this.setOptions(r);const{left:n,top:i,layoutManager:s}=r;this.groupInit(e,{left:n,top:i,layoutManager:s??new nC})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...r):r.forEach(i=>{const s=this._objects.findIndex(a=>a.isInFrontOf(i)),o=s===-1?this.size():s;this.insertAt(o,i)})}canEnterGroup(e){return this.getObjects().some(r=>r.isDescendantOf(e)||e.isDescendantOf(r))?(nn("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,r){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,r)}exitGroup(e,r){this._exitGroup(e,r),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,r){super._onAfterObjectsChange(e,r);const n=new Set;r.forEach(i=>{const{parent:s}=i;s&&n.add(s)}),e===Hd?n.forEach(i=>{i._onAfterObjectsChange(fl,r)}):n.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,r,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i=b(b({hasControls:!1},n),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,i);super._renderControls(e,r),e.restore()}}S(Xr,"type","ActiveSelection"),S(Xr,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),R.setClass(Xr),R.setClass(Xr,"activeSelection");class iC{constructor(){S(this,"resources",{})}applyFilters(e,r,n,i,s){const o=s.getContext("2d");if(!o)return;o.drawImage(r,0,0,n,i);const a={sourceWidth:n,sourceHeight:i,imageData:o.getImageData(0,0,n,i),originalEl:r,originalImageData:o.getImageData(0,0,n,i),canvasEl:s,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===n&&l.height===i||(s.width=l.width,s.height=l.height),o.putImageData(l,0,0),a}}class ry{constructor(){let{tileSize:e=K.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};S(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),S(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,r){this.dispose(),this.createWebGLCanvas(e,r)}createWebGLCanvas(e,r){const n=Me();n.width=e,n.height=r;const i=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=n,this.gl=i)}applyFilters(e,r,n,i,s,o){const a=this.gl,l=s.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,r));const u={originalWidth:r.width||r.originalWidth||0,originalHeight:r.height||r.originalHeight||0,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,n,i,c?void 0:r),targetTexture:this.createTexture(a,n,i),originalTexture:c||this.createTexture(a,n,i,c?void 0:r),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},h=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,h),e.forEach(d=>{d&&d.applyTo(u)}),function(d){const f=d.targetCanvas,m=f.width,v=f.height,C=d.destinationWidth,g=d.destinationHeight;m===C&&v===g||(f.width=C,f.height=g)}(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(h),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,r,n,i,s){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:h,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:m}=e,v=e.createTexture();return e.bindTexture(a,v),e.texParameteri(a,h,s||o),e.texParameteri(a,d,s||o),e.texParameteri(a,f,u),e.texParameteri(a,m,u),i?e.texImage2D(a,0,l,l,c,i):e.texImage2D(a,0,l,r,n,0,l,c,null),v}getCachedTexture(e,r,n){const{textureCache:i}=this;if(i[e])return i[e];{const s=this.createTexture(this.gl,r.width,r.height,r,n);return s&&(i[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,r){const n=e.canvas,i=r.targetCanvas,s=i.getContext("2d");if(!s)return;s.translate(0,i.height),s.scale(1,-1);const o=n.height-i.height;s.drawImage(n,0,o,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(e,r){const n=r.targetCanvas.getContext("2d"),i=r.destinationWidth,s=r.destinationHeight,o=i*s*4;if(!n)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,i,s,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,i,s);n.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,r={renderer:"",vendor:""};if(!e)return r;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const i=e.getParameter(n.UNMASKED_RENDERER_WEBGL),s=e.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(r.renderer=i.toLowerCase()),s&&(r.vendor=s.toLowerCase())}return this.gpuInfo=r,r}}let ru;function sC(){const{WebGLProbe:t}=fr();return t.queryWebGL(Me()),K.enableGLFiltering&&t.isSupported(K.textureSize)?new ry({tileSize:K.textureSize}):new iC}function nu(){return!ru&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(ru=sC()),ru}const oC=["filters","resizeFilter","src","crossOrigin","type"],ny=["cropX","cropY"];class at extends Ne{static getDefaults(){return b(b({},super.getDefaults()),at.ownDefaults)}constructor(e,r){super(),S(this,"_lastScaleX",1),S(this,"_lastScaleY",1),S(this,"_filterScalingX",1),S(this,"_filterScalingY",1),this.filters=[],Object.assign(this,at.ownDefaults),this.setOptions(r),this.cacheKey="texture".concat(on()),this.setElement(typeof e=="string"?(this.canvas&&Gt(this.canvas.getElement())||Li()).getElementById(e):e,r)}getElement(){return this._element}setElement(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),e.classList.add(at.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const r=nu(!1);r instanceof ry&&r.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const r=this[e];r&&fr().dispose(r),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const r=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-r,-n),e.lineTo(r,-n),e.lineTo(r,n),e.lineTo(-r,n),e.lineTo(-r,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=[];return this.filters.forEach(n=>{n&&r.push(n.toObject())}),b(b({},super.toObject([...ny,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:r},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],r=this._element,n=-this.width/2,i=-this.height/2;let s=[],o=[],a="",l="";if(!r)return[];if(this.hasCrop()){const c=on();s.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+n+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(r.width||r.naturalWidth,'" height="').concat(r.height||r.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(n,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return s=this.paintFirst!==je?s.concat(o,e):s.concat(e,o),s}getSrc(e){const r=e?this._element:this._originalElement;return r?r.toDataURL?r.toDataURL():this.srcFromAttribute?r.getAttribute("src")||"":r.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:r,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Os(e,{crossOrigin:r,signal:n}).then(i=>{r!==void 0&&this.set({crossOrigin:r}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,r=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.x,s=n.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>r&&s>r)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=s);const a=Me(),l=o.width,c=o.height;a.width=l,a.height=c,this._element=a,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=s,nu().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const r=this._originalElement,n=r.naturalWidth||r.width,i=r.naturalHeight||r.height;if(this._element===this._originalElement){const s=Me();s.width=n,s.height=i,this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1);nu().applyFilters(e,this._originalElement,n,i,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const r=this._element;if(!r)return;const n=this._filterScalingX,i=this._filterScalingY,s=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=r.naturalWidth||r.width,u=r.naturalHeight||r.height,h=a*n,d=l*i,f=Math.min(s*n,c-h),m=Math.min(o*i,u-d),v=-s/2,C=-o/2,g=Math.min(s,c/n-a),p=Math.min(o,u/i-l);r&&e.drawImage(r,h,d,f,m,v,C,g,p)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=r||n.height}parsePreserveAspectRatioAttribute(){const e=Qv(this.preserveAspectRatio||""),r=this.width,n=this.height,i={width:r,height:n};let s,o=this._element.width,a=this._element.height,l=1,c=1,u=0,h=0,d=0,f=0;return!e||e.alignX===gt&&e.alignY===gt?(l=r/o,c=n/a):(e.meetOrSlice==="meet"&&(l=c=A1(this._element,i),s=(r-o*l)/2,e.alignX==="Min"&&(u=-s),e.alignX==="Max"&&(u=s),s=(n-a*c)/2,e.alignY==="Min"&&(h=-s),e.alignY==="Max"&&(h=s)),e.meetOrSlice==="slice"&&(l=c=j1(this._element,i),s=o-r/l,e.alignX==="Mid"&&(d=s/2),e.alignX==="Max"&&(d=s),s=a-n/c,e.alignY==="Mid"&&(f=s/2),e.alignY==="Max"&&(f=s),o=r/l,a=n/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:u,offsetTop:h,cropX:d,cropY:f}}static fromObject(e,r){let{filters:n,resizeFilter:i,src:s,crossOrigin:o,type:a}=e,l=ve(e,oC);return Promise.all([Os(s,b(b({},r),{},{crossOrigin:o})),n&&Mi(n,r),i&&Mi([i],r),no(l,r)]).then(c=>{let[u,h=[],[d]=[],f={}]=c;return new this(u,b(b({},l),{},{src:s,filters:h,resizeFilter:d},f))})}static fromURL(e){let{crossOrigin:r=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return Os(e,{crossOrigin:r,signal:n}).then(s=>new this(s,i))}static async fromElement(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=jr(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(i["xlink:href"],r,i).catch(s=>(nn("log","Unable to parse Image",s),null))}}S(at,"type","Image"),S(at,"cacheProperties",[...Ar,...ny]),S(at,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),S(at,"CSS_CANVAS","canvas-img"),S(at,"ATTRIBUTE_NAMES",[...hn,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),R.setClass(at),R.setSVGClass(at);Kl(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const rc=t=>t.webgl!==void 0,Ud="precision highp float",aC=`
    `.concat(Ud,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),lC=["type"],cC=["type"],uC=new RegExp(Ud,"g");class Fe{get type(){return this.constructor.type}constructor(){let e=ve(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},lC);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return aC}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=fr();i!=="highp"&&(r=r.replace(uC,Ud.replace("highp",i)));const s=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!o||!a)throw new ar("Vertex, fragment shader or program creation error");if(e.shaderSource(s,n),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new ar("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(o,r),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new ar("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,s),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new ar('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,r){return{aPosition:e.getAttribLocation(r,"aPosition")}}getUniformLocations(e,r){const n=this.constructor.uniformLocations,i={};for(let s=0;s<n.length;s++)i[n[s]]=e.getUniformLocation(r,n[s]);return i}sendAttributeData(e,r,n){const i=r.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const r=e.context;if(e.passes>1){const n=e.destinationWidth,i=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===i||(r.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(r,n,i)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.targetTexture,0)}else r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish()}_swapTextures(e){e.passes--,e.pass++;const r=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=r}isNeutralState(e){return!1}applyTo(e){rc(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const r=this.getCacheKey();return e.programCache[r]||(e.programCache[r]=this.createProgram(e.context)),e.programCache[r]}applyToWebGL(e){const r=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?r.bindTexture(r.TEXTURE_2D,e.originalTexture):r.bindTexture(r.TEXTURE_2D,e.sourceTexture),r.useProgram(n.program),this.sendAttributeData(r,n.attributeLocations,e.aPosition),r.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),r.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(r,n.uniformLocations),r.viewport(0,0,e.destinationWidth,e.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,r,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,r),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,r){}createHelpLayer(e){if(!e.helpLayer){const r=Me();r.width=e.sourceWidth,r.height=e.sourceHeight,e.helpLayer=r}}toObject(){const e=Object.keys(this.constructor.defaults||{});return b({type:this.type},e.reduce((r,n)=>(r[n]=this[n],r),{}))}toJSON(){return this.toObject()}static async fromObject(e,r){return new this(ve(e,cC))}}S(Fe,"type","BaseFilter"),S(Fe,"uniformLocations",[]);const hC={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class ea extends Fe{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(hC[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:r}}=e;const n=new Z(this.color).getSource(),i=n[0]*this.alpha,s=n[1]*this.alpha,o=n[2]*this.alpha,a=1-this.alpha;for(let l=0;l<r.length;l+=4){const c=r[l],u=r[l+1],h=r[l+2];switch(this.mode){case"multiply":r[l]=c*i/255,r[l+1]=u*s/255,r[l+2]=h*o/255;break;case"screen":r[l]=255-(255-c)*(255-i)/255,r[l+1]=255-(255-u)*(255-s)/255,r[l+2]=255-(255-h)*(255-o)/255;break;case"add":r[l]=c+i,r[l+1]=u+s,r[l+2]=h+o;break;case"difference":r[l]=Math.abs(c-i),r[l+1]=Math.abs(u-s),r[l+2]=Math.abs(h-o);break;case"subtract":r[l]=c-i,r[l+1]=u-s,r[l+2]=h-o;break;case"darken":r[l]=Math.min(c,i),r[l+1]=Math.min(u,s),r[l+2]=Math.min(h,o);break;case"lighten":r[l]=Math.max(c,i),r[l+1]=Math.max(u,s),r[l+2]=Math.max(h,o);break;case"overlay":r[l]=i<128?2*c*i/255:255-2*(255-c)*(255-i)/255,r[l+1]=s<128?2*u*s/255:255-2*(255-u)*(255-s)/255,r[l+2]=o<128?2*h*o/255:255-2*(255-h)*(255-o)/255;break;case"exclusion":r[l]=i+c-2*i*c/255,r[l+1]=s+u-2*s*u/255,r[l+2]=o+h-2*o*h/255;break;case"tint":r[l]=i+c*a,r[l+1]=s+u*a,r[l+2]=o+h*a}}}sendUniformData(e,r){const n=new Z(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(r.uColor,n)}}S(ea,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),S(ea,"type","BlendColor"),S(ea,"uniformLocations",["uColor"]),R.setClass(ea);const dC={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},fC=["type","image"];class ta extends Fe{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return dC[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const r=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(r,n,r.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(r,r.TEXTURE1)}createTexture(e,r){return e.getCachedTexture(r.cacheKey,r.getElement())}calculateMatrix(){const e=this.image,{width:r,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/r,-e.top/n,1]}applyTo2d(e){let{imageData:{data:r,width:n,height:i},filterBackend:{resources:s}}=e;const o=this.image;s.blendImage||(s.blendImage=Me());const a=s.blendImage,l=a.getContext("2d");a.width!==n||a.height!==i?(a.width=n,a.height=i):l.clearRect(0,0,n,i),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,n,i);const c=l.getImageData(0,0,n,i).data;for(let u=0;u<r.length;u+=4){const h=r[u],d=r[u+1],f=r[u+2],m=r[u+3],v=c[u],C=c[u+1],g=c[u+2],p=c[u+3];switch(this.mode){case"multiply":r[u]=h*v/255,r[u+1]=d*C/255,r[u+2]=f*g/255,r[u+3]=m*p/255;break;case"mask":r[u+3]=p}}}sendUniformData(e,r){const n=this.calculateMatrix();e.uniform1i(r.uImage,1),e.uniformMatrix3fv(r.uTransformMatrix,!1,n)}toObject(){return b(b({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,r){let{type:n,image:i}=e,s=ve(e,fC);return at.fromObject(i,r).then(o=>new this(b(b({},s),{},{image:o})))}}S(ta,"type","BlendImage"),S(ta,"defaults",{mode:"multiply",alpha:1}),S(ta,"uniformLocations",["uTransformMatrix","uImage"]),R.setClass(ta);class ra extends Fe{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){rc(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:r,imageData:n,filterBackend:{resources:i}}=e;const{width:s,height:o}=n;i.blurLayer1||(i.blurLayer1=Me(),i.blurLayer2=Me());const a=i.blurLayer1,l=i.blurLayer2;a.width===s&&a.height===o||(l.width=a.width=s,l.height=a.height=o);const c=a.getContext("2d"),u=l.getContext("2d"),h=15,d=.06*this.blur*.5;let f,m,v,C;for(c.putImageData(n,0,0),u.clearRect(0,0,s,o),C=-15;C<=h;C++)f=(Math.random()-.5)/4,m=C/h,v=d*m*s+f,u.globalAlpha=1-Math.abs(m),u.drawImage(a,v,f),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);for(C=-15;C<=h;C++)f=(Math.random()-.5)/4,m=C/h,v=d*m*o+f,u.globalAlpha=1-Math.abs(m),u.drawImage(a,f,v),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);r.drawImage(a,0,0);const g=r.getImageData(0,0,a.width,a.height);return c.globalAlpha=1,c.clearRect(0,0,a.width,a.height),g}sendUniformData(e,r){const n=this.chooseRightDelta();e.uniform2fv(r.uDelta,n)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const r=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const n=e*this.blur*.12;return this.horizontal?r[0]=n:r[1]=n,r}}S(ra,"type","Blur"),S(ra,"defaults",{blur:0}),S(ra,"uniformLocations",["uDelta"]),R.setClass(ra);class na extends Fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:r}}=e;const n=Math.round(255*this.brightness);for(let i=0;i<r.length;i+=4)r[i]=r[i]+n,r[i+1]=r[i+1]+n,r[i+2]=r[i+2]+n}isNeutralState(){return this.brightness===0}sendUniformData(e,r){e.uniform1f(r.uBrightness,this.brightness)}}S(na,"type","Brightness"),S(na,"defaults",{brightness:0}),S(na,"uniformLocations",["uBrightness"]),R.setClass(na);class di extends Fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const r=e.imageData.data,n=this.matrix,i=this.colorsOnly;for(let s=0;s<r.length;s+=4){const o=r[s],a=r[s+1],l=r[s+2];if(i)r[s]=o*n[0]+a*n[1]+l*n[2]+255*n[4],r[s+1]=o*n[5]+a*n[6]+l*n[7]+255*n[9],r[s+2]=o*n[10]+a*n[11]+l*n[12]+255*n[14];else{const c=r[s+3];r[s]=o*n[0]+a*n[1]+l*n[2]+c*n[3]+255*n[4],r[s+1]=o*n[5]+a*n[6]+l*n[7]+c*n[8]+255*n[9],r[s+2]=o*n[10]+a*n[11]+l*n[12]+c*n[13]+255*n[14],r[s+3]=o*n[15]+a*n[16]+l*n[17]+c*n[18]+255*n[19]}}}sendUniformData(e,r){const n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],s=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(r.uColorMatrix,!1,i),e.uniform4fv(r.uConstants,s)}toObject(){return b(b({},super.toObject()),{},{matrix:[...this.matrix]})}}function Nn(t,e){var r;const n=(S(r=class extends di{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",t),S(r,"defaults",{colorsOnly:!1,matrix:e}),r);return R.setClass(n,t),n}S(di,"type","ColorMatrix"),S(di,"defaults",{matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0}),S(di,"uniformLocations",["uColorMatrix","uConstants"]),R.setClass(di);Nn("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Nn("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Nn("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Nn("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Nn("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Nn("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Nn("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class fp extends Fe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){rc(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(r=>{r.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,r){return Promise.all((e.subFilters||[]).map(n=>R.getClass(n.type).fromObject(n,r))).then(n=>new this({subFilters:n}))}}S(fp,"type","Composed"),R.setClass(fp);class ia extends Fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:r}}=e;const n=Math.floor(255*this.contrast),i=259*(n+255)/(255*(259-n));for(let s=0;s<r.length;s+=4)r[s]=i*(r[s]-128)+128,r[s+1]=i*(r[s+1]-128)+128,r[s+2]=i*(r[s+2]-128)+128}sendUniformData(e,r){e.uniform1f(r.uContrast,this.contrast)}}S(ia,"type","Contrast"),S(ia,"defaults",{contrast:0}),S(ia,"uniformLocations",["uContrast"]),R.setClass(ia);const gC={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class sa extends Fe{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return gC[this.getCacheKey()]}applyTo2d(e){const r=e.imageData,n=r.data,i=this.matrix,s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),a=r.width,l=r.height,c=e.ctx.createImageData(a,l),u=c.data,h=this.opaque?1:0;let d,f,m,v,C,g,p,y,T,k,E,P,M;for(E=0;E<l;E++)for(k=0;k<a;k++){for(C=4*(E*a+k),d=0,f=0,m=0,v=0,M=0;M<s;M++)for(P=0;P<s;P++)p=E+M-o,g=k+P-o,p<0||p>=l||g<0||g>=a||(y=4*(p*a+g),T=i[M*s+P],d+=n[y]*T,f+=n[y+1]*T,m+=n[y+2]*T,h||(v+=n[y+3]*T));u[C]=d,u[C+1]=f,u[C+2]=m,u[C+3]=h?n[C+3]:v}e.imageData=c}sendUniformData(e,r){e.uniform1fv(r.uMatrix,this.matrix)}toObject(){return b(b({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}S(sa,"type","Convolute"),S(sa,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),S(sa,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),R.setClass(sa);const iy="Gamma";class oa extends Fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:r}}=e;const n=this.gamma,i=1/n[0],s=1/n[1],o=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,i),a.g[l]=255*Math.pow(l/255,s),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<r.length;l+=4)r[l]=a.r[r[l]],r[l+1]=a.g[r[l+1]],r[l+2]=a.b[r[l+2]]}sendUniformData(e,r){e.uniform3fv(r.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:iy,gamma:this.gamma.concat()}}}S(oa,"type",iy),S(oa,"defaults",{gamma:[1,1,1]}),S(oa,"uniformLocations",["uGamma"]),R.setClass(oa);const pC={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class aa extends Fe{applyTo2d(e){let{imageData:{data:r}}=e;for(let n,i=0;i<r.length;i+=4){switch(this.mode){case"average":n=(r[i]+r[i+1]+r[i+2])/3;break;case"lightness":n=(Math.min(r[i],r[i+1],r[i+2])+Math.max(r[i],r[i+1],r[i+2]))/2;break;case"luminosity":n=.21*r[i]+.72*r[i+1]+.07*r[i+2]}r[i]=n,r[i+1]=n,r[i+2]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return pC[this.mode]}sendUniformData(e,r){e.uniform1i(r.uMode,1)}isNeutralState(){return!1}}S(aa,"type","Grayscale"),S(aa,"defaults",{mode:"average"}),S(aa,"uniformLocations",["uMode"]),R.setClass(aa);class iu extends di{calculateMatrix(){const e=this.rotation*Math.PI,r=Zt(e),n=er(e),i=1/3,s=Math.sqrt(i)*n,o=1-r;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=r+o/3,this.matrix[1]=i*o-s,this.matrix[2]=i*o+s,this.matrix[5]=i*o+s,this.matrix[6]=r+i*o,this.matrix[7]=i*o-s,this.matrix[10]=i*o-s,this.matrix[11]=i*o+s,this.matrix[12]=r+i*o}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}S(iu,"type","HueRotation"),S(iu,"defaults",{rotation:0}),R.setClass(iu);class la extends Fe{applyTo2d(e){let{imageData:{data:r}}=e;for(let n=0;n<r.length;n+=4)r[n]=255-r[n],r[n+1]=255-r[n+1],r[n+2]=255-r[n+2],this.alpha&&(r[n+3]=255-r[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,r){e.uniform1i(r.uInvert,Number(this.invert)),e.uniform1i(r.uAlpha,Number(this.alpha))}}S(la,"type","Invert"),S(la,"defaults",{alpha:!1,invert:!0}),S(la,"uniformLocations",["uInvert","uAlpha"]),R.setClass(la);class ca extends Fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:r}}=e;const n=this.noise;for(let i=0;i<r.length;i+=4){const s=(.5-Math.random())*n;r[i]+=s,r[i+1]+=s,r[i+2]+=s}}sendUniformData(e,r){e.uniform1f(r.uNoise,this.noise/255),e.uniform1f(r.uSeed,Math.random())}isNeutralState(){return this.noise===0}}S(ca,"type","Noise"),S(ca,"defaults",{noise:0}),S(ca,"uniformLocations",["uNoise","uSeed"]),R.setClass(ca);class ua extends Fe{applyTo2d(e){let{imageData:{data:r,width:n,height:i}}=e;for(let s=0;s<i;s+=this.blocksize)for(let o=0;o<n;o+=this.blocksize){const a=4*s*n+4*o,l=r[a],c=r[a+1],u=r[a+2],h=r[a+3];for(let d=s;d<Math.min(s+this.blocksize,i);d++)for(let f=o;f<Math.min(o+this.blocksize,n);f++){const m=4*d*n+4*f;r[m]=l,r[m+1]=c,r[m+2]=u,r[m+3]=h}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,r){e.uniform1f(r.uBlocksize,this.blocksize)}}S(ua,"type","Pixelate"),S(ua,"defaults",{blocksize:4}),S(ua,"uniformLocations",["uBlocksize"]),R.setClass(ua);class ha extends Fe{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:r}}=e;const n=255*this.distance,i=new Z(this.color).getSource(),s=[i[0]-n,i[1]-n,i[2]-n],o=[i[0]+n,i[1]+n,i[2]+n];for(let a=0;a<r.length;a+=4){const l=r[a],c=r[a+1],u=r[a+2];l>s[0]&&c>s[1]&&u>s[2]&&l<o[0]&&c<o[1]&&u<o[2]&&(r[a+3]=0)}}sendUniformData(e,r){const n=new Z(this.color).getSource(),i=this.distance,s=[0+n[0]/255-i,0+n[1]/255-i,0+n[2]/255-i,1],o=[n[0]/255+i,n[1]/255+i,n[2]/255+i,1];e.uniform4fv(r.uLow,s),e.uniform4fv(r.uHigh,o)}}S(ha,"type","RemoveColor"),S(ha,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),S(ha,"uniformLocations",["uLow","uHigh"]),R.setClass(ha);class da extends Fe{sendUniformData(e,r){e.uniform2fv(r.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(r.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),r=this.tempScale,n=this.getFilterWindow(),i=new Array(n);for(let s=1;s<=n;s++)i[s-1]=e(s*r);return i}generateShader(e){const r=new Array(e);for(let n=1;n<=e;n++)r[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(r.map((n,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){rc(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return r=>{if(r>=e||r<=-e)return 0;if(r<11920929e-14&&r>-11920929e-14)return 1;const n=(r*=Math.PI)/e;return Math.sin(r)/r*Math.sin(n)/n}}applyTo2d(e){const r=e.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;const s=r.width,o=r.height,a=Math.round(s*n),l=Math.round(o*i);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,s,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,s,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,r,n,i,s){const o=e.imageData,a=.5;let l=!1,c=!1,u=r*a,h=n*a;const d=e.filterBackend.resources;let f=0,m=0;const v=r;let C=0;d.sliceByTwo||(d.sliceByTwo=Me());const g=d.sliceByTwo;(g.width<1.5*r||g.height<n)&&(g.width=1.5*r,g.height=n);const p=g.getContext("2d");for(p.clearRect(0,0,1.5*r,n),p.putImageData(o,0,0),i=Math.floor(i),s=Math.floor(s);!l||!c;)r=u,n=h,i<Math.floor(u*a)?u=Math.floor(u*a):(u=i,l=!0),s<Math.floor(h*a)?h=Math.floor(h*a):(h=s,c=!0),p.drawImage(g,f,m,r,n,v,C,u,h),f=v,m=C,C+=h;return p.getImageData(f,m,i,s)}lanczosResize(e,r,n,i,s){const o=e.imageData.data,a=e.ctx.createImageData(i,s),l=a.data,c=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,h=this.rcpScaleY,d=2/this.rcpScaleX,f=2/this.rcpScaleY,m=Math.ceil(u*this.lanczosLobes/2),v=Math.ceil(h*this.lanczosLobes/2),C={},g={x:0,y:0},p={x:0,y:0};return function y(T){let k,E,P,M,z,B,Y,te,U,ie,V;for(g.x=(T+.5)*u,p.x=Math.floor(g.x),k=0;k<s;k++){for(g.y=(k+.5)*h,p.y=Math.floor(g.y),z=0,B=0,Y=0,te=0,U=0,E=p.x-m;E<=p.x+m;E++)if(!(E<0||E>=r)){ie=Math.floor(1e3*Math.abs(E-g.x)),C[ie]||(C[ie]={});for(let ye=p.y-v;ye<=p.y+v;ye++)ye<0||ye>=n||(V=Math.floor(1e3*Math.abs(ye-g.y)),C[ie][V]||(C[ie][V]=c(Math.sqrt(Math.pow(ie*d,2)+Math.pow(V*f,2))/1e3)),P=C[ie][V],P>0&&(M=4*(ye*r+E),z+=P,B+=P*o[M],Y+=P*o[M+1],te+=P*o[M+2],U+=P*o[M+3]))}M=4*(k*i+T),l[M]=B/z,l[M+1]=Y/z,l[M+2]=te/z,l[M+3]=U/z}return++T<i?y(T):a}(0)}bilinearFiltering(e,r,n,i,s){let o,a,l,c,u,h,d,f,m,v,C,g,p,y=0;const T=this.rcpScaleX,k=this.rcpScaleY,E=4*(r-1),P=e.imageData.data,M=e.ctx.createImageData(i,s),z=M.data;for(d=0;d<s;d++)for(f=0;f<i;f++)for(u=Math.floor(T*f),h=Math.floor(k*d),m=T*f-u,v=k*d-h,p=4*(h*r+u),C=0;C<4;C++)o=P[p+C],a=P[p+4+C],l=P[p+E+C],c=P[p+E+4+C],g=o*(1-m)*(1-v)+a*m*(1-v)+l*v*(1-m)+c*m*v,z[y++]=g;return M}hermiteFastResize(e,r,n,i,s){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),u=e.imageData.data,h=e.ctx.createImageData(i,s),d=h.data;for(let f=0;f<s;f++)for(let m=0;m<i;m++){const v=4*(m+f*i);let C=0,g=0,p=0,y=0,T=0,k=0,E=0;const P=(f+.5)*a;for(let M=Math.floor(f*a);M<(f+1)*a;M++){const z=Math.abs(P-(M+.5))/c,B=(m+.5)*o,Y=z*z;for(let te=Math.floor(m*o);te<(m+1)*o;te++){let U=Math.abs(B-(te+.5))/l;const ie=Math.sqrt(Y+U*U);ie>1&&ie<-1||(C=2*ie*ie*ie-3*ie*ie+1,C>0&&(U=4*(te+M*r),E+=C*u[U+3],p+=C,u[U+3]<255&&(C=C*u[U+3]/250),y+=C*u[U],T+=C*u[U+1],k+=C*u[U+2],g+=C))}}d[v]=y/g,d[v+1]=T/g,d[v+2]=k/g,d[v+3]=E/p}return h}}S(da,"type","Resize"),S(da,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),S(da,"uniformLocations",["uDelta","uTaps"]),R.setClass(da);class fa extends Fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:r}}=e;const n=-this.saturation;for(let i=0;i<r.length;i+=4){const s=Math.max(r[i],r[i+1],r[i+2]);r[i]+=s!==r[i]?(s-r[i])*n:0,r[i+1]+=s!==r[i+1]?(s-r[i+1])*n:0,r[i+2]+=s!==r[i+2]?(s-r[i+2])*n:0}}sendUniformData(e,r){e.uniform1f(r.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}S(fa,"type","Saturation"),S(fa,"defaults",{saturation:0}),S(fa,"uniformLocations",["uSaturation"]),R.setClass(fa);class ga extends Fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:r}}=e;const n=-this.vibrance;for(let i=0;i<r.length;i+=4){const s=Math.max(r[i],r[i+1],r[i+2]),o=(r[i]+r[i+1]+r[i+2])/3,a=2*Math.abs(s-o)/255*n;r[i]+=s!==r[i]?(s-r[i])*a:0,r[i+1]+=s!==r[i+1]?(s-r[i+1])*a:0,r[i+2]+=s!==r[i+2]?(s-r[i+2])*a:0}}sendUniformData(e,r){e.uniform1f(r.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}S(ga,"type","Vibrance"),S(ga,"defaults",{vibrance:0}),S(ga,"uniformLocations",["uVibrance"]),R.setClass(ga);const zn=t=>{if(t.current){const e=t.current.width,r=t.current.height,n=t.current.getZoom(),i=t.current.viewportTransform,s=-i[4]/n,o=-i[5]/n,a=e/n,l=r/n;return{viewportLeft:s,viewportTop:o,viewportWidth:a,viewportHeight:l}}return{viewportLeft:0,viewportTop:0,viewportWidth:0,viewportHeight:0}},su=50,Lt=100,mC=(t,e)=>{var a;const{viewportLeft:r,viewportTop:n,viewportWidth:i,viewportHeight:s}=zn(t),o=new Ur({fill:e,left:r+Math.random()*(i-Lt),top:n+Math.random()*(s-Lt)});(a=t.current)==null||a.add(o)},vC=(t,e)=>{var a;const{viewportLeft:r,viewportTop:n,viewportWidth:i,viewportHeight:s}=zn(t),o=new ir({radius:su,fill:e,left:r+Math.random()*(i-2*su),top:n+Math.random()*(s-2*su)});(a=t.current)==null||a.add(o)},yC=(t,e)=>{var a;const{viewportLeft:r,viewportTop:n,viewportWidth:i,viewportHeight:s}=zn(t),o=new lr("Hello, MAXA!",{left:r+Math.random()*(i-Lt),top:n+Math.random()*(s-Lt),fontSize:24,fill:e});(a=t.current)==null||a.add(o)},_C=(t,e)=>{var a;const{viewportLeft:r,viewportTop:n,viewportWidth:i,viewportHeight:s}=zn(t),o=new At({left:r+Math.random()*(i-Lt),top:n+Math.random()*(s-Lt),width:Lt,height:Lt/2,fill:e});(a=t.current)==null||a.add(o)},xC=(t,e)=>{var a;const{viewportLeft:r,viewportTop:n,viewportWidth:i,viewportHeight:s}=zn(t),o=new At({left:r+Math.random()*(i-Lt),top:n+Math.random()*(s-Lt),width:Lt,height:Lt,fill:e});(a=t.current)==null||a.add(o)},wC=(t,e,r)=>{var i,s;r(t);const n=(i=e.current)==null?void 0:i.getActiveObject();n&&(n.set("fill",t),(s=e.current)==null||s.requestRenderAll())},SC=t=>{t.current&&confirm(" ,    ?")&&(t.current.clear(),t.current.backgroundColor="#fff",localStorage.removeItem("canvas"))},_l=(t,e)=>JSON.stringify(t)===JSON.stringify(e),CC=(t,e,r)=>{if(t.current){const n=t.current.getActiveObject();if(n){const i=t.current.toObject().objects;e(s=>[...s,i.filter(o=>!_l(o,n))]),r([]),n instanceof Xr?(n.getObjects().forEach(o=>{var a;return(a=t.current)==null?void 0:a.remove(o)}),t.current.discardActiveObject()):t.current.remove(n)}}},bC=t=>{t.current&&(t.current.setZoom(1),t.current.setViewportTransform([1,0,0,1,0,0]))},TC=(t,e)=>{if(t.current){const r=t.current.toJSON(),n=t.current.viewportTransform;localStorage.setItem("canvas",JSON.stringify({json:r,viewportTransform:n}));const i=t.current.toSVG();e(i)}},xn=(t,e,r)=>{var n;e!=null&&e.length||(n=t.current)==null||n.on("object:added",r)},Hi=G.createContext({history:[],setHistory:()=>{},redoHistory:[],setRedoHistory:()=>{},savedObjects:[],saveCanvasState:()=>{},undo:()=>{},redo:()=>{},fabricRef:{current:null},setCanvasSvg:()=>{},canvasSvg:"",selectedColor:"",setSelectedColor:()=>{},downloadImage:()=>{},addedListeners:[]}),OC=({children:t,fabricRef:e})=>{var g,p;const[r,n]=G.useState([]),[i,s]=G.useState([]),[o,a]=G.useState(""),[l,c]=G.useState("#307BDF"),u=(g=JSON.parse(localStorage.getItem("canvas")??"{}").json)==null?void 0:g.objects,h=(p=e.current)==null?void 0:p.__eventListeners["object:added"],d=()=>{if(e.current){const y=e.current.toDataURL({format:"png",multiplier:1}),T=document.createElement("a");T.href=y,T.download="canvas_image.png",T.click()}},f=()=>{if(e.current){const y=e.current.toObject().objects;n(T=>_l(T[0],y)?T:[...T,y])}},m=()=>{e.current&&e.current.remove(...e.current.getObjects())},v=()=>{if(e.current&&r.length>0){if(r.length===1&&_l(r[0],u))return;m(),r.length>1&&(e.current.off("object:added"),cp.enlivenObjects(r[r.length-2]).then(y=>{y.forEach(T=>{var k;T instanceof Ne&&((k=e.current)==null||k.add(T))})})),s(y=>[...y,r[r.length-1]]),n(y=>y.slice(0,-1))}},C=()=>{e.current&&i.length>0&&(m(),e.current.off("object:added"),cp.enlivenObjects(i[i.length-1]).then(y=>{y.forEach(T=>{var k;T instanceof Ne&&((k=e.current)==null||k.add(T))})}),n(y=>[...y,i[i.length-1]]),s(y=>y.slice(0,-1)))};return F.jsx(Hi.Provider,{value:{history:r,setHistory:n,redoHistory:i,setRedoHistory:s,savedObjects:u,saveCanvasState:f,undo:v,redo:C,fabricRef:e,setCanvasSvg:a,canvasSvg:o,selectedColor:l,setSelectedColor:c,downloadImage:d,addedListeners:h},children:t})},dn={"canvas_wrapper--grab":"_canvas_wrapper--grab_qnzaj_1","canvas_wrapper--grabbing":"_canvas_wrapper--grabbing_qnzaj_4"},kC=()=>{const t=G.useRef(null),e=G.useRef(null),r=G.useRef(!1),{fabricRef:n}=G.useContext(Hi);return n?(G.useEffect(()=>{(()=>{var s;if(t.current){const o=window.innerWidth,a=window.innerHeight;n.current=new yh(t.current,{width:o,height:a,backgroundColor:"#fff"}),(s=n.current)==null||s.renderAll();const l=localStorage.getItem("canvas");if(l){const{json:c,viewportTransform:u}=JSON.parse(l);n.current.loadFromJSON(c).then(function(){var h;(h=n.current)==null||h.setViewportTransform(u)})}n.current.on("mouse:wheel",c=>{var d,f;c.e.preventDefault(),c.e.stopPropagation();const u=c.e.deltaY;let h=((d=n.current)==null?void 0:d.getZoom())||1;h*=.999**u,h>20&&(h=20),h<.01&&(h=.01),(f=n.current)==null||f.zoomToPoint(new O(c.e.offsetX,c.e.offsetY),h)}),n.current.on("mouse:down",c=>{var h;c.e.button===1&&r.current&&n.current&&(n.current.set({isDrawingMode:!0}),n.current.selection=!1),r.current&&((h=e.current)==null||h.classList.add(dn["canvas_wrapper--grabbing"]))}),n.current.on("mouse:move",c=>{var h;const u=c.e;u.buttons===1&&r.current&&((h=n.current)==null||h.relativePan(new O(u.movementX,u.movementY)))}),n.current.on("mouse:up",()=>{var c;n.current&&(n.current.set({isDrawingMode:!1}),n.current.selection=!0,(c=e.current)==null||c.classList.remove(dn["canvas_wrapper--grabbing"]))}),document.addEventListener("keydown",c=>{var u;c.key===" "&&(r.current=!0,(u=e.current)==null||u.classList.add(dn["canvas_wrapper--grab"]))}),document.addEventListener("keyup",c=>{var u,h;c.key===" "&&n.current&&(r.current=!1,n.current.set({isDrawingMode:!1}),n.current.selection=!0,(u=e.current)==null||u.classList.remove(dn["canvas_wrapper--grabbing"]),(h=e.current)==null||h.classList.remove(dn["canvas_wrapper--grab"]))})}})()},[n]),F.jsx("div",{className:dn.canvas_wrapper,ref:e,children:F.jsx("canvas",{ref:t,className:dn.canvas})})):null};var sy={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},gp=Tn.createContext&&Tn.createContext(sy),EC=["attr","size","title"];function MC(t,e){if(t==null)return{};var r=PC(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function PC(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xl.apply(this,arguments)}function pp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pp(Object(r),!0).forEach(function(n){DC(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pp(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DC(t,e,r){return e=AC(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AC(t){var e=jC(t,"string");return typeof e=="symbol"?e:e+""}function jC(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oy(t){return t&&t.map((e,r)=>Tn.createElement(e.tag,wl({key:r},e.attr),oy(e.child)))}function ot(t){return e=>Tn.createElement($C,xl({attr:wl({},t.attr)},e),oy(t.child))}function $C(t){var e=r=>{var{attr:n,size:i,title:s}=t,o=MC(t,EC),a=i||r.size||"1em",l;return r.className&&(l=r.className),t.className&&(l=(l?l+" ":"")+t.className),Tn.createElement("svg",xl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:l,style:wl(wl({color:t.color||r.color},r.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Tn.createElement("title",null,s),t.children)};return gp!==void 0?Tn.createElement(gp.Consumer,null,r=>e(r)):e(sy)}function LC(t){return ot({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"},child:[]}]})(t)}const FC="_modal_2vu3v_1",RC="_code_2vu3v_16",IC="_title_2vu3v_20",BC="_close_2vu3v_25",pa={modal:FC,code:RC,title:IC,close:BC},NC=()=>{const{canvasSvg:t,setCanvasSvg:e}=G.useContext(Hi);return t?F.jsxs("div",{className:pa.modal,children:[F.jsx("button",{className:pa.close,onClick:()=>e(""),children:F.jsx(LC,{})}),F.jsx("h2",{className:pa.title,children:"SVG"}),F.jsx("code",{className:pa.code,children:t})]}):null};function zC(t){return ot({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.022 1.566a1.13 1.13 0 0 1 1.96 0l6.857 11.667c.457.778-.092 1.767-.98 1.767H1.144c-.889 0-1.437-.99-.98-1.767z"},child:[]}]})(t)}function HC(t){return ot({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"},child:[]}]})(t)}function WC(t){return ot({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function VC(t){return ot({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"},child:[]}]})(t)}function UC(t){return ot({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(t)}function XC(t){return ot({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function YC(t){return ot({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function GC(t){return ot({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function KC(t){return ot({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z"},child:[]}]})(t)}function qC(t){return ot({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM20 11h3v2h-3v3h-2v-3h-3v-2h3V8h2v3z"},child:[]}]})(t)}function QC(t){return ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21C21.5523 4 22 4.44772 22 5V19C22 19.5523 21.5523 20 21 20H3C2.44772 20 2 19.5523 2 19V5C2 4.44772 2.44772 4 3 4Z"},child:[]}]})(t)}function JC(t){return ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}const ZC=({fabricRef:t,className:e})=>{const r=()=>{t.current&&(t.current.isDrawingMode?(t.current.isDrawingMode=!1,t.current.freeDrawingBrush=void 0):(t.current.isDrawingMode=!0,t.current.freeDrawingBrush=new vl(t.current)))};return F.jsx("button",{className:e,onClick:r,children:F.jsx(VC,{size:20})})};var nc={},ay={exports:{}},eb="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tb=eb,rb=tb;function ly(){}function cy(){}cy.resetWarningCache=ly;var nb=function(){function t(n,i,s,o,a,l){if(l!==rb){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:cy,resetWarningCache:ly};return r.PropTypes=r,r};ay.exports=nb();var uy=ay.exports,we={},oo={},ib=typeof ls=="object"&&ls&&ls.Object===Object&&ls,hy=ib,sb=hy,ob=typeof self=="object"&&self&&self.Object===Object&&self,ab=sb||ob||Function("return this")(),tr=ab,lb=tr,cb=lb.Symbol,ao=cb,mp=ao,dy=Object.prototype,ub=dy.hasOwnProperty,hb=dy.toString,ss=mp?mp.toStringTag:void 0;function db(t){var e=ub.call(t,ss),r=t[ss];try{t[ss]=void 0;var n=!0}catch{}var i=hb.call(t);return n&&(e?t[ss]=r:delete t[ss]),i}var fb=db,gb=Object.prototype,pb=gb.toString;function mb(t){return pb.call(t)}var vb=mb,vp=ao,yb=fb,_b=vb,xb="[object Null]",wb="[object Undefined]",yp=vp?vp.toStringTag:void 0;function Sb(t){return t==null?t===void 0?wb:xb:yp&&yp in Object(t)?yb(t):_b(t)}var Hn=Sb,Cb=Array.isArray,Ot=Cb;function bb(t){return t!=null&&typeof t=="object"}var pr=bb,Tb=Hn,Ob=Ot,kb=pr,Eb="[object String]";function Mb(t){return typeof t=="string"||!Ob(t)&&kb(t)&&Tb(t)==Eb}var Pb=Mb;function Db(t){return function(e,r,n){for(var i=-1,s=Object(e),o=n(e),a=o.length;a--;){var l=o[t?a:++i];if(r(s[l],l,s)===!1)break}return e}}var Ab=Db,jb=Ab,$b=jb(),fy=$b;function Lb(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Fb=Lb,Rb=Hn,Ib=pr,Bb="[object Arguments]";function Nb(t){return Ib(t)&&Rb(t)==Bb}var zb=Nb,_p=zb,Hb=pr,gy=Object.prototype,Wb=gy.hasOwnProperty,Vb=gy.propertyIsEnumerable,Ub=_p(function(){return arguments}())?_p:function(t){return Hb(t)&&Wb.call(t,"callee")&&!Vb.call(t,"callee")},Xd=Ub,Sl={exports:{}};function Xb(){return!1}var Yb=Xb;Sl.exports;(function(t,e){var r=tr,n=Yb,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?r.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||n;t.exports=c})(Sl,Sl.exports);var ic=Sl.exports,Gb=9007199254740991,Kb=/^(?:0|[1-9]\d*)$/;function qb(t,e){var r=typeof t;return e=e??Gb,!!e&&(r=="number"||r!="symbol"&&Kb.test(t))&&t>-1&&t%1==0&&t<e}var Yd=qb,Qb=9007199254740991;function Jb(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Qb}var Gd=Jb,Zb=Hn,eT=Gd,tT=pr,rT="[object Arguments]",nT="[object Array]",iT="[object Boolean]",sT="[object Date]",oT="[object Error]",aT="[object Function]",lT="[object Map]",cT="[object Number]",uT="[object Object]",hT="[object RegExp]",dT="[object Set]",fT="[object String]",gT="[object WeakMap]",pT="[object ArrayBuffer]",mT="[object DataView]",vT="[object Float32Array]",yT="[object Float64Array]",_T="[object Int8Array]",xT="[object Int16Array]",wT="[object Int32Array]",ST="[object Uint8Array]",CT="[object Uint8ClampedArray]",bT="[object Uint16Array]",TT="[object Uint32Array]",fe={};fe[vT]=fe[yT]=fe[_T]=fe[xT]=fe[wT]=fe[ST]=fe[CT]=fe[bT]=fe[TT]=!0;fe[rT]=fe[nT]=fe[pT]=fe[iT]=fe[mT]=fe[sT]=fe[oT]=fe[aT]=fe[lT]=fe[cT]=fe[uT]=fe[hT]=fe[dT]=fe[fT]=fe[gT]=!1;function OT(t){return tT(t)&&eT(t.length)&&!!fe[Zb(t)]}var kT=OT;function ET(t){return function(e){return t(e)}}var Kd=ET,Cl={exports:{}};Cl.exports;(function(t,e){var r=hy,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s&&r.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(Cl,Cl.exports);var qd=Cl.exports,MT=kT,PT=Kd,xp=qd,wp=xp&&xp.isTypedArray,DT=wp?PT(wp):MT,Qd=DT,AT=Fb,jT=Xd,$T=Ot,LT=ic,FT=Yd,RT=Qd,IT=Object.prototype,BT=IT.hasOwnProperty;function NT(t,e){var r=$T(t),n=!r&&jT(t),i=!r&&!n&&LT(t),s=!r&&!n&&!i&&RT(t),o=r||n||i||s,a=o?AT(t.length,String):[],l=a.length;for(var c in t)(e||BT.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||FT(c,l)))&&a.push(c);return a}var py=NT,zT=Object.prototype;function HT(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||zT;return t===r}var Jd=HT;function WT(t,e){return function(r){return t(e(r))}}var my=WT,VT=my,UT=VT(Object.keys,Object),XT=UT,YT=Jd,GT=XT,KT=Object.prototype,qT=KT.hasOwnProperty;function QT(t){if(!YT(t))return GT(t);var e=[];for(var r in Object(t))qT.call(t,r)&&r!="constructor"&&e.push(r);return e}var JT=QT;function ZT(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Bt=ZT,eO=Hn,tO=Bt,rO="[object AsyncFunction]",nO="[object Function]",iO="[object GeneratorFunction]",sO="[object Proxy]";function oO(t){if(!tO(t))return!1;var e=eO(t);return e==nO||e==iO||e==rO||e==sO}var Zd=oO,aO=Zd,lO=Gd;function cO(t){return t!=null&&lO(t.length)&&!aO(t)}var Wi=cO,uO=py,hO=JT,dO=Wi;function fO(t){return dO(t)?uO(t):hO(t)}var lo=fO,gO=fy,pO=lo;function mO(t,e){return t&&gO(t,e,pO)}var vy=mO;function vO(t){return t}var sc=vO,yO=sc;function _O(t){return typeof t=="function"?t:yO}var yy=_O,xO=vy,wO=yy;function SO(t,e){return t&&xO(t,wO(e))}var ef=SO,CO=my,bO=CO(Object.getPrototypeOf,Object),tf=bO,TO=Hn,OO=tf,kO=pr,EO="[object Object]",MO=Function.prototype,PO=Object.prototype,_y=MO.toString,DO=PO.hasOwnProperty,AO=_y.call(Object);function jO(t){if(!kO(t)||TO(t)!=EO)return!1;var e=OO(t);if(e===null)return!0;var r=DO.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&_y.call(r)==AO}var xy=jO;function $O(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var wy=$O;function LO(){this.__data__=[],this.size=0}var FO=LO;function RO(t,e){return t===e||t!==t&&e!==e}var co=RO,IO=co;function BO(t,e){for(var r=t.length;r--;)if(IO(t[r][0],e))return r;return-1}var oc=BO,NO=oc,zO=Array.prototype,HO=zO.splice;function WO(t){var e=this.__data__,r=NO(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():HO.call(e,r,1),--this.size,!0}var VO=WO,UO=oc;function XO(t){var e=this.__data__,r=UO(e,t);return r<0?void 0:e[r][1]}var YO=XO,GO=oc;function KO(t){return GO(this.__data__,t)>-1}var qO=KO,QO=oc;function JO(t,e){var r=this.__data__,n=QO(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var ZO=JO,ek=FO,tk=VO,rk=YO,nk=qO,ik=ZO;function Vi(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Vi.prototype.clear=ek;Vi.prototype.delete=tk;Vi.prototype.get=rk;Vi.prototype.has=nk;Vi.prototype.set=ik;var ac=Vi,sk=ac;function ok(){this.__data__=new sk,this.size=0}var ak=ok;function lk(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var ck=lk;function uk(t){return this.__data__.get(t)}var hk=uk;function dk(t){return this.__data__.has(t)}var fk=dk,gk=tr,pk=gk["__core-js_shared__"],mk=pk,ou=mk,Sp=function(){var t=/[^.]+$/.exec(ou&&ou.keys&&ou.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function vk(t){return!!Sp&&Sp in t}var yk=vk,_k=Function.prototype,xk=_k.toString;function wk(t){if(t!=null){try{return xk.call(t)}catch{}try{return t+""}catch{}}return""}var Sy=wk,Sk=Zd,Ck=yk,bk=Bt,Tk=Sy,Ok=/[\\^$.*+?()[\]{}|]/g,kk=/^\[object .+?Constructor\]$/,Ek=Function.prototype,Mk=Object.prototype,Pk=Ek.toString,Dk=Mk.hasOwnProperty,Ak=RegExp("^"+Pk.call(Dk).replace(Ok,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jk(t){if(!bk(t)||Ck(t))return!1;var e=Sk(t)?Ak:kk;return e.test(Tk(t))}var $k=jk;function Lk(t,e){return t==null?void 0:t[e]}var Fk=Lk,Rk=$k,Ik=Fk;function Bk(t,e){var r=Ik(t,e);return Rk(r)?r:void 0}var Wn=Bk,Nk=Wn,zk=tr,Hk=Nk(zk,"Map"),rf=Hk,Wk=Wn,Vk=Wk(Object,"create"),lc=Vk,Cp=lc;function Uk(){this.__data__=Cp?Cp(null):{},this.size=0}var Xk=Uk;function Yk(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Gk=Yk,Kk=lc,qk="__lodash_hash_undefined__",Qk=Object.prototype,Jk=Qk.hasOwnProperty;function Zk(t){var e=this.__data__;if(Kk){var r=e[t];return r===qk?void 0:r}return Jk.call(e,t)?e[t]:void 0}var eE=Zk,tE=lc,rE=Object.prototype,nE=rE.hasOwnProperty;function iE(t){var e=this.__data__;return tE?e[t]!==void 0:nE.call(e,t)}var sE=iE,oE=lc,aE="__lodash_hash_undefined__";function lE(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=oE&&e===void 0?aE:e,this}var cE=lE,uE=Xk,hE=Gk,dE=eE,fE=sE,gE=cE;function Ui(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ui.prototype.clear=uE;Ui.prototype.delete=hE;Ui.prototype.get=dE;Ui.prototype.has=fE;Ui.prototype.set=gE;var pE=Ui,bp=pE,mE=ac,vE=rf;function yE(){this.size=0,this.__data__={hash:new bp,map:new(vE||mE),string:new bp}}var _E=yE;function xE(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var wE=xE,SE=wE;function CE(t,e){var r=t.__data__;return SE(e)?r[typeof e=="string"?"string":"hash"]:r.map}var cc=CE,bE=cc;function TE(t){var e=bE(this,t).delete(t);return this.size-=e?1:0,e}var OE=TE,kE=cc;function EE(t){return kE(this,t).get(t)}var ME=EE,PE=cc;function DE(t){return PE(this,t).has(t)}var AE=DE,jE=cc;function $E(t,e){var r=jE(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var LE=$E,FE=_E,RE=OE,IE=ME,BE=AE,NE=LE;function Xi(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Xi.prototype.clear=FE;Xi.prototype.delete=RE;Xi.prototype.get=IE;Xi.prototype.has=BE;Xi.prototype.set=NE;var nf=Xi,zE=ac,HE=rf,WE=nf,VE=200;function UE(t,e){var r=this.__data__;if(r instanceof zE){var n=r.__data__;if(!HE||n.length<VE-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new WE(n)}return r.set(t,e),this.size=r.size,this}var XE=UE,YE=ac,GE=ak,KE=ck,qE=hk,QE=fk,JE=XE;function Yi(t){var e=this.__data__=new YE(t);this.size=e.size}Yi.prototype.clear=GE;Yi.prototype.delete=KE;Yi.prototype.get=qE;Yi.prototype.has=QE;Yi.prototype.set=JE;var uc=Yi,ZE="__lodash_hash_undefined__";function eM(t){return this.__data__.set(t,ZE),this}var tM=eM;function rM(t){return this.__data__.has(t)}var nM=rM,iM=nf,sM=tM,oM=nM;function bl(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new iM;++e<r;)this.add(t[e])}bl.prototype.add=bl.prototype.push=sM;bl.prototype.has=oM;var aM=bl;function lM(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var cM=lM;function uM(t,e){return t.has(e)}var hM=uM,dM=aM,fM=cM,gM=hM,pM=1,mM=2;function vM(t,e,r,n,i,s){var o=r&pM,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var h=-1,d=!0,f=r&mM?new dM:void 0;for(s.set(t,e),s.set(e,t);++h<a;){var m=t[h],v=e[h];if(n)var C=o?n(v,m,h,e,t,s):n(m,v,h,t,e,s);if(C!==void 0){if(C)continue;d=!1;break}if(f){if(!fM(e,function(g,p){if(!gM(f,p)&&(m===g||i(m,g,r,n,s)))return f.push(p)})){d=!1;break}}else if(!(m===v||i(m,v,r,n,s))){d=!1;break}}return s.delete(t),s.delete(e),d}var Cy=vM,yM=tr,_M=yM.Uint8Array,by=_M;function xM(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var wM=xM;function SM(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var CM=SM,Tp=ao,Op=by,bM=co,TM=Cy,OM=wM,kM=CM,EM=1,MM=2,PM="[object Boolean]",DM="[object Date]",AM="[object Error]",jM="[object Map]",$M="[object Number]",LM="[object RegExp]",FM="[object Set]",RM="[object String]",IM="[object Symbol]",BM="[object ArrayBuffer]",NM="[object DataView]",kp=Tp?Tp.prototype:void 0,au=kp?kp.valueOf:void 0;function zM(t,e,r,n,i,s,o){switch(r){case NM:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case BM:return!(t.byteLength!=e.byteLength||!s(new Op(t),new Op(e)));case PM:case DM:case $M:return bM(+t,+e);case AM:return t.name==e.name&&t.message==e.message;case LM:case RM:return t==e+"";case jM:var a=OM;case FM:var l=n&EM;if(a||(a=kM),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;n|=MM,o.set(t,e);var u=TM(a(t),a(e),n,i,s,o);return o.delete(t),u;case IM:if(au)return au.call(t)==au.call(e)}return!1}var HM=zM;function WM(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Ty=WM,VM=Ty,UM=Ot;function XM(t,e,r){var n=e(t);return UM(t)?n:VM(n,r(t))}var Oy=XM;function YM(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}var GM=YM;function KM(){return[]}var ky=KM,qM=GM,QM=ky,JM=Object.prototype,ZM=JM.propertyIsEnumerable,Ep=Object.getOwnPropertySymbols,eP=Ep?function(t){return t==null?[]:(t=Object(t),qM(Ep(t),function(e){return ZM.call(t,e)}))}:QM,sf=eP,tP=Oy,rP=sf,nP=lo;function iP(t){return tP(t,nP,rP)}var Ey=iP,Mp=Ey,sP=1,oP=Object.prototype,aP=oP.hasOwnProperty;function lP(t,e,r,n,i,s){var o=r&sP,a=Mp(t),l=a.length,c=Mp(e),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var d=a[h];if(!(o?d in e:aP.call(e,d)))return!1}var f=s.get(t),m=s.get(e);if(f&&m)return f==e&&m==t;var v=!0;s.set(t,e),s.set(e,t);for(var C=o;++h<l;){d=a[h];var g=t[d],p=e[d];if(n)var y=o?n(p,g,d,e,t,s):n(g,p,d,t,e,s);if(!(y===void 0?g===p||i(g,p,r,n,s):y)){v=!1;break}C||(C=d=="constructor")}if(v&&!C){var T=t.constructor,k=e.constructor;T!=k&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof k=="function"&&k instanceof k)&&(v=!1)}return s.delete(t),s.delete(e),v}var cP=lP,uP=Wn,hP=tr,dP=uP(hP,"DataView"),fP=dP,gP=Wn,pP=tr,mP=gP(pP,"Promise"),vP=mP,yP=Wn,_P=tr,xP=yP(_P,"Set"),wP=xP,SP=Wn,CP=tr,bP=SP(CP,"WeakMap"),TP=bP,xh=fP,wh=rf,Sh=vP,Ch=wP,bh=TP,My=Hn,Gi=Sy,Pp="[object Map]",OP="[object Object]",Dp="[object Promise]",Ap="[object Set]",jp="[object WeakMap]",$p="[object DataView]",kP=Gi(xh),EP=Gi(wh),MP=Gi(Sh),PP=Gi(Ch),DP=Gi(bh),mn=My;(xh&&mn(new xh(new ArrayBuffer(1)))!=$p||wh&&mn(new wh)!=Pp||Sh&&mn(Sh.resolve())!=Dp||Ch&&mn(new Ch)!=Ap||bh&&mn(new bh)!=jp)&&(mn=function(t){var e=My(t),r=e==OP?t.constructor:void 0,n=r?Gi(r):"";if(n)switch(n){case kP:return $p;case EP:return Pp;case MP:return Dp;case PP:return Ap;case DP:return jp}return e});var hc=mn,lu=uc,AP=Cy,jP=HM,$P=cP,Lp=hc,Fp=Ot,Rp=ic,LP=Qd,FP=1,Ip="[object Arguments]",Bp="[object Array]",ma="[object Object]",RP=Object.prototype,Np=RP.hasOwnProperty;function IP(t,e,r,n,i,s){var o=Fp(t),a=Fp(e),l=o?Bp:Lp(t),c=a?Bp:Lp(e);l=l==Ip?ma:l,c=c==Ip?ma:c;var u=l==ma,h=c==ma,d=l==c;if(d&&Rp(t)){if(!Rp(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new lu),o||LP(t)?AP(t,e,r,n,i,s):jP(t,e,l,r,n,i,s);if(!(r&FP)){var f=u&&Np.call(t,"__wrapped__"),m=h&&Np.call(e,"__wrapped__");if(f||m){var v=f?t.value():t,C=m?e.value():e;return s||(s=new lu),i(v,C,r,n,s)}}return d?(s||(s=new lu),$P(t,e,r,n,i,s)):!1}var BP=IP,NP=BP,zp=pr;function Py(t,e,r,n,i){return t===e?!0:t==null||e==null||!zp(t)&&!zp(e)?t!==t&&e!==e:NP(t,e,r,n,Py,i)}var Dy=Py,zP=uc,HP=Dy,WP=1,VP=2;function UP(t,e,r,n){var i=r.length,s=i,o=!n;if(t==null)return!s;for(t=Object(t);i--;){var a=r[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=r[i];var l=a[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var h=new zP;if(n)var d=n(c,u,l,t,e,h);if(!(d===void 0?HP(u,c,WP|VP,n,h):d))return!1}}return!0}var XP=UP,YP=Bt;function GP(t){return t===t&&!YP(t)}var Ay=GP,KP=Ay,qP=lo;function QP(t){for(var e=qP(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,KP(i)]}return e}var JP=QP;function ZP(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var jy=ZP,eD=XP,tD=JP,rD=jy;function nD(t){var e=tD(t);return e.length==1&&e[0][2]?rD(e[0][0],e[0][1]):function(r){return r===t||eD(r,t,e)}}var iD=nD,sD=Hn,oD=pr,aD="[object Symbol]";function lD(t){return typeof t=="symbol"||oD(t)&&sD(t)==aD}var dc=lD,cD=Ot,uD=dc,hD=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dD=/^\w*$/;function fD(t,e){if(cD(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||uD(t)?!0:dD.test(t)||!hD.test(t)||e!=null&&t in Object(e)}var of=fD,$y=nf,gD="Expected a function";function af(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(gD);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(af.Cache||$y),r}af.Cache=$y;var pD=af,mD=pD,vD=500;function yD(t){var e=mD(t,function(n){return r.size===vD&&r.clear(),n}),r=e.cache;return e}var _D=yD,xD=_D,wD=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,SD=/\\(\\)?/g,CD=xD(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(wD,function(r,n,i,s){e.push(i?s.replace(SD,"$1"):n||r)}),e}),bD=CD,Hp=ao,TD=wy,OD=Ot,kD=dc,ED=1/0,Wp=Hp?Hp.prototype:void 0,Vp=Wp?Wp.toString:void 0;function Ly(t){if(typeof t=="string")return t;if(OD(t))return TD(t,Ly)+"";if(kD(t))return Vp?Vp.call(t):"";var e=t+"";return e=="0"&&1/t==-ED?"-0":e}var MD=Ly,PD=MD;function DD(t){return t==null?"":PD(t)}var AD=DD,jD=Ot,$D=of,LD=bD,FD=AD;function RD(t,e){return jD(t)?t:$D(t,e)?[t]:LD(FD(t))}var Fy=RD,ID=dc,BD=1/0;function ND(t){if(typeof t=="string"||ID(t))return t;var e=t+"";return e=="0"&&1/t==-BD?"-0":e}var fc=ND,zD=Fy,HD=fc;function WD(t,e){e=zD(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[HD(e[r++])];return r&&r==n?t:void 0}var Ry=WD,VD=Ry;function UD(t,e,r){var n=t==null?void 0:VD(t,e);return n===void 0?r:n}var XD=UD;function YD(t,e){return t!=null&&e in Object(t)}var GD=YD,KD=Fy,qD=Xd,QD=Ot,JD=Yd,ZD=Gd,e4=fc;function t4(t,e,r){e=KD(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var o=e4(e[n]);if(!(s=t!=null&&r(t,o)))break;t=t[o]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&ZD(i)&&JD(o,i)&&(QD(t)||qD(t)))}var r4=t4,n4=GD,i4=r4;function s4(t,e){return t!=null&&i4(t,e,n4)}var o4=s4,a4=Dy,l4=XD,c4=o4,u4=of,h4=Ay,d4=jy,f4=fc,g4=1,p4=2;function m4(t,e){return u4(t)&&h4(e)?d4(f4(t),e):function(r){var n=l4(r,t);return n===void 0&&n===e?c4(r,t):a4(e,n,g4|p4)}}var v4=m4;function y4(t){return function(e){return e==null?void 0:e[t]}}var _4=y4,x4=Ry;function w4(t){return function(e){return x4(e,t)}}var S4=w4,C4=_4,b4=S4,T4=of,O4=fc;function k4(t){return T4(t)?C4(O4(t)):b4(t)}var E4=k4,M4=iD,P4=v4,D4=sc,A4=Ot,j4=E4;function $4(t){return typeof t=="function"?t:t==null?D4:typeof t=="object"?A4(t)?P4(t[0],t[1]):M4(t):j4(t)}var L4=$4,F4=Wi;function R4(t,e){return function(r,n){if(r==null)return r;if(!F4(r))return t(r,n);for(var i=r.length,s=e?i:-1,o=Object(r);(e?s--:++s<i)&&n(o[s],s,o)!==!1;);return r}}var I4=R4,B4=vy,N4=I4,z4=N4(B4),Iy=z4,H4=Iy,W4=Wi;function V4(t,e){var r=-1,n=W4(t)?Array(t.length):[];return H4(t,function(i,s,o){n[++r]=e(i,s,o)}),n}var U4=V4,X4=wy,Y4=L4,G4=U4,K4=Ot;function q4(t,e){var r=K4(t)?X4:G4;return r(t,Y4(e))}var Q4=q4;Object.defineProperty(oo,"__esModule",{value:!0});oo.flattenNames=void 0;var J4=Pb,Z4=gc(J4),e3=ef,t3=gc(e3),r3=xy,n3=gc(r3),i3=Q4,s3=gc(i3);function gc(t){return t&&t.__esModule?t:{default:t}}var o3=oo.flattenNames=function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[];return(0,s3.default)(e,function(n){Array.isArray(n)?t(n).map(function(i){return r.push(i)}):(0,n3.default)(n)?(0,t3.default)(n,function(i,s){i===!0&&r.push(s),r.push(s+"-"+i)}):(0,Z4.default)(n)&&r.push(n)}),r};oo.default=o3;var uo={};function a3(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var By=a3,l3=Wn,c3=function(){try{var t=l3(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ny=c3,Up=Ny;function u3(t,e,r){e=="__proto__"&&Up?Up(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var lf=u3,h3=lf,d3=co,f3=Object.prototype,g3=f3.hasOwnProperty;function p3(t,e,r){var n=t[e];(!(g3.call(t,e)&&d3(n,r))||r===void 0&&!(e in t))&&h3(t,e,r)}var zy=p3,m3=zy,v3=lf;function y3(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=n?n(r[a],t[a],a,r,t):void 0;l===void 0&&(l=t[a]),i?v3(r,a,l):m3(r,a,l)}return r}var ho=y3,_3=ho,x3=lo;function w3(t,e){return t&&_3(e,x3(e),t)}var S3=w3;function C3(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var b3=C3,T3=Bt,O3=Jd,k3=b3,E3=Object.prototype,M3=E3.hasOwnProperty;function P3(t){if(!T3(t))return k3(t);var e=O3(t),r=[];for(var n in t)n=="constructor"&&(e||!M3.call(t,n))||r.push(n);return r}var D3=P3,A3=py,j3=D3,$3=Wi;function L3(t){return $3(t)?A3(t,!0):j3(t)}var fo=L3,F3=ho,R3=fo;function I3(t,e){return t&&F3(e,R3(e),t)}var B3=I3,Tl={exports:{}};Tl.exports;(function(t,e){var r=tr,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var h=c.length,d=a?a(h):new c.constructor(h);return c.copy(d),d}t.exports=l})(Tl,Tl.exports);var Hy=Tl.exports;function N3(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Wy=N3,z3=ho,H3=sf;function W3(t,e){return z3(t,H3(t),e)}var V3=W3,U3=Ty,X3=tf,Y3=sf,G3=ky,K3=Object.getOwnPropertySymbols,q3=K3?function(t){for(var e=[];t;)U3(e,Y3(t)),t=X3(t);return e}:G3,Vy=q3,Q3=ho,J3=Vy;function Z3(t,e){return Q3(t,J3(t),e)}var eA=Z3,tA=Oy,rA=Vy,nA=fo;function iA(t){return tA(t,nA,rA)}var sA=iA,oA=Object.prototype,aA=oA.hasOwnProperty;function lA(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&aA.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var cA=lA,Xp=by;function uA(t){var e=new t.constructor(t.byteLength);return new Xp(e).set(new Xp(t)),e}var cf=uA,hA=cf;function dA(t,e){var r=e?hA(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var fA=dA,gA=/\w*$/;function pA(t){var e=new t.constructor(t.source,gA.exec(t));return e.lastIndex=t.lastIndex,e}var mA=pA,Yp=ao,Gp=Yp?Yp.prototype:void 0,Kp=Gp?Gp.valueOf:void 0;function vA(t){return Kp?Object(Kp.call(t)):{}}var yA=vA,_A=cf;function xA(t,e){var r=e?_A(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Uy=xA,wA=cf,SA=fA,CA=mA,bA=yA,TA=Uy,OA="[object Boolean]",kA="[object Date]",EA="[object Map]",MA="[object Number]",PA="[object RegExp]",DA="[object Set]",AA="[object String]",jA="[object Symbol]",$A="[object ArrayBuffer]",LA="[object DataView]",FA="[object Float32Array]",RA="[object Float64Array]",IA="[object Int8Array]",BA="[object Int16Array]",NA="[object Int32Array]",zA="[object Uint8Array]",HA="[object Uint8ClampedArray]",WA="[object Uint16Array]",VA="[object Uint32Array]";function UA(t,e,r){var n=t.constructor;switch(e){case $A:return wA(t);case OA:case kA:return new n(+t);case LA:return SA(t,r);case FA:case RA:case IA:case BA:case NA:case zA:case HA:case WA:case VA:return TA(t,r);case EA:return new n;case MA:case AA:return new n(t);case PA:return CA(t);case DA:return new n;case jA:return bA(t)}}var XA=UA,YA=Bt,qp=Object.create,GA=function(){function t(){}return function(e){if(!YA(e))return{};if(qp)return qp(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),KA=GA,qA=KA,QA=tf,JA=Jd;function ZA(t){return typeof t.constructor=="function"&&!JA(t)?qA(QA(t)):{}}var Xy=ZA,e5=hc,t5=pr,r5="[object Map]";function n5(t){return t5(t)&&e5(t)==r5}var i5=n5,s5=i5,o5=Kd,Qp=qd,Jp=Qp&&Qp.isMap,a5=Jp?o5(Jp):s5,l5=a5,c5=hc,u5=pr,h5="[object Set]";function d5(t){return u5(t)&&c5(t)==h5}var f5=d5,g5=f5,p5=Kd,Zp=qd,em=Zp&&Zp.isSet,m5=em?p5(em):g5,v5=m5,y5=uc,_5=By,x5=zy,w5=S3,S5=B3,C5=Hy,b5=Wy,T5=V3,O5=eA,k5=Ey,E5=sA,M5=hc,P5=cA,D5=XA,A5=Xy,j5=Ot,$5=ic,L5=l5,F5=Bt,R5=v5,I5=lo,B5=fo,N5=1,z5=2,H5=4,Yy="[object Arguments]",W5="[object Array]",V5="[object Boolean]",U5="[object Date]",X5="[object Error]",Gy="[object Function]",Y5="[object GeneratorFunction]",G5="[object Map]",K5="[object Number]",Ky="[object Object]",q5="[object RegExp]",Q5="[object Set]",J5="[object String]",Z5="[object Symbol]",ej="[object WeakMap]",tj="[object ArrayBuffer]",rj="[object DataView]",nj="[object Float32Array]",ij="[object Float64Array]",sj="[object Int8Array]",oj="[object Int16Array]",aj="[object Int32Array]",lj="[object Uint8Array]",cj="[object Uint8ClampedArray]",uj="[object Uint16Array]",hj="[object Uint32Array]",ce={};ce[Yy]=ce[W5]=ce[tj]=ce[rj]=ce[V5]=ce[U5]=ce[nj]=ce[ij]=ce[sj]=ce[oj]=ce[aj]=ce[G5]=ce[K5]=ce[Ky]=ce[q5]=ce[Q5]=ce[J5]=ce[Z5]=ce[lj]=ce[cj]=ce[uj]=ce[hj]=!0;ce[X5]=ce[Gy]=ce[ej]=!1;function $a(t,e,r,n,i,s){var o,a=e&N5,l=e&z5,c=e&H5;if(r&&(o=i?r(t,n,i,s):r(t)),o!==void 0)return o;if(!F5(t))return t;var u=j5(t);if(u){if(o=P5(t),!a)return b5(t,o)}else{var h=M5(t),d=h==Gy||h==Y5;if($5(t))return C5(t,a);if(h==Ky||h==Yy||d&&!i){if(o=l||d?{}:A5(t),!a)return l?O5(t,S5(o,t)):T5(t,w5(o,t))}else{if(!ce[h])return i?t:{};o=D5(t,h,a)}}s||(s=new y5);var f=s.get(t);if(f)return f;s.set(t,o),R5(t)?t.forEach(function(C){o.add($a(C,e,r,C,t,s))}):L5(t)&&t.forEach(function(C,g){o.set(g,$a(C,e,r,g,t,s))});var m=c?l?E5:k5:l?B5:I5,v=u?void 0:m(t);return _5(v||t,function(C,g){v&&(g=C,C=t[g]),x5(o,g,$a(C,e,r,g,t,s))}),o}var dj=$a,fj=dj,gj=1,pj=4;function mj(t){return fj(t,gj|pj)}var vj=mj;Object.defineProperty(uo,"__esModule",{value:!0});uo.mergeClasses=void 0;var yj=ef,_j=qy(yj),xj=vj,wj=qy(xj),Sj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function qy(t){return t&&t.__esModule?t:{default:t}}var Cj=uo.mergeClasses=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=e.default&&(0,wj.default)(e.default)||{};return r.map(function(i){var s=e[i];return s&&(0,_j.default)(s,function(o,a){n[a]||(n[a]={}),n[a]=Sj({},n[a],s[a])}),i}),n};uo.default=Cj;var go={};Object.defineProperty(go,"__esModule",{value:!0});go.autoprefix=void 0;var bj=ef,tm=Oj(bj),Tj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function Oj(t){return t&&t.__esModule?t:{default:t}}var kj={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var r=e&&e.split(" ");return{position:"absolute",top:r&&r[0],right:r&&r[1],bottom:r&&r[2],left:r&&r[3]}},extend:function(e,r){var n=r[e];return n||{extend:e}}},Ej=go.autoprefix=function(e){var r={};return(0,tm.default)(e,function(n,i){var s={};(0,tm.default)(n,function(o,a){var l=kj[a];l?s=Tj({},s,l(o)):s[a]=o}),r[i]=s}),r};go.default=Ej;var po={};Object.defineProperty(po,"__esModule",{value:!0});po.hover=void 0;var Mj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pj=G,cu=Dj(Pj);function Dj(t){return t&&t.__esModule?t:{default:t}}function Aj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rm(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function jj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var $j=po.hover=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){jj(i,n);function i(){var s,o,a,l;Aj(this,i);for(var c=arguments.length,u=Array(c),h=0;h<c;h++)u[h]=arguments[h];return l=(o=(a=rm(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(u))),a),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return cu.default.createElement(r,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},cu.default.createElement(e,Mj({},a.props,a.state)))},o),rm(a,l)}return i}(cu.default.Component)};po.default=$j;var mo={};Object.defineProperty(mo,"__esModule",{value:!0});mo.active=void 0;var Lj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fj=G,uu=Rj(Fj);function Rj(t){return t&&t.__esModule?t:{default:t}}function Ij(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nm(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Bj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Nj=mo.active=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){Bj(i,n);function i(){var s,o,a,l;Ij(this,i);for(var c=arguments.length,u=Array(c),h=0;h<c;h++)u[h]=arguments[h];return l=(o=(a=nm(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(u))),a),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return uu.default.createElement(r,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},uu.default.createElement(e,Lj({},a.props,a.state)))},o),nm(a,l)}return i}(uu.default.Component)};mo.default=Nj;var uf={};Object.defineProperty(uf,"__esModule",{value:!0});var zj=function(e,r){var n={},i=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n[o]=a};return e===0&&i("first-child"),e===r-1&&i("last-child"),(e===0||e%2===0)&&i("even"),Math.abs(e%2)===1&&i("odd"),i("nth-child",e),n};uf.default=zj;Object.defineProperty(we,"__esModule",{value:!0});we.ReactCSS=we.loop=we.handleActive=we.handleHover=we.hover=void 0;var Hj=oo,Wj=Ki(Hj),Vj=uo,Uj=Ki(Vj),Xj=go,Yj=Ki(Xj),Gj=po,Qy=Ki(Gj),Kj=mo,qj=Ki(Kj),Qj=uf,Jj=Ki(Qj);function Ki(t){return t&&t.__esModule?t:{default:t}}we.hover=Qy.default;we.handleHover=Qy.default;we.handleActive=qj.default;we.loop=Jj.default;var Zj=we.ReactCSS=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var s=(0,Wj.default)(n),o=(0,Uj.default)(e,s);return(0,Yj.default)(o)};we.default=Zj;var e$=lf,t$=co;function r$(t,e,r){(r!==void 0&&!t$(t[e],r)||r===void 0&&!(e in t))&&e$(t,e,r)}var Jy=r$,n$=Wi,i$=pr;function s$(t){return i$(t)&&n$(t)}var o$=s$;function a$(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Zy=a$,l$=ho,c$=fo;function u$(t){return l$(t,c$(t))}var h$=u$,im=Jy,d$=Hy,f$=Uy,g$=Wy,p$=Xy,sm=Xd,om=Ot,m$=o$,v$=ic,y$=Zd,_$=Bt,x$=xy,w$=Qd,am=Zy,S$=h$;function C$(t,e,r,n,i,s,o){var a=am(t,r),l=am(e,r),c=o.get(l);if(c){im(t,r,c);return}var u=s?s(a,l,r+"",t,e,o):void 0,h=u===void 0;if(h){var d=om(l),f=!d&&v$(l),m=!d&&!f&&w$(l);u=l,d||f||m?om(a)?u=a:m$(a)?u=g$(a):f?(h=!1,u=d$(l,!0)):m?(h=!1,u=f$(l,!0)):u=[]:x$(l)||sm(l)?(u=a,sm(a)?u=S$(a):(!_$(a)||y$(a))&&(u=p$(l))):h=!1}h&&(o.set(l,u),i(u,l,n,s,o),o.delete(l)),im(t,r,u)}var b$=C$,T$=uc,O$=Jy,k$=fy,E$=b$,M$=Bt,P$=fo,D$=Zy;function e_(t,e,r,n,i){t!==e&&k$(e,function(s,o){if(i||(i=new T$),M$(s))E$(t,e,o,r,e_,n,i);else{var a=n?n(D$(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),O$(t,o,a)}},P$)}var A$=e_;function j$(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var $$=j$,L$=$$,lm=Math.max;function F$(t,e,r){return e=lm(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=lm(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),L$(t,this,a)}}var R$=F$;function I$(t){return function(){return t}}var B$=I$,N$=B$,cm=Ny,z$=sc,H$=cm?function(t,e){return cm(t,"toString",{configurable:!0,enumerable:!1,value:N$(e),writable:!0})}:z$,W$=H$,V$=800,U$=16,X$=Date.now;function Y$(t){var e=0,r=0;return function(){var n=X$(),i=U$-(n-r);if(r=n,i>0){if(++e>=V$)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var G$=Y$,K$=W$,q$=G$,Q$=q$(K$),J$=Q$,Z$=sc,eL=R$,tL=J$;function rL(t,e){return tL(eL(t,e,Z$),t+"")}var nL=rL,iL=co,sL=Wi,oL=Yd,aL=Bt;function lL(t,e,r){if(!aL(r))return!1;var n=typeof e;return(n=="number"?sL(r)&&oL(e,r.length):n=="string"&&e in r)?iL(r[e],t):!1}var cL=lL,uL=nL,hL=cL;function dL(t){return uL(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&hL(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,s)}return e})}var fL=dL,gL=A$,pL=fL,mL=pL(function(t,e,r){gL(t,e,r)}),t_=mL,hf={},vo={},df={};Object.defineProperty(df,"__esModule",{value:!0});df.calculateChange=function(e,r,n,i,s){var o=s.clientWidth,a=s.clientHeight,l=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,u=l-(s.getBoundingClientRect().left+window.pageXOffset),h=c-(s.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var d=void 0;if(h<0?d=0:h>a?d=1:d=Math.round(h*100/a)/100,r.a!==d)return{h:r.h,s:r.s,l:r.l,a:d,source:"rgb"}}else{var f=void 0;if(u<0?f=0:u>o?f=1:f=Math.round(u*100/o)/100,i!==f)return{h:r.h,s:r.s,l:r.l,a:f,source:"rgb"}}return null};var Vn={},pc={};Object.defineProperty(pc,"__esModule",{value:!0});var hu={},vL=pc.render=function(e,r,n,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=n*2,s.height=n*2;var o=s.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,s.width,s.height),o.fillStyle=r,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),s.toDataURL()):null};pc.get=function(e,r,n,i){var s=e+"-"+r+"-"+n+(i?"-server":"");if(hu[s])return hu[s];var o=vL(e,r,n,i);return hu[s]=o,o};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.Checkboard=void 0;var um=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r_=G,hm=n_(r_),yL=we,_L=n_(yL),xL=pc,wL=SL(xL);function SL(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function n_(t){return t&&t.__esModule?t:{default:t}}var i_=Vn.Checkboard=function(e){var r=e.white,n=e.grey,i=e.size,s=e.renderers,o=e.borderRadius,a=e.boxShadow,l=e.children,c=(0,_L.default)({default:{grid:{borderRadius:o,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+wL.get(r,n,i,s.canvas)+") center left"}}});return(0,r_.isValidElement)(l)?hm.default.cloneElement(l,um({},l.props,{style:um({},l.props.style,c.grid)})):hm.default.createElement("div",{style:c.grid})};i_.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};Vn.default=i_;Object.defineProperty(vo,"__esModule",{value:!0});vo.Alpha=void 0;var CL=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bL=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Th=G,Rr=ff(Th),TL=we,OL=ff(TL),kL=df,EL=DL(kL),ML=Vn,PL=ff(ML);function DL(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function ff(t){return t&&t.__esModule?t:{default:t}}function AL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dm(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function jL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var $L=vo.Alpha=function(t){jL(e,t);function e(){var r,n,i,s;AL(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(n=(i=dm(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(a))),i),i.handleChange=function(c){var u=EL.calculateChange(c,i.props.hsl,i.props.direction,i.props.a,i.container);u&&typeof i.props.onChange=="function"&&i.props.onChange(u,c)},i.handleMouseDown=function(c){i.handleChange(c),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),dm(i,s)}return bL(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,s=(0,OL.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:CL({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return Rr.default.createElement("div",{style:s.alpha},Rr.default.createElement("div",{style:s.checkboard},Rr.default.createElement(PL.default,{renderers:this.props.renderers})),Rr.default.createElement("div",{style:s.gradient}),Rr.default.createElement("div",{style:s.container,ref:function(a){return n.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Rr.default.createElement("div",{style:s.pointer},this.props.pointer?Rr.default.createElement(this.props.pointer,this.props):Rr.default.createElement("div",{style:s.slider}))))}}]),e}(Th.PureComponent||Th.Component);vo.default=$L;var yo={};Object.defineProperty(yo,"__esModule",{value:!0});yo.EditableInput=void 0;var LL=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Oh=G,du=s_(Oh),FL=we,RL=s_(FL);function s_(t){return t&&t.__esModule?t:{default:t}}function IL(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NL(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function zL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var HL=1,o_=38,WL=40,VL=[o_,WL],UL=function(e){return VL.indexOf(e)>-1},XL=function(e){return Number(String(e).replace(/%/g,""))},YL=1,GL=yo.EditableInput=function(t){zL(e,t);function e(r){BL(this,e);var n=NL(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var s=XL(i.target.value);if(!isNaN(s)&&UL(i.keyCode)){var o=n.getArrowOffset(),a=i.keyCode===o_?s+o:s-o;n.setUpdatedValue(a,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var s=Math.round(n.props.value+i.movementX);s>=0&&s<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(s),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+YL++,n}return LL(e,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return IL({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||HL}},{key:"setUpdatedValue",value:function(n,i){var s=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(s,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=(0,RL.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return du.default.createElement("div",{style:i.wrap},du.default.createElement("input",{id:this.inputId,style:i.input,ref:function(o){return n.input=o},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?du.default.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(Oh.PureComponent||Oh.Component);yo.default=GL;var _o={},gf={};Object.defineProperty(gf,"__esModule",{value:!0});gf.calculateChange=function(e,r,n,i){var s=i.clientWidth,o=i.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=a-(i.getBoundingClientRect().left+window.pageXOffset),u=l-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var h=void 0;if(u<0)h=359;else if(u>o)h=0;else{var d=-(u*100/o)+100;h=360*d/100}if(n.h!==h)return{h,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var f=void 0;if(c<0)f=0;else if(c>s)f=359;else{var m=c*100/s;f=360*m/100}if(n.h!==f)return{h:f,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null};Object.defineProperty(_o,"__esModule",{value:!0});_o.Hue=void 0;var KL=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),kh=G,Kn=a_(kh),qL=we,QL=a_(qL),JL=gf,ZL=eF(JL);function eF(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function a_(t){return t&&t.__esModule?t:{default:t}}function tF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fm(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function rF(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var nF=_o.Hue=function(t){rF(e,t);function e(){var r,n,i,s;tF(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(n=(i=fm(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(a))),i),i.handleChange=function(c){var u=ZL.calculateChange(c,i.props.direction,i.props.hsl,i.container);u&&typeof i.props.onChange=="function"&&i.props.onChange(u,c)},i.handleMouseDown=function(c){i.handleChange(c),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),fm(i,s)}return KL(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,s=i===void 0?"horizontal":i,o=(0,QL.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return Kn.default.createElement("div",{style:o.hue},Kn.default.createElement("div",{className:"hue-"+s,style:o.container,ref:function(l){return n.container=l},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Kn.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),Kn.default.createElement("div",{style:o.pointer},this.props.pointer?Kn.default.createElement(this.props.pointer,this.props):Kn.default.createElement("div",{style:o.slider}))))}}]),e}(kh.PureComponent||kh.Component);_o.default=nF;var xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.Raised=void 0;var iF=G,fu=mc(iF),sF=uy,va=mc(sF),oF=we,aF=mc(oF),lF=t_,cF=mc(lF);function mc(t){return t&&t.__esModule?t:{default:t}}var pf=xo.Raised=function(e){var r=e.zDepth,n=e.radius,i=e.background,s=e.children,o=e.styles,a=o===void 0?{}:o,l=(0,aF.default)((0,cF.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":r===1});return fu.default.createElement("div",{style:l.wrap},fu.default.createElement("div",{style:l.bg}),fu.default.createElement("div",{style:l.content},s))};pf.propTypes={background:va.default.string,zDepth:va.default.oneOf([0,1,2,3,4,5]),radius:va.default.number,styles:va.default.object};pf.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};xo.default=pf;var wo={},uF=tr,hF=function(){return uF.Date.now()},dF=hF,fF=/\s/;function gF(t){for(var e=t.length;e--&&fF.test(t.charAt(e)););return e}var pF=gF,mF=pF,vF=/^\s+/;function yF(t){return t&&t.slice(0,mF(t)+1).replace(vF,"")}var _F=yF,xF=_F,gm=Bt,wF=dc,pm=NaN,SF=/^[-+]0x[0-9a-f]+$/i,CF=/^0b[01]+$/i,bF=/^0o[0-7]+$/i,TF=parseInt;function OF(t){if(typeof t=="number")return t;if(wF(t))return pm;if(gm(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=gm(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=xF(t);var r=CF.test(t);return r||bF.test(t)?TF(t.slice(2),r?2:8):SF.test(t)?pm:+t}var kF=OF,EF=Bt,gu=dF,mm=kF,MF="Expected a function",PF=Math.max,DF=Math.min;function AF(t,e,r){var n,i,s,o,a,l,c=0,u=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(MF);e=mm(e)||0,EF(r)&&(u=!!r.leading,h="maxWait"in r,s=h?PF(mm(r.maxWait)||0,e):s,d="trailing"in r?!!r.trailing:d);function f(E){var P=n,M=i;return n=i=void 0,c=E,o=t.apply(M,P),o}function m(E){return c=E,a=setTimeout(g,e),u?f(E):o}function v(E){var P=E-l,M=E-c,z=e-P;return h?DF(z,s-M):z}function C(E){var P=E-l,M=E-c;return l===void 0||P>=e||P<0||h&&M>=s}function g(){var E=gu();if(C(E))return p(E);a=setTimeout(g,v(E))}function p(E){return a=void 0,d&&n?f(E):(n=i=void 0,o)}function y(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function T(){return a===void 0?o:p(gu())}function k(){var E=gu(),P=C(E);if(n=arguments,i=this,l=E,P){if(a===void 0)return m(l);if(h)return clearTimeout(a),a=setTimeout(g,e),f(l)}return a===void 0&&(a=setTimeout(g,e)),o}return k.cancel=y,k.flush=T,k}var l_=AF,jF=l_,$F=Bt,LF="Expected a function";function FF(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(LF);return $F(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),jF(t,e,{leading:n,maxWait:e,trailing:i})}var RF=FF,mf={};Object.defineProperty(mf,"__esModule",{value:!0});mf.calculateChange=function(e,r,n){var i=n.getBoundingClientRect(),s=i.width,o=i.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=a-(n.getBoundingClientRect().left+window.pageXOffset),u=l-(n.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>s&&(c=s),u<0?u=0:u>o&&(u=o);var h=c/s,d=1-u/o;return{h:r.h,s:h,v:d,a:r.a,source:"hsv"}};Object.defineProperty(wo,"__esModule",{value:!0});wo.Saturation=void 0;var IF=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Eh=G,fn=vf(Eh),BF=we,NF=vf(BF),zF=RF,HF=vf(zF),WF=mf,VF=UF(WF);function UF(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function vf(t){return t&&t.__esModule?t:{default:t}}function XF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YF(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function GF(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var KF=wo.Saturation=function(t){GF(e,t);function e(r){XF(this,e);var n=YF(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,VF.calculateChange(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var s=n.getContainerRenderWindow();s.addEventListener("mousemove",n.handleChange),s.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,HF.default)(function(i,s,o){i(s,o)},50),n}return IF(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},s=i.color,o=i.white,a=i.black,l=i.pointer,c=i.circle,u=(0,NF.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:o,black:a,pointer:l,circle:c}},{custom:!!this.props.style});return fn.default.createElement("div",{style:u.color,ref:function(d){return n.container=d},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},fn.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),fn.default.createElement("div",{style:u.white,className:"saturation-white"},fn.default.createElement("div",{style:u.black,className:"saturation-black"}),fn.default.createElement("div",{style:u.pointer},this.props.pointer?fn.default.createElement(this.props.pointer,this.props):fn.default.createElement("div",{style:u.circle}))))}}]),e}(Eh.PureComponent||Eh.Component);wo.default=KF;var So={},et={},qF=By,QF=Iy,JF=yy,ZF=Ot;function eR(t,e){var r=ZF(t)?qF:QF;return r(t,JF(e))}var tR=eR,rR=tR,c_={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(ls,function(){function r(_){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},r(_)}var n=/^\s+/,i=/\s+$/;function s(_,w){if(_=_||"",w=w||{},_ instanceof s)return _;if(!(this instanceof s))return new s(_,w);var x=o(_);this._originalInput=_,this._r=x.r,this._g=x.g,this._b=x.b,this._a=x.a,this._roundA=Math.round(100*this._a)/100,this._format=w.format||x.format,this._gradientType=w.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=x.ok}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var w=this.toRgb();return(w.r*299+w.g*587+w.b*114)/1e3},getLuminance:function(){var w=this.toRgb(),x,D,L,$,J,oe;return x=w.r/255,D=w.g/255,L=w.b/255,x<=.03928?$=x/12.92:$=Math.pow((x+.055)/1.055,2.4),D<=.03928?J=D/12.92:J=Math.pow((D+.055)/1.055,2.4),L<=.03928?oe=L/12.92:oe=Math.pow((L+.055)/1.055,2.4),.2126*$+.7152*J+.0722*oe},setAlpha:function(w){return this._a=ie(w),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var w=u(this._r,this._g,this._b);return{h:w.h*360,s:w.s,v:w.v,a:this._a}},toHsvString:function(){var w=u(this._r,this._g,this._b),x=Math.round(w.h*360),D=Math.round(w.s*100),L=Math.round(w.v*100);return this._a==1?"hsv("+x+", "+D+"%, "+L+"%)":"hsva("+x+", "+D+"%, "+L+"%, "+this._roundA+")"},toHsl:function(){var w=l(this._r,this._g,this._b);return{h:w.h*360,s:w.s,l:w.l,a:this._a}},toHslString:function(){var w=l(this._r,this._g,this._b),x=Math.round(w.h*360),D=Math.round(w.s*100),L=Math.round(w.l*100);return this._a==1?"hsl("+x+", "+D+"%, "+L+"%)":"hsla("+x+", "+D+"%, "+L+"%, "+this._roundA+")"},toHex:function(w){return d(this._r,this._g,this._b,w)},toHexString:function(w){return"#"+this.toHex(w)},toHex8:function(w){return f(this._r,this._g,this._b,this._a,w)},toHex8String:function(w){return"#"+this.toHex8(w)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(V(this._r,255)*100)+"%",g:Math.round(V(this._g,255)*100)+"%",b:Math.round(V(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(V(this._r,255)*100)+"%, "+Math.round(V(this._g,255)*100)+"%, "+Math.round(V(this._b,255)*100)+"%)":"rgba("+Math.round(V(this._r,255)*100)+"%, "+Math.round(V(this._g,255)*100)+"%, "+Math.round(V(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:te[d(this._r,this._g,this._b,!0)]||!1},toFilter:function(w){var x="#"+m(this._r,this._g,this._b,this._a),D=x,L=this._gradientType?"GradientType = 1, ":"";if(w){var $=s(w);D="#"+m($._r,$._g,$._b,$._a)}return"progid:DXImageTransform.Microsoft.gradient("+L+"startColorstr="+x+",endColorstr="+D+")"},toString:function(w){var x=!!w;w=w||this._format;var D=!1,L=this._a<1&&this._a>=0,$=!x&&L&&(w==="hex"||w==="hex6"||w==="hex3"||w==="hex4"||w==="hex8"||w==="name");return $?w==="name"&&this._a===0?this.toName():this.toRgbString():(w==="rgb"&&(D=this.toRgbString()),w==="prgb"&&(D=this.toPercentageRgbString()),(w==="hex"||w==="hex6")&&(D=this.toHexString()),w==="hex3"&&(D=this.toHexString(!0)),w==="hex4"&&(D=this.toHex8String(!0)),w==="hex8"&&(D=this.toHex8String()),w==="name"&&(D=this.toName()),w==="hsl"&&(D=this.toHslString()),w==="hsv"&&(D=this.toHsvString()),D||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(w,x){var D=w.apply(null,[this].concat([].slice.call(x)));return this._r=D._r,this._g=D._g,this._b=D._b,this.setAlpha(D._a),this},lighten:function(){return this._applyModification(p,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(T,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(C,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(k,arguments)},_applyCombination:function(w,x){return w.apply(null,[this].concat([].slice.call(x)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(B,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(P,[3])},tetrad:function(){return this._applyCombination(P,[4])}},s.fromRatio=function(_,w){if(r(_)=="object"){var x={};for(var D in _)_.hasOwnProperty(D)&&(D==="a"?x[D]=_[D]:x[D]=Q(_[D]));_=x}return s(_,w)};function o(_){var w={r:0,g:0,b:0},x=1,D=null,L=null,$=null,J=!1,oe=!1;return typeof _=="string"&&(_=ze(_)),r(_)=="object"&&(Re(_.r)&&Re(_.g)&&Re(_.b)?(w=a(_.r,_.g,_.b),J=!0,oe=String(_.r).substr(-1)==="%"?"prgb":"rgb"):Re(_.h)&&Re(_.s)&&Re(_.v)?(D=Q(_.s),L=Q(_.v),w=h(_.h,D,L),J=!0,oe="hsv"):Re(_.h)&&Re(_.s)&&Re(_.l)&&(D=Q(_.s),$=Q(_.l),w=c(_.h,D,$),J=!0,oe="hsl"),_.hasOwnProperty("a")&&(x=_.a)),x=ie(x),{ok:J,format:_.format||oe,r:Math.min(255,Math.max(w.r,0)),g:Math.min(255,Math.max(w.g,0)),b:Math.min(255,Math.max(w.b,0)),a:x}}function a(_,w,x){return{r:V(_,255)*255,g:V(w,255)*255,b:V(x,255)*255}}function l(_,w,x){_=V(_,255),w=V(w,255),x=V(x,255);var D=Math.max(_,w,x),L=Math.min(_,w,x),$,J,oe=(D+L)/2;if(D==L)$=J=0;else{var Oe=D-L;switch(J=oe>.5?Oe/(2-D-L):Oe/(D+L),D){case _:$=(w-x)/Oe+(w<x?6:0);break;case w:$=(x-_)/Oe+2;break;case x:$=(_-w)/Oe+4;break}$/=6}return{h:$,s:J,l:oe}}function c(_,w,x){var D,L,$;_=V(_,360),w=V(w,100),x=V(x,100);function J(Et,qi,Nt){return Nt<0&&(Nt+=1),Nt>1&&(Nt-=1),Nt<1/6?Et+(qi-Et)*6*Nt:Nt<1/2?qi:Nt<2/3?Et+(qi-Et)*(2/3-Nt)*6:Et}if(w===0)D=L=$=x;else{var oe=x<.5?x*(1+w):x+w-x*w,Oe=2*x-oe;D=J(Oe,oe,_+1/3),L=J(Oe,oe,_),$=J(Oe,oe,_-1/3)}return{r:D*255,g:L*255,b:$*255}}function u(_,w,x){_=V(_,255),w=V(w,255),x=V(x,255);var D=Math.max(_,w,x),L=Math.min(_,w,x),$,J,oe=D,Oe=D-L;if(J=D===0?0:Oe/D,D==L)$=0;else{switch(D){case _:$=(w-x)/Oe+(w<x?6:0);break;case w:$=(x-_)/Oe+2;break;case x:$=(_-w)/Oe+4;break}$/=6}return{h:$,s:J,v:oe}}function h(_,w,x){_=V(_,360)*6,w=V(w,100),x=V(x,100);var D=Math.floor(_),L=_-D,$=x*(1-w),J=x*(1-L*w),oe=x*(1-(1-L)*w),Oe=D%6,Et=[x,J,$,$,oe,x][Oe],qi=[oe,x,x,J,$,$][Oe],Nt=[$,$,oe,x,x,J][Oe];return{r:Et*255,g:qi*255,b:Nt*255}}function d(_,w,x,D){var L=[N(Math.round(_).toString(16)),N(Math.round(w).toString(16)),N(Math.round(x).toString(16))];return D&&L[0].charAt(0)==L[0].charAt(1)&&L[1].charAt(0)==L[1].charAt(1)&&L[2].charAt(0)==L[2].charAt(1)?L[0].charAt(0)+L[1].charAt(0)+L[2].charAt(0):L.join("")}function f(_,w,x,D,L){var $=[N(Math.round(_).toString(16)),N(Math.round(w).toString(16)),N(Math.round(x).toString(16)),N(he(D))];return L&&$[0].charAt(0)==$[0].charAt(1)&&$[1].charAt(0)==$[1].charAt(1)&&$[2].charAt(0)==$[2].charAt(1)&&$[3].charAt(0)==$[3].charAt(1)?$[0].charAt(0)+$[1].charAt(0)+$[2].charAt(0)+$[3].charAt(0):$.join("")}function m(_,w,x,D){var L=[N(he(D)),N(Math.round(_).toString(16)),N(Math.round(w).toString(16)),N(Math.round(x).toString(16))];return L.join("")}s.equals=function(_,w){return!_||!w?!1:s(_).toRgbString()==s(w).toRgbString()},s.random=function(){return s.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function v(_,w){w=w===0?0:w||10;var x=s(_).toHsl();return x.s-=w/100,x.s=ye(x.s),s(x)}function C(_,w){w=w===0?0:w||10;var x=s(_).toHsl();return x.s+=w/100,x.s=ye(x.s),s(x)}function g(_){return s(_).desaturate(100)}function p(_,w){w=w===0?0:w||10;var x=s(_).toHsl();return x.l+=w/100,x.l=ye(x.l),s(x)}function y(_,w){w=w===0?0:w||10;var x=s(_).toRgb();return x.r=Math.max(0,Math.min(255,x.r-Math.round(255*-(w/100)))),x.g=Math.max(0,Math.min(255,x.g-Math.round(255*-(w/100)))),x.b=Math.max(0,Math.min(255,x.b-Math.round(255*-(w/100)))),s(x)}function T(_,w){w=w===0?0:w||10;var x=s(_).toHsl();return x.l-=w/100,x.l=ye(x.l),s(x)}function k(_,w){var x=s(_).toHsl(),D=(x.h+w)%360;return x.h=D<0?360+D:D,s(x)}function E(_){var w=s(_).toHsl();return w.h=(w.h+180)%360,s(w)}function P(_,w){if(isNaN(w)||w<=0)throw new Error("Argument to polyad must be a positive number");for(var x=s(_).toHsl(),D=[s(_)],L=360/w,$=1;$<w;$++)D.push(s({h:(x.h+$*L)%360,s:x.s,l:x.l}));return D}function M(_){var w=s(_).toHsl(),x=w.h;return[s(_),s({h:(x+72)%360,s:w.s,l:w.l}),s({h:(x+216)%360,s:w.s,l:w.l})]}function z(_,w,x){w=w||6,x=x||30;var D=s(_).toHsl(),L=360/x,$=[s(_)];for(D.h=(D.h-(L*w>>1)+720)%360;--w;)D.h=(D.h+L)%360,$.push(s(D));return $}function B(_,w){w=w||6;for(var x=s(_).toHsv(),D=x.h,L=x.s,$=x.v,J=[],oe=1/w;w--;)J.push(s({h:D,s:L,v:$})),$=($+oe)%1;return J}s.mix=function(_,w,x){x=x===0?0:x||50;var D=s(_).toRgb(),L=s(w).toRgb(),$=x/100,J={r:(L.r-D.r)*$+D.r,g:(L.g-D.g)*$+D.g,b:(L.b-D.b)*$+D.b,a:(L.a-D.a)*$+D.a};return s(J)},s.readability=function(_,w){var x=s(_),D=s(w);return(Math.max(x.getLuminance(),D.getLuminance())+.05)/(Math.min(x.getLuminance(),D.getLuminance())+.05)},s.isReadable=function(_,w,x){var D=s.readability(_,w),L,$;switch($=!1,L=kt(x),L.level+L.size){case"AAsmall":case"AAAlarge":$=D>=4.5;break;case"AAlarge":$=D>=3;break;case"AAAsmall":$=D>=7;break}return $},s.mostReadable=function(_,w,x){var D=null,L=0,$,J,oe,Oe;x=x||{},J=x.includeFallbackColors,oe=x.level,Oe=x.size;for(var Et=0;Et<w.length;Et++)$=s.readability(_,w[Et]),$>L&&(L=$,D=s(w[Et]));return s.isReadable(_,D,{level:oe,size:Oe})||!J?D:(x.includeFallbackColors=!1,s.mostReadable(_,["#fff","#000"],x))};var Y=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},te=s.hexNames=U(Y);function U(_){var w={};for(var x in _)_.hasOwnProperty(x)&&(w[_[x]]=x);return w}function ie(_){return _=parseFloat(_),(isNaN(_)||_<0||_>1)&&(_=1),_}function V(_,w){j(_)&&(_="100%");var x=H(_);return _=Math.min(w,Math.max(0,parseFloat(_))),x&&(_=parseInt(_*w,10)/100),Math.abs(_-w)<1e-6?1:_%w/parseFloat(w)}function ye(_){return Math.min(1,Math.max(0,_))}function re(_){return parseInt(_,16)}function j(_){return typeof _=="string"&&_.indexOf(".")!=-1&&parseFloat(_)===1}function H(_){return typeof _=="string"&&_.indexOf("%")!=-1}function N(_){return _.length==1?"0"+_:""+_}function Q(_){return _<=1&&(_=_*100+"%"),_}function he(_){return Math.round(parseFloat(_)*255).toString(16)}function mt(_){return re(_)/255}var se=function(){var _="[-\\+]?\\d+%?",w="[-\\+]?\\d*\\.\\d+%?",x="(?:"+w+")|(?:"+_+")",D="[\\s|\\(]+("+x+")[,|\\s]+("+x+")[,|\\s]+("+x+")\\s*\\)?",L="[\\s|\\(]+("+x+")[,|\\s]+("+x+")[,|\\s]+("+x+")[,|\\s]+("+x+")\\s*\\)?";return{CSS_UNIT:new RegExp(x),rgb:new RegExp("rgb"+D),rgba:new RegExp("rgba"+L),hsl:new RegExp("hsl"+D),hsla:new RegExp("hsla"+L),hsv:new RegExp("hsv"+D),hsva:new RegExp("hsva"+L),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Re(_){return!!se.CSS_UNIT.exec(_)}function ze(_){_=_.replace(n,"").replace(i,"").toLowerCase();var w=!1;if(Y[_])_=Y[_],w=!0;else if(_=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var x;return(x=se.rgb.exec(_))?{r:x[1],g:x[2],b:x[3]}:(x=se.rgba.exec(_))?{r:x[1],g:x[2],b:x[3],a:x[4]}:(x=se.hsl.exec(_))?{h:x[1],s:x[2],l:x[3]}:(x=se.hsla.exec(_))?{h:x[1],s:x[2],l:x[3],a:x[4]}:(x=se.hsv.exec(_))?{h:x[1],s:x[2],v:x[3]}:(x=se.hsva.exec(_))?{h:x[1],s:x[2],v:x[3],a:x[4]}:(x=se.hex8.exec(_))?{r:re(x[1]),g:re(x[2]),b:re(x[3]),a:mt(x[4]),format:w?"name":"hex8"}:(x=se.hex6.exec(_))?{r:re(x[1]),g:re(x[2]),b:re(x[3]),format:w?"name":"hex"}:(x=se.hex4.exec(_))?{r:re(x[1]+""+x[1]),g:re(x[2]+""+x[2]),b:re(x[3]+""+x[3]),a:mt(x[4]+""+x[4]),format:w?"name":"hex8"}:(x=se.hex3.exec(_))?{r:re(x[1]+""+x[1]),g:re(x[2]+""+x[2]),b:re(x[3]+""+x[3]),format:w?"name":"hex"}:!1}function kt(_){var w,x;return _=_||{level:"AA",size:"small"},w=(_.level||"AA").toUpperCase(),x=(_.size||"small").toLowerCase(),w!=="AA"&&w!=="AAA"&&(w="AA"),x!=="small"&&x!=="large"&&(x="small"),{level:w,size:x}}return s})})(c_);var nR=c_.exports;Object.defineProperty(et,"__esModule",{value:!0});et.isvalidColorString=et.red=et.getContrastingColor=et.isValidHex=et.toState=et.simpleCheckForValidColor=void 0;var iR=rR,sR=u_(iR),oR=nR,Ol=u_(oR);function u_(t){return t&&t.__esModule?t:{default:t}}et.simpleCheckForValidColor=function(e){var r=["r","g","b","a","h","s","l","v"],n=0,i=0;return(0,sR.default)(r,function(s){if(e[s]&&(n+=1,isNaN(e[s])||(i+=1),s==="s"||s==="l")){var o=/^\d+%$/;o.test(e[s])&&(i+=1)}}),n===i?e:!1};var aR=et.toState=function(e,r){var n=e.hex?(0,Ol.default)(e.hex):(0,Ol.default)(e),i=n.toHsl(),s=n.toHsv(),o=n.toRgb(),a=n.toHex();i.s===0&&(i.h=r||0,s.h=r||0);var l=a==="000000"&&o.a===0;return{hsl:i,hex:l?"transparent":"#"+a,rgb:o,hsv:s,oldHue:e.h||r||i.h,source:e.source}};et.isValidHex=function(e){if(e==="transparent")return!0;var r=String(e).charAt(0)==="#"?1:0;return e.length!==4+r&&e.length<7+r&&(0,Ol.default)(e).isValid()};et.getContrastingColor=function(e){if(!e)return"#fff";var r=aR(e);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"};et.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}};et.isvalidColorString=function(e,r){var n=e.replace("","");return(0,Ol.default)(r+" ("+n+")")._ok};Object.defineProperty(So,"__esModule",{value:!0});So.ColorWrap=void 0;var os=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lR=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Mh=G,cR=h_(Mh),uR=l_,hR=h_(uR),dR=et,qn=fR(dR);function fR(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function h_(t){return t&&t.__esModule?t:{default:t}}function gR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pR(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function mR(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var vR=So.ColorWrap=function(e){var r=function(n){mR(i,n);function i(s){gR(this,i);var o=pR(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o.handleChange=function(a,l){var c=qn.simpleCheckForValidColor(a);if(c){var u=qn.toState(a,a.h||o.state.oldHue);o.setState(u),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,u,l),o.props.onChange&&o.props.onChange(u,l)}},o.handleSwatchHover=function(a,l){var c=qn.simpleCheckForValidColor(a);if(c){var u=qn.toState(a,a.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(u,l)}},o.state=os({},qn.toState(s.color,0)),o.debounce=(0,hR.default)(function(a,l,c){a(l,c)},100),o}return lR(i,[{key:"render",value:function(){var o={};return this.props.onSwatchHover&&(o.onSwatchHover=this.handleSwatchHover),cR.default.createElement(e,os({},this.props,this.state,{onChange:this.handleChange},o))}}],[{key:"getDerivedStateFromProps",value:function(o,a){return os({},qn.toState(o.color,a.oldHue))}}]),i}(Mh.PureComponent||Mh.Component);return r.propTypes=os({},e.propTypes),r.defaultProps=os({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r};So.default=vR;var Co={},vc={};Object.defineProperty(vc,"__esModule",{value:!0});vc.handleFocus=void 0;var yR=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_R=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),xR=G,pu=wR(xR);function wR(t){return t&&t.__esModule?t:{default:t}}function SR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vm(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function CR(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}vc.handleFocus=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){CR(i,n);function i(){var s,o,a,l;SR(this,i);for(var c=arguments.length,u=Array(c),h=0;h<c;h++)u[h]=arguments[h];return l=(o=(a=vm(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(u))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},o),vm(a,l)}return _R(i,[{key:"render",value:function(){return pu.default.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},pu.default.createElement(e,yR({},this.props,this.state)))}}]),i}(pu.default.Component)};Object.defineProperty(Co,"__esModule",{value:!0});Co.Swatch=void 0;var ym=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bR=G,_m=yf(bR),TR=we,OR=yf(TR),kR=vc,ER=Vn,MR=yf(ER);function yf(t){return t&&t.__esModule?t:{default:t}}var PR=13,DR=Co.Swatch=function(e){var r=e.color,n=e.style,i=e.onClick,s=i===void 0?function(){}:i,o=e.onHover,a=e.title,l=a===void 0?r:a,c=e.children,u=e.focus,h=e.focusStyle,d=h===void 0?{}:h,f=r==="transparent",m=(0,OR.default)({default:{swatch:ym({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,u?d:{})}}),v=function(T){return s(r,T)},C=function(T){return T.keyCode===PR&&s(r,T)},g=function(T){return o(r,T)},p={};return o&&(p.onMouseOver=g),_m.default.createElement("div",ym({style:m.swatch,onClick:v,title:l,tabIndex:0,onKeyDown:C},p),c,f&&_m.default.createElement(MR.default,{borderRadius:m.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};Co.default=(0,kR.handleFocus)(DR);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=vo;Object.defineProperty(t,"Alpha",{enumerable:!0,get:function(){return c(e).default}});var r=Vn;Object.defineProperty(t,"Checkboard",{enumerable:!0,get:function(){return c(r).default}});var n=yo;Object.defineProperty(t,"EditableInput",{enumerable:!0,get:function(){return c(n).default}});var i=_o;Object.defineProperty(t,"Hue",{enumerable:!0,get:function(){return c(i).default}});var s=xo;Object.defineProperty(t,"Raised",{enumerable:!0,get:function(){return c(s).default}});var o=wo;Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return c(o).default}});var a=So;Object.defineProperty(t,"ColorWrap",{enumerable:!0,get:function(){return c(a).default}});var l=Co;Object.defineProperty(t,"Swatch",{enumerable:!0,get:function(){return c(l).default}});function c(u){return u&&u.__esModule?u:{default:u}}})(hf);var bo={};function AR(t){return t===void 0}var jR=AR,_f={};Object.defineProperty(_f,"__esModule",{value:!0});var xm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$R=G,wm=LR($R);function LR(t){return t&&t.__esModule?t:{default:t}}function FR(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var ya=24;_f.default=function(t){var e=t.fill,r=e===void 0?"currentColor":e,n=t.width,i=n===void 0?ya:n,s=t.height,o=s===void 0?ya:s,a=t.style,l=a===void 0?{}:a,c=FR(t,["fill","width","height","style"]);return wm.default.createElement("svg",xm({viewBox:"0 0 "+ya+" "+ya,style:xm({fill:r,width:i,height:o},l)},c),wm.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))};Object.defineProperty(bo,"__esModule",{value:!0});bo.ChromeFields=void 0;var RR=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),IR=G,le=yc(IR),BR=we,NR=yc(BR),zR=et,HR=XR(zR),WR=jR,Sm=yc(WR),mr=hf,VR=_f,UR=yc(VR);function XR(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function yc(t){return t&&t.__esModule?t:{default:t}}function YR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GR(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function KR(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d_=bo.ChromeFields=function(t){KR(e,t);function e(r){YR(this,e);var n=GR(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,s){i.hex?HR.isValidHex(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number((0,Sm.default)(i.s)?n.props.hsl.s:i.s),l:Number((0,Sm.default)(i.l)?n.props.hsl.l:i.l),source:"hsl"},s))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return RR(e,[{key:"render",value:function(){var n=this,i=(0,NR.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=le.default.createElement("div",{style:i.fields,className:"flexbox-fix"},le.default.createElement("div",{style:i.field},le.default.createElement(mr.EditableInput,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=le.default.createElement("div",{style:i.fields,className:"flexbox-fix"},le.default.createElement("div",{style:i.field},le.default.createElement(mr.EditableInput,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),le.default.createElement("div",{style:i.field},le.default.createElement(mr.EditableInput,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),le.default.createElement("div",{style:i.field},le.default.createElement(mr.EditableInput,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),le.default.createElement("div",{style:i.alpha},le.default.createElement(mr.EditableInput,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=le.default.createElement("div",{style:i.fields,className:"flexbox-fix"},le.default.createElement("div",{style:i.field},le.default.createElement(mr.EditableInput,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),le.default.createElement("div",{style:i.field},le.default.createElement(mr.EditableInput,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),le.default.createElement("div",{style:i.field},le.default.createElement(mr.EditableInput,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),le.default.createElement("div",{style:i.alpha},le.default.createElement(mr.EditableInput,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),le.default.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,le.default.createElement("div",{style:i.toggle},le.default.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return n.icon=a}},le.default.createElement(UR.default,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),e}(le.default.Component);d_.defaultProps={view:"hex"};bo.default=d_;var To={};Object.defineProperty(To,"__esModule",{value:!0});To.ChromePointer=void 0;var qR=G,QR=f_(qR),JR=we,ZR=f_(JR);function f_(t){return t&&t.__esModule?t:{default:t}}var eI=To.ChromePointer=function(){var e=(0,ZR.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return QR.default.createElement("div",{style:e.picker})};To.default=eI;var Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.ChromePointerCircle=void 0;var tI=G,rI=g_(tI),nI=we,iI=g_(nI);function g_(t){return t&&t.__esModule?t:{default:t}}var sI=Oo.ChromePointerCircle=function(){var e=(0,iI.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return rI.default.createElement("div",{style:e.picker})};Oo.default=sI;Object.defineProperty(nc,"__esModule",{value:!0});nc.Chrome=void 0;var oI=G,qe=Un(oI),aI=uy,Qn=Un(aI),lI=we,cI=Un(lI),uI=t_,hI=Un(uI),gs=hf,dI=bo,fI=Un(dI),gI=To,Cm=Un(gI),pI=Oo,mI=Un(pI);function Un(t){return t&&t.__esModule?t:{default:t}}var xf=nc.Chrome=function(e){var r=e.width,n=e.onChange,i=e.disableAlpha,s=e.rgb,o=e.hsl,a=e.hsv,l=e.hex,c=e.renderers,u=e.styles,h=u===void 0?{}:u,d=e.className,f=d===void 0?"":d,m=e.defaultView,v=(0,cI.default)((0,hI.default)({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},h),{disableAlpha:i});return qe.default.createElement("div",{style:v.picker,className:"chrome-picker "+f},qe.default.createElement("div",{style:v.saturation},qe.default.createElement(gs.Saturation,{style:v.Saturation,hsl:o,hsv:a,pointer:mI.default,onChange:n})),qe.default.createElement("div",{style:v.body},qe.default.createElement("div",{style:v.controls,className:"flexbox-fix"},qe.default.createElement("div",{style:v.color},qe.default.createElement("div",{style:v.swatch},qe.default.createElement("div",{style:v.active}),qe.default.createElement(gs.Checkboard,{renderers:c}))),qe.default.createElement("div",{style:v.toggles},qe.default.createElement("div",{style:v.hue},qe.default.createElement(gs.Hue,{style:v.Hue,hsl:o,pointer:Cm.default,onChange:n})),qe.default.createElement("div",{style:v.alpha},qe.default.createElement(gs.Alpha,{style:v.Alpha,rgb:s,hsl:o,pointer:Cm.default,renderers:c,onChange:n})))),qe.default.createElement(fI.default,{rgb:s,hsl:o,hex:l,view:m,onChange:n,disableAlpha:i})))};xf.propTypes={width:Qn.default.oneOfType([Qn.default.string,Qn.default.number]),disableAlpha:Qn.default.bool,styles:Qn.default.object,defaultView:Qn.default.oneOf(["hex","rgb","hsl"])};xf.defaultProps={width:225,disableAlpha:!1,styles:{}};var vI=nc.default=(0,gs.ColorWrap)(xf);const yI=({styles:t})=>{const{fabricRef:e,selectedColor:r,setSelectedColor:n,saveCanvasState:i,setRedoHistory:s,addedListeners:o}=G.useContext(Hi);return F.jsxs(F.Fragment,{children:[F.jsx("img",{className:t.sidebar__logo,src:"/fabricJs/maxa.ico",alt:"MAXA"}),F.jsxs("section",{className:t.sidebar__buttons,children:[F.jsx("button",{className:t.sidebar__icon_button,onClick:()=>{s([]),xn(e,o,i),vC(e,r)},children:F.jsx(HC,{size:24})}),F.jsx("button",{className:t.sidebar__icon_button,onClick:()=>{s([]),xn(e,o,i),mC(e,r)},children:F.jsx(zC,{size:24})}),F.jsx("button",{className:t.sidebar__icon_button,onClick:()=>{s([]),xn(e,o,i),_C(e,r)},children:F.jsx(QC,{size:24})}),F.jsx("button",{className:t.sidebar__icon_button,onClick:()=>{s([]),xn(e,o,i),xC(e,r)},children:F.jsx(JC,{size:24})}),F.jsx(ZC,{className:t.sidebar__icon_button,fabricRef:e}),F.jsx("button",{className:t.sidebar__icon_button,onClick:()=>{s([]),xn(e,o,i),yC(e,r)},children:F.jsx(qC,{size:24})})]}),F.jsx(vI,{className:t.sidebar__color,onChange:a=>{wC(a.hex,e,n)},color:r,onChangeComplete:()=>{i()}})]})};function _I(t){return ot({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 128c0-35.3-28.7-64-64-64H205.3c-17 0-33.3 6.7-45.3 18.7L9.4 233.4c-6 6-9.4 14.1-9.4 22.6s3.4 16.6 9.4 22.6L160 429.3c12 12 28.3 18.7 45.3 18.7H512c35.3 0 64-28.7 64-64V128zM271 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"},child:[]}]})(t)}function xI(t){return ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 3.072a8 8 0 0 1 2.32 11.834l5.387 5.387a1 1 0 0 1 -1.414 1.414l-5.388 -5.387a8 8 0 0 1 -12.905 -6.32l.005 -.285a8 8 0 0 1 11.995 -6.643m-5.293 4.22a1 1 0 0 0 -1.414 1.415l1.292 1.293l-1.292 1.293a1 1 0 0 0 1.414 1.414l1.293 -1.292l1.293 1.292a1 1 0 0 0 1.414 -1.414l-1.292 -1.293l1.292 -1.293a1 1 0 1 0 -1.414 -1.414l-1.293 1.292z"},child:[]}]})(t)}const wI=({styles:t})=>{const{history:e,setHistory:r,redoHistory:n,setRedoHistory:i,savedObjects:s,saveCanvasState:o,undo:a,redo:l,fabricRef:c,setCanvasSvg:u,downloadImage:h,addedListeners:d}=G.useContext(Hi);return G.useEffect(()=>{if(c.current){let f=!1;c.current.on("object:moving",()=>{f=!0,i([])}),c.current.on("object:rotating",()=>{f=!0}),c.current.on("object:scaling",()=>{f=!0,i([])}),c.current.on("mouse:up",()=>{f&&(f=!1,o())}),(d===void 0||!d.length)&&c.current.on("object:added",o),d&&d.pop()}},[c.current]),F.jsxs(F.Fragment,{children:[F.jsx("hr",{}),F.jsxs("section",{className:t.sidebar__buttons,children:[F.jsx("button",{disabled:!e.length||e.length===1&&_l(e[0],s),className:t.sidebar__icon_button,onClick:a,children:F.jsx(GC,{size:24})}),F.jsx("button",{disabled:!n.length,className:t.sidebar__icon_button,onClick:l,children:F.jsx(UC,{size:24})}),F.jsx("button",{className:t.sidebar__icon_button,onClick:()=>CC(c,r,i),children:F.jsx(_I,{size:24})}),F.jsx("button",{className:t.sidebar__icon_button,onClick:()=>TC(c,u),children:F.jsx(XC,{size:24})}),F.jsx("button",{className:t.sidebar__icon_button,onClick:h,children:F.jsx(WC,{size:24})}),F.jsx("button",{className:t.sidebar__icon_button,onClick:()=>bC(c),children:F.jsx(xI,{size:24})}),F.jsx("button",{className:t.sidebar__icon_button,onClick:()=>{r([]),SC(c)},children:F.jsx(YC,{size:24,color:"#ff3333"})})]})]})};function p_(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=p_(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function SI(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=p_(t))&&(n&&(n+=" "),n+=e);return n}const CI={},as=({fabricRef:t,src:e,className:r,setRedoHistory:n,addedListeners:i,saveCanvasState:s})=>{const o=async()=>{if(t.current){n([]),xn(t,i,s);const{viewportLeft:a,viewportTop:l,viewportWidth:c,viewportHeight:u}=zn(t),h=await at.fromURL(e);h.set({left:a+Math.random()*(c-h.width),top:l+Math.random()*(u-h.height),originX:"center",originY:"center"}),t.current.add(h)}};return F.jsx("button",{className:SI(CI.sidebar__button,r),onClick:o,children:F.jsx("img",{src:e,alt:"Add image",width:24,height:24})})},bI="_imageUploadButton_1pkqe_1",TI="_imageUploadInput_1pkqe_24",bm={imageUploadButton:bI,imageUploadInput:TI},OI=({fabricRef:t,className:e,setRedoHistory:r,addedListeners:n,saveCanvasState:i})=>{const s=o=>{var l;const a=(l=o.target.files)==null?void 0:l[0];if(a){r([]),xn(t,n,i);const c=new FileReader;c.onload=u=>{var d;const h=new Image;h.onload=()=>{var p;const f=new at(h),{viewportLeft:m,viewportTop:v,viewportWidth:C,viewportHeight:g}=zn(t);f.set({left:m+Math.random()*(C-h.width),top:v+Math.random()*(g-h.height),originX:"center",originY:"center"}),(p=t.current)==null||p.add(f)},h.src=(d=u.target)==null?void 0:d.result},c.readAsDataURL(a)}};return F.jsxs("label",{className:`${bm.imageUploadButton} ${e}`,children:[F.jsx("input",{type:"file",accept:"image/*",onChange:s,className:bm.imageUploadInput}),F.jsx(KC,{size:24})]})},kI=({styles:t})=>{const{fabricRef:e,setRedoHistory:r,saveCanvasState:n,addedListeners:i}=G.useContext(Hi);return F.jsxs("section",{className:t.sidebar__buttons,children:[F.jsx(as,{className:t.sidebar__icon_button,fabricRef:e,src:"/fabricJs/react.svg",setRedoHistory:r,addedListeners:i,saveCanvasState:n}),F.jsx(as,{className:t.sidebar__icon_button,fabricRef:e,src:"/fabricJs/maxa.ico",setRedoHistory:r,addedListeners:i,saveCanvasState:n}),F.jsx(as,{className:t.sidebar__icon_button,fabricRef:e,src:"/fabricJs/cat.jpg",setRedoHistory:r,addedListeners:i,saveCanvasState:n}),F.jsx(as,{className:t.sidebar__icon_button,fabricRef:e,src:"/fabricJs/pikachu.png",setRedoHistory:r,addedListeners:i,saveCanvasState:n}),F.jsx(as,{className:t.sidebar__icon_button,fabricRef:e,src:"/fabricJs/doggy.jpg",setRedoHistory:r,addedListeners:i,saveCanvasState:n}),F.jsx(OI,{className:t.sidebar__icon_button,fabricRef:e,setRedoHistory:r,addedListeners:i,saveCanvasState:n})]})},EI="_sidebar_1mbh2_1",MI="_sidebar__color_1mbh2_5",PI="_sidebar__logo_1mbh2_11",DI="_sidebar__buttons_1mbh2_16",AI="_sidebar__icon_button_1mbh2_25",jI="_sidebar__color_input_1mbh2_29",_a={sidebar:EI,sidebar__color:MI,sidebar__logo:PI,sidebar__buttons:DI,sidebar__icon_button:AI,sidebar__color_input:jI},$I=()=>F.jsxs(F.Fragment,{children:[F.jsxs("aside",{className:_a.sidebar,children:[F.jsx(yI,{styles:_a}),F.jsx(kI,{styles:_a}),F.jsx(wI,{styles:_a})]}),F.jsx(NC,{})]}),LI=()=>{const t=G.useRef(null);return F.jsxs(OC,{fabricRef:t,children:[F.jsx(kC,{}),F.jsx($I,{})]})};Rv(document.getElementById("root")).render(F.jsx(LI,{}));
